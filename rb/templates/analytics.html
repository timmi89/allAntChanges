{% extends "base.html" %}
{% block title %}{{ group.name }} Analytics{%endblock%}


{% block extendedHead %}
<link rel="stylesheet" href="/static/components/morris/morris.css">
<link rel="stylesheet" href="/static/components/pikaday/css/pikaday.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<!-- <script src="/static/components/equalize/equalize.min.js"></script> -->
<script src="/static/components/morris/morris.js"></script>
<script src="/static/components/pikaday/pikaday-with-jquery.min.js"></script>

<!-- <script src="{{ STATIC_URL }}js/jquery.isotope.min.js"></script> -->
<!-- <script src="{{ STATIC_URL }}js/jquery.bigtext.js"></script> -->
<!-- <script src="{{ STATIC_URL }}global/js/jquery-ui-datepicker.custom.min.js"></script> -->
<!-- <script src="{{ STATIC_URL }}site/js/highcharts/highcharts.js"></script> -->
<!-- <link rel="stylesheet" href="{{ STATIC_URL }}global/css/datepicker_css/ui-lightness/jquery-ui-1.8.15.custom.css"> -->
<!--
<style>
    section[role="datepicker"] button {
        position: relative;
        top:-4px;
    }
</style>
-->
{% endblock %}

{% block mastheadContent %}
    {% with "analytics" as activeAdminTab %} 
    {% include "admin/nav_tabs.html" %}
    {% endwith %}
{% endblock %}

{% block wideContent %}
<div class="mostlyWide">
<section role="datepicker" class="datepicker">
	<form>
        <label>Date Range: </label>
    	<input type="text" name="start_date" />
    	<label>to</label>
    	<input type="text" name="end_date" />
    	<button class="btn" type="submit" >Update</button>
    </form>
</section>


<style>
.summary .engagement-rate { }
.summary .engagement-rate h2 { }
.summary .engagement-rate .donut { border-right:1px solid #ccc; width:90%;  }
.summary .other-totals {  }
/* http://css-tricks.com/vertically-center-multi-lined-text/ */
.other-totals .attribute .data { font-size:48px; font-weight:bold; text-align: center;  display: table-cell; vertical-align: middle; text-align: center; height:200px; }
.other-totals label { font-size:16px; font-weight:normal; display:block; text-align: center; }
.section { margin-bottom:80px; clear:both; overflow: auto;}
.section h1 { font-size: 21px; }
.section.readrboard-usage h1 {margin-bottom: -32px;}
.column { text-align: center; color:#7f7f7f; font-size:14px; }
.column.left { text-align: left; }
.noteworthy { color:#247292; }
.row { clear:both; overflow:auto; }
.row.header { font-weight:bold; border-bottom:1px solid #ccc; }
.row.even { background:#f0f0f0; }
.row.header:hover { background:transparent; }
.loading { color:#ccc; font-size:16px; line-height: 35px; height: 35px; width:100%; margin:0 auto; text-align: center; padding:20px; position:absolute;}
.loading div { display: inline-block; }
.template { opacity:0; overflow: auto; z-index: 1; position: relative; background:#fff;}
/*.template.rendered { opacity:1;transition: opacity 5s ease-in-out; -moz-transition: opacity 5s ease-in-out; -webkit-transition: opacity 5s ease-in-out; }*/
</style>
<section id="analyticsReport" role="panels">
    <div class="grid-12 section summary">
        <div class="loading"><div><img src="/static/site/images/reaction_preloader.gif"/> Querying Engagement Totals...</div></div>
    </div>
    <div class="section readrboard-usage">
        <div class="loading"><div><img src="/static/site/images/reaction_preloader.gif"/> Analyzing ReadrBoard Usage...</div></div>
        <!-- <div class="grid-12 row padded header">
            <div class="grid-3 column header">&nbsp;</div>
            <div class="grid-3 column header">Used ReadrBoard in last 30 days</div>
            <div class="grid-3 column header noteworthy">Used ReadrBoard in last 180 days</div>
            <div class="grid-3 column header">No recent usage</div>
        </div>
        <div class="grid-12 row padded content">
            <div class="grid-3 column left">Sessions</div>
            <div class="grid-3 column">1,431</div>
            <div class="grid-3 column noteworthy">10,432</div>
            <div class="grid-3 column">55,012</div>
        </div>
        <div class="grid-12 row padded content even">
            <div class="grid-3 column left">Session Pageviews</div>
            <div class="grid-3 column">1.9</div>
            <div class="grid-3 column noteworthy">1.8</div>
            <div class="grid-3 column">1.5</div>
        </div>
        <div class="grid-12 row padded content">
            <div class="grid-3 column left">Avg Scroll Depth</div>
            <div class="grid-3 column">29%</div>
            <div class="grid-3 column noteworthy">25%</div>
            <div class="grid-3 column">15%</div>
        </div> -->
    </div>
<script>
var $temp_readrboardUsage = $('<div><div class="template"><h1>ReadrBoard Usage</h1>'+
        '<div class="grid-12 row padded header">' +
            '<div class="grid-3 column header">&nbsp;</div>' +
            '<div class="grid-3 column header">Used ReadrBoard in last 30 days</div>' +
            '<div class="grid-3 column header noteworthy">Used ReadrBoard in last 180 days</div>' +
            '<div class="grid-3 column header">No recent usage</div>' +
        '</div>' +
    '</div></div>');

    var readrboardUsageData = {
        rb_last_30:[1431,1.9,29],
        rb_last_180:[10432,1.8,25],
        no_rb:[55012,1.5,15]
    };

    var $sessions_row = $('<div class="grid-12 row padded content">' +
            '<div class="grid-3 column left">Sessions</div>' +
            '<div class="grid-3 column">'+readrboardUsageData.rb_last_30[0]+'</div>' +
            '<div class="grid-3 column noteworthy">'+readrboardUsageData.rb_last_180[0]+'</div>' +
            '<div class="grid-3 column">'+readrboardUsageData.no_rb[0]+'</div>' +
        '</div>');
    var $session_pageviews_row = $('<div class="grid-12 row padded content even">' +
            '<div class="grid-3 column left">Session Pageviews</div>' +
            '<div class="grid-3 column">'+readrboardUsageData.rb_last_30[1]+'</div>' +
            '<div class="grid-3 column noteworthy">'+readrboardUsageData.rb_last_180[1]+'</div>' +
            '<div class="grid-3 column">'+readrboardUsageData.no_rb[1]+'</div>' +
        '</div>');
    var $avg_scrolldepth_row = $('<div class="grid-12 row padded content">' +
            '<div class="grid-3 column left">Avg Scroll Depth</div>' +
            '<div class="grid-3 column">'+readrboardUsageData.rb_last_30[2]+'</div>' +
            '<div class="grid-3 column noteworthy">'+readrboardUsageData.rb_last_180[2]+'</div>' +
            '<div class="grid-3 column">'+readrboardUsageData.no_rb[2]+'</div>' +
        '</div>');

    $temp_readrboardUsage.find('.template').append( $sessions_row, $session_pageviews_row, $avg_scrolldepth_row );

    $('.section.readrboard-usage').append($temp_readrboardUsage).find('.template').animate({'opacity':1},500);


var $temp_summarySection = $('<div class="template"><div class="grid-3 engagement-rate">'+
        '<div class="donut" id="engaged-sessions" style="height:200px;"></div>'+
    '</div>'+
    '<div class="grid-9 other-totals"></div></div>');

    var summaryData = [
        { data:'1,040',label:'Reactions' },
        { data:'134,200',label:'Reaction Views' },
        { data:'52%',label:'Avg Scroll Depth' },
        { data:'0:37',label:'Avg Time Spent on Content' }
    ];
    $.each(summaryData, function(idx, item) {
        var $item = $('<div class="grid-quarter attribute"><div class="data">'+item.data+' <label>'+item.label+'</label></div></div>');
        $temp_summarySection.find('.other-totals').append($item);
    });

    // $('.summary.section').append($temp_summarySection);
    // $('.summary.section').find('.template').addClass('rendered');
    $('.section.summary').append($temp_summarySection).find('.template').animate({'opacity':1},500);

</script>



<style>
a { color:#5ba0bc; }
.topic-tag { display: inline-block; }
.topic-tag:hover { background:#f0f0f0; }
.topic-tag a { color:#5ba0bc; text-decoration: none;  }
.topic-tag.large { font-size:54px; padding:10px 10px; }
.topic-tag.medium { font-size:34px; padding:10px 10px; }
.topic-tag.small { font-size:21px; padding:10px 10px; }
.reaction-tag { border:4px solid #737373; padding:10px 20px; display:block; text-align:center; margin-right:10px; margin-bottom:10px;}
    .grid-6 .reaction-tag { font-size:48px; }
    .grid-4 .reaction-tag { font-size:24px; }
.reaction-tag a {  color:#3c3c3c; font-weight:bold; }
.reaction-tag .counter { display:block;font-size:16px; }
</style>
    <div class="section reactions-and-topics">
        <div class="grid-12 row padded header">
            <div class="grid-6">
                <h1>Most Popular Reactions</h1>
            </div>
            <div class="grid-6">
                <h1>Most Engaged Topics</h1>
            </div>
        </div>
        <div class="grid-12 row padded">
            <div class="grid-6">
                <div class="grid-6"><span class="reaction-tag"><a href="#">Clever <span class="counter">67</span></a></span></div>
                <div class="grid-6"><span class="reaction-tag"><a href="#">Duh <span class="counter">55</span></a></span></div>
                <div class="grid-4"><span class="reaction-tag"><a href="#">OMG <span class="counter">32</span></a></span></div>
                <div class="grid-4"><span class="reaction-tag"><a href="#">Amazing! <span class="counter">24</span></a></span></div>
                <div class="grid-4"><span class="reaction-tag"><a href="#">Agreed <span class="counter">21</span></a></span></div>
            </div>
            <div class="grid-6">
                <div class="grid-12">
                    <span class="topic-tag large"><a href="#">broncos</a></span>
                    <span class="topic-tag large"><a href="#">gun control</a></span>
                    <span class="topic-tag medium"><a href="#">weather</a></span>
                    <span class="topic-tag medium"><a href="#">xcel</a></span>
                    <span class="topic-tag medium"><a href="#">energy</a></span>
                    <span class="topic-tag medium"><a href="#">shooting</a></span>
                    <span class="topic-tag small"><a href="#">road work</a></span>
                    <span class="topic-tag small"><a href="#">mayor hancock</a></span>
                    <span class="topic-tag small"><a href="#">pit bulls</a></span>
                    <span class="topic-tag small"><a href="#">bacon</a></span>
                </div>
            </div>
        </div>
    </div>
<style>
.page_card { background:#f9f9f9; border:1px solid #ccc; clear:both; overflow:auto; }
.page_card h1 { font-size:18px; }
.page_card .attribute { font-size:16px; font-weight:bold; }
.page_card .attribute label { font-size:12px; font-weight:normal; display:block; }
.page_card .reactions { font-size:11px; font-weight:bold; } 
</style>
    <div class="section reactions-and-topics">
        <div class="grid-12 row padded header">
            <h1>Most Engaged Pages</h1>
        </div>
        <div class="grid-12 row padded">
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">Broncos prep for Super Bowl 48 moves to New Jersey</a></h1>
                    <div class="grid-6 attribute padded">11.2% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">26% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:42 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">2.3 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Amazing; Can't Wait; Love it; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">GOP looking to rollback new gun control</a></h1>
                    <div class="grid-6 attribute padded">12.4% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">26% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:40 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.8 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Dislike; Agree; Surprising; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">Peyton Manning 'certain' Seahawks will be challenge</a></h1>
                    <div class="grid-6 attribute padded">14.6% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">31% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:22 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.7 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Amazing; Can't Wait; Love it; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">Mayor Hancock seeks to expand Xcel</a></h1>
                    <div class="grid-6 attribute padded">12.2% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">16% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:23 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.9 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Dislike; Agree; Surprising; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">Some other headline here</a></h1>
                    <div class="grid-6 attribute padded">12.4% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">26% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:40 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.8 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Dislike; Agree; Surprising; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">Incredible local news article</a></h1>
                    <div class="grid-6 attribute padded">11.2% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">26% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:42 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">2.3 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Amazing; Can't Wait; Love it; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">You won't believe what happens when this 11 year old turtle hears for the first time</a></h1>
                    <div class="grid-6 attribute padded">12.2% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">16% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:23 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.9 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Dislike; Agree; Surprising; ...</div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">Shocking discover at local power plant</a></h1>
                    <div class="grid-6 attribute padded">14.6% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">31% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:22 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.7 <label>Avg Scroll</label></div>
                    <div class="grid-12 reactions padded">Amazing; Can't Wait; Love it; ...</div>
                </section>
            </div>
        </div>
    </div>
<style>
.content-item a { font-weight:normal; font-size:18px; color:#3c3c3c; }
.content-item .reactions { margin-top:10px;}
.content-item .reaction-tag { font-weight:normal; font-size:12px; padding:5px; display:inline-block; border-width:2px;}
.via { padding:10px 0; color:#999; font-size:12px; }
.via a { font-size:12px; color:#5ba0bc; }
</style>
    <div class="section engaged-content">
        <div class="grid-12 row padded header">
            <h1>Most Engaged Content</h1>
        </div>
        <div class="grid-12 row padded">
            <div class="grid-4 padded">
                <section class="content-item">
                    <h1><a href="#">All three of us, Ludo, Silvia and myself, are from three different countries. So there all three of us were, speaking different languages, and having fun reading GIFs aloud and comparing in our native tongues, along with different customs and perceptions,” Petrovici says.</a></h1>
                    <div class="grid-12 via">
                        <em>via <a href="#">SomeArticle Name</a></em>
                    </div>
                    <div class="grid-12">
                        <div class="reaction-tag">Amazing (29)</div>
                        <div class="reaction-tag">Crazy (17)</div>
                    </div>
                </section>
            </div>
            <div class="grid-4 padded">
                <section class="content-item">
                    <h1><a href="#"><img src="http://www.vancouverdesi.com/wp-content/uploads/2014/04/9737239-300x186.jpg"/></a></h1>
                    <div class="grid-12 via">
                        <em>via <a href="#">SomeArticle Name</a></em>
                    </div>
                    <div class="grid-12 reactions">
                        <div class="reaction-tag">Sad (12)</div>
                        <div class="reaction-tag">Shocking (10)</div>
                    </div>
                </section>
            </div>
            <div class="grid-4 padded">
                <section class="content-item">
                    <h1><a href="#"><iframe class="contentBody" width="300" height="250" frameborder="0" src="http://www.youtube.com/embed/kzcs5EQOLwo"></iframe></a></h1>
                    <div class="grid-12 via">
                        <em>via <a href="#">SomeArticle Name</a></em>
                    </div>
                    <div class="grid-12">
                        <div class="reaction-tag">LOVE IT (9)</div>
                        <div class="reaction-tag">Legit (8)</div>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <div class="section engaged-referrers">
        <div class="grid-12 row padded header">
            <h1>Most Engaged Referrers</h1>
        </div>
        <div class="grid-12 row padded">
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">facebook.com</a></h1>
                    <div class="grid-6 attribute padded">11.2% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">26% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:42 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">2.3 <label>Avg Scroll</label></div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">google.com</a></h1>
                    <div class="grid-6 attribute padded">12.4% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">26% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:40 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.8 <label>Avg Scroll</label></div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">twitter.com</a></h1>
                    <div class="grid-6 attribute padded">14.6% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">31% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:22 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.7 <label>Avg Scroll</label></div>
                </section>
            </div>
            <div class="grid-3 center padded">
                <section class="page_card">
                    <h1><a href="#">pinterest.com</a></h1>
                    <div class="grid-6 attribute padded">12.2% <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">16% <label>Avg Scroll</label></div>
                    <div class="grid-6 attribute padded">0:23 <label>Engagement</label></div>
                    <div class="grid-6 attribute padded">1.9 <label>Avg Scroll</label></div>
                </section>
            </div>
        </div>
    </div>
    <div class="grid-12 sessions section">
        <div class="grid-12 row padded header">
            <div class="grid-9">
                <h1>Engaged Sessions / Last 30 Days</h1>
            </div>
            <div class="grid-3">
                <h1>Time Spent / Last 30 Days</h1>
            </div>
        </div>
        <div class="grid-3 engagement-rate">
            <div class="donut" id="session-actions" style="height:200px;"></div>
        </div>
        <div class="grid-6 other-totals">
            <div class="grid-third attribute"><div>140 <label>Reacted</label></div></div>
            <div class="grid-third attribute"><div>1,200 <label>Viewed Reactions</label></div></div>
            <div class="grid-third attribute"><div>8,041 <label>Scrolled Down</label></div></div>
        </div>
        <div class="grid-3 engagement-rate">
            <div class="donut" id="session-time" style="height:200px;"></div>
        </div>
    </div>
    <div class="section engagement-over-time">
        <div class="grid-12 row padded header">
            <h1>Engagement Over Time</h1>
        </div>
        <div class="grid-12 row padded">
            <div id="area-example"></div>
        </div>
    </div>
</section>
</div>

<script>
function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

(function(){

        // put in external file...
        RB.analytics = {
        	updateAll: function() {

                
                Morris.Donut({
                  element: 'engaged-sessions',
                  data: [
                    {label: "Engaged Sessions", value: 10.5 },
                    {label: "Non-Engaged Sessions", value: 89.5 }
                  ],
                  formatter: function (y) { return y + "%" }
                }).select(0);

                Morris.Donut({
                  element: 'session-actions',
                  data: [
                    {label: "Took Action", value: 14000 },
                    {label: "Reacted", value: 140 },
                    {label: "Viewed Reactions", value: 1200 },
                    {label: "Scrolled", value: 8041 }
                  ]
                }).select(0);

                Morris.Donut({
                  element: 'session-time',
                  data: [
                    {label: "sessions over 0:15", value: 14000 },
                    {label: "sessions over 0:30", value: 10000 },
                    {label: "sessions over 0:45", value: 6000 },
                    {label: "sessions over 1:00", value: 1000 },
                    {label: "sessions over 1:30", value: 800 },
                    {label: "sessions over 2:00", value: 300 },
                  ]
                }).select(0);



                Morris.Area({
                  element: 'area-example',
                  data: [
                    { date: '4-10-14', Reactions: 50,  ReactionViews: 50, Scrolls: 50,   TimeSpent: 50 },
                    { date: '4-11-14', Reactions: 75,  ReactionViews: 65, Scrolls: 175,  TimeSpent: 165 },
                    { date: '4-12-14', Reactions: 50,  ReactionViews: 40, Scrolls: 150,  TimeSpent: 140 },
                    { date: '4-13-14', Reactions: 75,  ReactionViews: 65, Scrolls: 175,  TimeSpent: 165 },
                    { date: '4-14-14', Reactions: 50,  ReactionViews: 40, Scrolls: 150,  TimeSpent: 140 },
                    { date: '4-15-14', Reactions: 75,  ReactionViews: 65, Scrolls: 175,  TimeSpent: 165 },
                    { date: '4-16-14', Reactions: 100, ReactionViews: 90, Scrolls: 100,  TimeSpent: 190 }
                  ],
                  lineColors: ['#7cc1db','#bf9fb8','#c1d1b6','#c4c4c4'],
                  xkey: 'date',
                  ykeys: ['Reactions', 'ReactionViews', 'Scrolls', 'TimeSpent'],
                  labels: ['Reactions', 'Reaction Views', 'Scrolls', 'Time Spent']
                });

        	},
            setDates: function(){

                var nowDate = moment().format("MM/DD/YY");
                RB.analytics.startDate = RB.util.getHashValue('start') || nowDate;
                RB.analytics.endDate = RB.util.getHashValue('end') || moment().add('days',1).format("MM/DD/YY");

                RB.analytics.jsStartDate = RB.analytics.startDate ? new Date(RB.analytics.startDate) : new Date();
                RB.analytics.jsEndDate = RB.analytics.endDate ? new Date(RB.analytics.endDate) : new Date();
            }

        };


        // defined in template
        RB.group.short_name = "{{ group.short_name }}";
        RB.group.full_name = "{{ group.name }}";
        
        $(function(){

            RB.analytics.setDates();

            //init this once so that the destroy function doesn't error when it refreshes this.
            // $('section[role="tag cloud grid"]').isotope();
            
            // $('section[role="datepicker"] input' ).datepicker({ dateFormat: 'mm/dd/y' });

            var start_date = new Pikaday({ field: $('input[name="start_date"]')[0], format: 'MM/DD/YY' });
            var end_date = new Pikaday({ field: $('input[name="end_date"]')[0], format: 'MM/DD/YY' });

            $('input[name="start_date"]').val( RB.analytics.startDate );
            $('input[name="end_date"]').val( RB.analytics.endDate );

            $('section[role="datepicker"] form').submit( function() {

                var startDate = $('input[name="start_date"]').val();
                var endDate = $('input[name="end_date"]').val();
                
                RB.util.setHashValue('start', startDate );
                RB.util.setHashValue('end', endDate );

                RB.analytics.updateAll();
                return false;
            });

            RB.analytics.updateAll();

        });


})();
</script>
{% endblock wideContent %}
