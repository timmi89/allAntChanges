{% extends "base.html" %}

{% block title %}ReadrBoard{%endblock%}
{% block extendedHead %}
<link rel="canonical" href="{% if debug %}http://local.readrboard.com:8081/{% else %}http://www.readrboard.com/{% endif %}">
<meta name="google-site-verification" content="pWVfDSLL5X9Fs9agM5UiL2BHDDcxJtN46MgM2YkJXyg" />
{%endblock%}

{% block subheaderContent %}
{% include "sidebar.html" %}
{% endblock %}


{% block wideContent %}
<div class="grid-whole">
  <section role="panels" class="content">

{% if board %}
<div id="board_header">
    <h1>{{ board.title }}</h1>
    {% if board.description %}<h2>{{ board.description }}</h2>{% endif %}
    <div class="board_meta">
        <button id="board_follow_button" class="btn">Follow this board</button>
        <span id="board_follower_count" style="display:block;float:right;margin:9px 8px 0 0;font-size:12px;"></span>
        {% if board.owner.first_name %}
        <h3><a href="/user/{{ board.owner.id }}">{{ board.owner.first_name }} {{ board.owner.last_name }}</a></h3>
        {% else %}
        <h3><a href="/user/{{ board.owner.id }}">{{ board.owner.username }}</a></h3>
        {% endif %}
    </div>
</div>

{% endif %}

{% if not profile_user and not group and not board and not query_string %}
<div id="more_content">
    <div class="section_content">
{% endif %}

    {% block cards %}
        {% include "interactions.html" %}
        <script>
        $('a[rel="tooltip"]').tooltip({
            placement:"bottom"
        });
        </script>
    {% endblock cards %}    

{% if not profile_user and not group and not board and not query_string %}
    </div>
</div>
{% endif %}

</section>
</div>

{% endblock wideContent %}

{% block pageJS %}
<script>
(function($){
    $(function(){

        // $('#cards').isotope({
        //   itemSelector:'.cardWrap',
        //   masonry: {
        //     columnWidth: 530
        //   }
        // });

        var container = document.querySelector('#cards');
        var msnry = new Masonry( container, {
          // options
          // columnWidth: 300,
          itemSelector: '.card'
        });

        {% if board %}
        $('#board_follow_button').click( function() {
            RB.follow.add({{ board.id }},'brd');
        });
        RB.follow.followers({{ board.id }},'brd')
        {% endif %}

    });
})(jQuery);
</script>
{% endblock %}
