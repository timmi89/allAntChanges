{% load static %}

<!-- <h4>Activity</h4> -->
<ul role="filters" class="activity">
  
    <li role="all">
    {% if profile_user %}
      <a href="/user/{{ profile_user.id }}">
    {% else %}
      <a href="/stream/">
    {% endif %}
    All Reactions</a>
    </li>

  <!-- <li role="tags"><a href="{% if profile_user %}/user/{{ profile_user.id }}{% endif %}/tags/">Tags</a></li>
  
    <!-- [ec] commenting this out until it works-->
    <!--
    <li role="shares"><a href="{% if profile_user %}/user/{{ profile_user.id }}{% endif %}/shares/">Shares</a>
    </li>
    -->

  <!-- <li role="comments"><a href="{% if profile_user %}/user/{{ profile_user.id }}{% endif %}/comments/">Comments</a></li> -->

  <!-- only show this line if looking at a user profile and you're that user-->
    {% if profile_user %}
    <!--
    <li role="bookmarks"><a href="/user/{{ profile_user.id }}/bookmarks/">Bookmarks</a>
    </li>
    -->
    {% endif %}
</ul>

{% if group %}
<div id="avatar">
  {% if group.logo_url_lg %}<img src="{{ group.logo_url_lg }}" />{% endif %}
	{% if not group.logo_url_lg %}<h2>{{ group.name }} | <a href="javascript:void(0);" onclick="follow_group();">follow this group</a></h2>{% endif %}
</div>
{% endif %}
<script>
function follow_group() {
  var data = {
    follow_id:13,
    type:"grp"
};

$.ajax({
  beforeSend: function( xhr ) {
    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken') );
  },
  url: "/api/follow/",
  type: "post",
  // contentType: "application/json",
  contentType:"application/x-www-form-urlencoded",
  dataType: "json",
  data: { json: $.toJSON(data) },
  success: function(response) {
    console.dir(response);
  }
});
}

function follow() {
  var data = {
    follow_id:57,
    type:"usr"
};

$.ajax({
  beforeSend: function( xhr ) {
    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken') );
  },
  url: "/api/follow/",
  type: "post",
  // contentType: "application/json",
  contentType:"application/x-www-form-urlencoded",
  dataType: "json",
  data: { json: $.toJSON(data) },
  success: function(response) {
    console.dir(response);
  }
});
}
function who_i_follow_count() {
  // who am I following?
  var data = {
    user_id:98,
    page_num:1,
    types:["usr","grp","pag"]
};

$.ajax({
  beforeSend: function( xhr ) {
    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken') );
  },
  url: "/api/follow/",
  type: "get",
  // contentType: "application/json",
  contentType:"application/x-www-form-urlencoded",
  dataType: "json",
  data: { json: $.toJSON(data) },
  success: function(response) {
    console.dir(response);
  }
});
}

function who_follows() {
  // who follows this thing
  var data = {
    entity_id:57,
    entity_type:"usr",
    page_num:1
};

$.ajax({
  beforeSend: function( xhr ) {
    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken') );
  },
  url: "/api/entity/follow/",
  type: "get",
  // contentType: "application/json",
  contentType:"application/x-www-form-urlencoded",
  dataType: "json",
  data: { json: $.toJSON(data) },
  success: function(response) {
    console.dir(response);
  }
});
}
</script>
{% if profile_user %}
  <div id="user_data">
  {% csrf_token %}
    <img src="{{ profile_user.social_user.img_url }}?type=large">
    <h3>{{ profile_user.social_user.full_name }} <a href="javascript:void(0);" onclick="follow();">follow</a> | <a href="javascript:void(0);" onclick="who_i_follow_count();">who i follow count</a> | <a href="javascript:void(0);" onclick="who_follows();">who_follows count</a></h3>
    {% if cookie_user.id = profile_user.id %}
      <label for="private_profile">
        <input type="checkbox" id="private_profile" {% if user.social_user.private_profile %}checked="checked"{% endif %} /> 
        Profile is only visible to me
      </label>
    {% endif %}
    <script type="text/javascript">
    	$('#private_profile').click( function() {
    		$('label[for="private_profile"] span').remove();
    		var sendData = {
    			user_id:RDRAuth.rdr_user.user_id, 
    			readr_token:RDRAuth.rdr_user.readr_token,
    			group_id:1
    		};
  		$.ajax({
  		    url: "/api/privacy/toggle/",
  		    type: "get",
  		    data: {
              	json: JSON.stringify(sendData)
              },
  		    success: function(response) {
  		        $('label[for="private_profile"]').append('<span>Saved</span>');
  		    }
  		});
    	});
    </script>
  </div>
{% endif %}