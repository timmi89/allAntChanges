{% load static %}

{% if group %}
<div id="avatar">
  <div style="float:right;">
    <a href="javascript:void(0);" onclick="RB.follow.add({{ group.id }}, 'grp');">follow this group</a> | <a href="javascript:void(0);" onclick="RB.follow.remove({{ group.id }},'grp');">unfollow this group</a>
  </div>
  {% if group.logo_url_lg %}<img src="{{ group.logo_url_lg }}" />{% endif %}
	{% if not group.logo_url_lg %}<h2>{{ group.name }}</h2>{% endif %}
</div>
<script>
RB.follow.followers({{ group.id }},'grp');
</script>
{% endif %}

{% if profile_user %}
  <div id="user_data">
  {% csrf_token %}
    <img src="{{ profile_user.social_user.img_url }}?type=large">
    <h3>{{ profile_user.social_user.full_name }} <a href="javascript:void(0);" onclick="follow();">follow</a> | <a href="javascript:void(0);" onclick="who_i_follow_count();">who i follow count</a> | <a href="javascript:void(0);" onclick="who_follows_user();">who_follows count</a></h3>
    {% if cookie_user.id = profile_user.id %}
      <label for="private_profile">
        <input type="checkbox" id="private_profile" {% if user.social_user.private_profile %}checked="checked"{% endif %} /> 
        Profile is only visible to me
      </label>
    {% endif %}
    <script type="text/javascript">
    	$('#private_profile').click( function() {
    		$('label[for="private_profile"] span').remove();
    		var sendData = {
    			user_id:RDRAuth.rdr_user.user_id, 
    			readr_token:RDRAuth.rdr_user.readr_token,
    			group_id:1
    		};
  		$.ajax({
  		    url: "/api/privacy/toggle/",
  		    type: "get",
  		    data: {
              	json: JSON.stringify(sendData)
              },
  		    success: function(response) {
  		        $('label[for="private_profile"]').append('<span>Saved</span>');
  		    }
  		});
    	});
    </script>
  </div>
{% endif %}