//server injected code
if (typeof gigya == 'undefined') {gigya = new Object();}
 gigya.env='prod';
 gigya.gaeDomain='read-write.appspot.com';
 gigya.build={version:'2.12',time:'Sun 05/29/2011 11:48:59.81 '};
 if (typeof gigya.partnerSettings == 'undefined') gigya.partnerSettings={authMode:'cookie',baseDomains:''};
//end server injected code
if(typeof gigya=="undefined"){gigya=new Object();}if(typeof gigya.partnerSettings=="undefined"){gigya.partnerSettings={authMode:"cookie",baseDomain:""};}if(typeof gigya=="undefined"){gigya=new Object();}if(typeof gigya.services=="undefined"){gigya.services=new Object();}if(typeof gigya.services.socialize=="undefined"){gigya.services.socialize=new Object();}(function(){var baseDomains=gigya.partnerSettings.baseDomains;if(baseDomains&&!gigya.partnerSettings.baseDomain){baseDomains=baseDomains.split(",");for(var i=0;i<baseDomains.length;i++){var baseDomain=baseDomains[i];if(document.domain.indexOf(baseDomain)==document.domain.length-baseDomain.length){gigya.partnerSettings.baseDomain=baseDomain;break;}}}if(!gigya.partnerSettings.baseDomain){gigya.partnerSettings.baseDomain="";}})();gigya.services.socialize._arRequestsWaitingForFBC=[];gigya.fbcInitialized=function(){if(gigya.fbcInitializedTime==null||typeof gigya.fbcInitializedTime=="undefined"){return"noFBC";}return(gigya.fbcInitializedTime>0);};gigya.services.socialize.loadFBC=function(){gigya.fbcInitializedTime=-1;var fbdiv=document.createElement("div");fbdiv.id="FB_HiddenContainer";fbdiv.style.display="none";fbdiv.style.position="absolute";fbdiv.style.width="0px";fbdiv.style.height="0px";fbdiv.style.left="-100px";fbdiv.style.top="-100px";gigya.global.bodyAppendChild(fbdiv);function fbInit(){FB_RequireFeatures(["Connect"],function(){FB.Facebook.init(gigya.fbcAPIKey,gig_xdReceiverUrl);});FB.ensureInit(function(){FB.Facebook.set_baseDomain(gigya.fbcDomain);FB.Connect.get_status().waitUntilReady(function(status){gigya.fbcInitializedTime=(new Date()).getTime();gigya.services.socialize._dispatchGlobalEvent({isEvent:true,eventName:"FBCLoaded"});gigya.services.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){gigya.refreshFbcSession();},onConnect:function(){gigya.refreshFbcSession();},onLogout:function(e){gigya.refreshFbcSession();}});});});}var head=document.getElementsByTagName("head")[0],script=document.createElement("script"),done=false;if(gigya._vars.lastScriptProtocol=="https"){script.src="https://ssl.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php";}else{script.src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US";}script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;fbInit();}};head.appendChild(script);};gigya.services.socialize.waitForService=function(c,p){if(p&&p["service"]&&p["service"].toLowerCase()=="fbconnect"){var callback=p["callback"];if(!gigya.fbcInitializedTime||gigya.fbcInitializedTime<0){gigya.services.socialize.addEventHandlers({listenerType:"component"},{onFBCLoaded:callback,context:p["context"]});}else{callback({context:p["context"]});}}};gigya.refreshFbcSession=function(){if(typeof FB=="undefined"){return;}var fncCallback=function(response){gigya.fbcInitializedTime=(new Date()).getTime();gigya.services.socialize._dispatchGlobalEvent({isEvent:true,eventName:"FBCRefreshed"});};if(gigya.fbAppID&&FB&&FB.getLoginStatus){FB.getLoginStatus(fncCallback,true);}else{if(FB&&FB.Connect&&FB.Connect.forceSessionRefresh){FB.Connect.forceSessionRefresh(function(){FB.Connect.get_status().waitUntilReady(fncCallback);});}}};gigya.services.socialize._retryPendingFBReqs=function(){for(var i=0;i<gigya.services.socialize._arRequestsWaitingForFBC.length;i++){gigya.services.socialize._arRequestsWaitingForFBC[i].cmd.run();}gigya.services.socialize._arRequestsWaitingForFBC=[];};gigya._getDebugStatus=function(){return(document.cookie.indexOf("_gig_dbgConsole_dbg=1")!=-1)?1:0;};gigya.hideid=function(id){var el=document.getElementById(id);if(el){el.style.display="none";}};gigya.showid=function(id){var el=document.getElementById(id);if(el){el.style.display=((gigya.browser&&gigya.browser.isIE6)?(el.tagName=="TD"?"table-cell":(el.tagName=="TR"?"":(el.tagName=="TABLE"?"":("block")))):"");}};gigya.getParamValueFromURL=function(param,url,def){if(null==url||""==url){return def;}var iqm=url.indexOf("?");if(iqm==-1){return def;}var qs="&"+url.substr(iqm+1);var idx=qs.toLowerCase().indexOf("&"+param.toLowerCase()+"=");if(idx==-1){return def;}var valAndMore=qs.substr(idx+(1+param.length+1))+"&";idx=valAndMore.indexOf("&");return valAndMore.substr(0,idx);};gigya.log=function(){};if(typeof gigya.fbConnectEnabled=="undefined"){gigya.fbConnectEnabled=false;}if(typeof gigya.global=="undefined"){gigya.global=new Object();}gigya.global.sanitizeInnerHTML=function(s){if(s==null||typeof s=="undefined"){return s;}return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&#34;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/&amp;#8203;/g,"&#8203;");};gigya.global.sanitizeAttribute=function(s){if(s==null||typeof s=="undefined"){return s;}return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;");};gigya.global.bodyAppendChild=function(el){if(!document.body){return;}if(document.body.insertBefore&&document.body.firstChild){document.body.insertBefore(el,document.body.firstChild);}else{document.body.appendChild(el);}};gigya.global._NextZIndex=10000000;gigya.browser={};gigya.browser.mobileClients=["iphone","android","ipad","midp","240x320","blackberry","netfront","nokia","panasonic","portalmmm","sharp","sie-","sonyericsson","symbian","windows ce","benq","mda","mot-","opera mini","philips","pocket pc","sagem","samsung","sda","sgh-","vodafone","xda"];gigya.browser.lcUA=navigator.userAgent.toLowerCase();(function(){var mobileClients=gigya.browser.mobileClients;for(var i in mobileClients){if(gigya.browser.lcUA.indexOf(mobileClients[i])!=-1){gigya.browser.isMobile=true;return;}}gigya.browser.isMobile=false;})();gigya.browser.isWin=(navigator.appVersion&&navigator.appVersion.toLowerCase().indexOf("win")!=-1);gigya.browser.isIE=(navigator.appVersion&&navigator.appVersion.indexOf("MSIE")!=-1);gigya.browser.isIE6=(navigator.appVersion&&navigator.appVersion.indexOf("MSIE 6.")!=-1);gigya.browser.isIE7=navigator.appVersion&&(navigator.appVersion.indexOf("MSIE 7.")!=-1);gigya.browser.isIE8=(navigator.appVersion&&navigator.appVersion.indexOf("MSIE 8.")!=-1);gigya.browser.isIE9=(navigator.appVersion&&navigator.appVersion.indexOf("MSIE 9.")!=-1);gigya.browser.isChrome=(gigya.browser.lcUA.indexOf("chrome")!=-1);gigya.browser.isFF=(gigya.browser.lcUA.indexOf("firefox")!=-1);gigya.browser.isOpera=(gigya.browser.lcUA.indexOf("opera")!=-1);gigya.browser.isSafari=(navigator.appVersion&&navigator.appVersion.toLowerCase().indexOf("safari")!=-1&&navigator.appVersion.toLowerCase().indexOf("chrome")==-1);gigya.browser.isMAC=(navigator.appVersion&&navigator.appVersion.toLowerCase().indexOf("mac")!=-1)?true:false,gigya.browser.supportsPostMessage=(typeof(window.postMessage=="function"))&&!(gigya.browser.isIE);gigya.browser.supportsLocalStorage=("localStorage" in window)&&window["localStorage"]!==null;if(typeof gigya._vars=="undefined"){gigya._vars=new Object();}gigya._vars.scripts=document.getElementsByTagName("SCRIPT");for(var iScript=gigya._vars.scripts.length-1;iScript>=0;iScript--){if(gigya._vars.scripts[iScript].src!=""){if(((gigya._vars.scripts[iScript].src.toLowerCase().indexOf("//cdn.gigya.com")>-1)||(gigya._vars.scripts[iScript].src.toLowerCase().indexOf("//cdns.gigya.com")>-1)||(gigya._vars.scripts[iScript].src.toLowerCase().indexOf("?apikey=")>-1))&&((gigya._vars.scripts[iScript].src.toLowerCase().indexOf("gigya.js")>-1)||(gigya._vars.scripts[iScript].src.toLowerCase().indexOf("socialize.js")>-1)||(gigya._vars.scripts[iScript].src.toLowerCase().indexOf("gsjssdk.js")>-1))){gigya._vars.lastScript=gigya._vars.scripts[iScript];break;}}}if(gigya._vars.lastScript){gigya._vars.lastScriptURL=gigya._vars.lastScript.src;gigya._vars.lastScriptProtocol=(gigya._vars.lastScriptURL.toLowerCase().indexOf("https")==0)?"https":"http";gigya._vars.lastScriptURLPathPaths=gigya._vars.lastScriptURL.split("/");gigya._vars.lastScriptURLBase=gigya._vars.lastScriptURLPathPaths[0]+"//"+gigya._vars.lastScriptURLPathPaths[2];gigya._vars.apiKeyFromURL=gigya.getParamValueFromURL("APIKey",gigya._vars.lastScriptURL,null);}else{gigya._vars.lastScriptURL=(document.location.protocol=="https:"?"https://cdns.gigya.com":"http://cdn.gigya.com")+"/js/gsjssdk.js";gigya._vars.lastScriptProtocol=(gigya._vars.lastScriptURL.toLowerCase().indexOf("https")==0)?"https":"http";gigya._vars.lastScriptURLPathPaths=gigya._vars.lastScriptURL.split("/");gigya._vars.lastScriptURLBase=gigya._vars.lastScriptURLPathPaths[0]+"//"+gigya._vars.lastScriptURLPathPaths[2];}if(gigya._vars.apiKeyFromURL==""){gigya._vars.apiKeyFromURL=null;}gigya._vars.tokenCookieName="gt_"+((gigya._vars.apiKeyFromURL!=null)?gigya._vars.apiKeyFromURL:"");gigya._vars.flashListenerID="flid"+(new Date().getTime());gigya.global.cloneObject=function(obj,deepCopy,ignoreFunctions,maxLevel,level,ignoreContext){if(!level){level=0;}if(typeof obj=="undefined"||obj==null){return null;}else{if(typeof obj=="function"&&ignoreFunctions){return null;}else{if(obj.constructor==Array){var ar=[];for(var i=0;i<obj.length;i++){if(deepCopy){ar[i]=gigya.global.cloneObject(obj[i],deepCopy,ignoreFunctions,maxLevel,level+1);}else{ar[i]=obj[i];}}return ar;}else{if(typeof obj=="object"){var o={};for(var p in obj){if(deepCopy&&(!ignoreContext||p!="context")){o[p]=gigya.global.cloneObject(obj[p],deepCopy,ignoreFunctions,maxLevel,level+1);}else{o[p]=obj[p];}}return o;}else{return obj;}}}}};gigya.global.JSONDeserialize=function(str){if(str===""){str='""';}eval("var p="+str+";");return p;};gigya.global._ClearContainer=function(id){try{var c=document.getElementById(id);if(c!=null){c.innerHTML="";}}catch(e){}};gigya.global.valueIsExplicitTrue=function(boolval){var lc=(""+boolval).toLowerCase();return(lc=="true"||lc=="1");};gigya.global.valueIsExplicitFalse=function(boolval){var lc=(""+boolval).toLowerCase();return(lc=="false"||lc=="0");};gigya.global.ParamsFailValidation=function(c,p,paramConstraints){var m={};var paramName;if(c!=null){for(paramName in c){m[paramName]=c[paramName];}}if(p!=null){for(paramName in p){m[paramName]=p[paramName];}}var constraints;for(paramName in paramConstraints){constraints=paramConstraints[paramName];if(constraints!=null){for(var constraintType in constraints){var res;switch(constraintType){case"req":if(typeof m[paramName]=="undefined"||m[paramName]==null){res={errorCode:400002,status:400002,errorMessage:"Missing_required_parameter ("+paramName+")",statusMessage:"Missing_required_parameter ("+paramName+")"};}break;case"nonEmpty":if(m[paramName]==""){res={errorCode:400006,status:400006,errorMessage:"Invalid_parameter_value ("+paramName+")",statusMessage:"Invalid_parameter_value ("+paramName+")"};break;}}if(res){res.context=m.context;if(typeof m.onError=="function"){res.eventName="error";m.onError(res);}else{if(typeof m.callback=="function"){m.callback(res);}}return true;}}}}return false;};gigya.global._OpenWindow=function(url,windowName,windowOptions,inTimeOut){if(typeof windowOptions=="undefined"){windowOptions="menubar=0,toolbar=0,resizable=1,width=960,height=680";}var wo=windowOptions;try{var w=windowOptions.split("width=")[1].split(",")[0];var h=windowOptions.split("height=")[1].split(",")[0];var wleft=(screen.width-w)/2;var wtop=(screen.height-h)/2;if(wleft<0){w=screen.width;wleft=0;}if(wtop<0){h=screen.height;wtop=0;}wo+=",top="+wtop+",left="+wleft;}catch(e){}var newWin=window.open(url,windowName,wo);if(newWin&&newWin.focus){newWin.focus();}if(gigya.global._OpenedWindows==null){gigya.global._OpenedWindows={};}gigya.global._OpenedWindows[windowName]=newWin;return(gigya.global._OpenedWindows[windowName]!=null);};gigya.global._CloseWindow=function(windowName){if(gigya.global._OpenedWindows[windowName]!=null){try{window.setTimeout(10,function(){if(gigya.global._OpenedWindows[windowName]!=null){gigya.global._OpenedWindows[windowName].close();}});delete gigya.global._OpenedWindows[windowName];}catch(e){}}};gigya.global.URLEncode=function(value){return encodeURIComponent(value);};gigya.global.URLDecode=function(str){if(str==null){return"";}var udChars=new Array();var ch;for(var iChar=0;iChar<str.length;iChar++){ch=str.charAt(iChar);if(ch=="%"){if(str.charAt(iChar+1).toLowerCase()=="u"){udChars.push(String.fromCharCode(parseInt("0x"+str.substring(iChar+2,iChar+6))));iChar+=5;}else{udChars.push(String.fromCharCode(parseInt("0x"+str.substring(iChar+1,iChar+3))));iChar+=2;}}else{if(ch=="+"){udChars.push(" ");}else{udChars.push(ch);}}}return udChars.join("");};gigya.global.JSONSerialize=function(obj,includeFunctions){var t=typeof(obj);if(t=="function"){return t.toString();}if(t!="object"||obj===null){if(t=="string"){obj='"'+obj.replace(/\"/g,'\\"')+'"';}return String(obj);}else{var n,v,json=[],arr=(obj&&obj.constructor==Array);if(arr){for(var i=0;i<obj.length;i++){v=obj[i];t=typeof(v);if(v==null||t=="undefined"){v="";}else{if(t=="string"){v='"'+v.replace(/\"/g,'\\"')+'"';}else{if(!includeFunctions&&t=="function"){v="";}else{if(v.constructor==Date){v="";}else{if(t=="object"&&v!==null){v=gigya.global.JSONSerialize(v);}}}}}if(String(v)!=""){json.push(String(v));}}}else{for(n in obj){v=obj[n];t=typeof(v);if(v==null||t=="undefined"){v="";}else{if(t=="string"){v='"'+v.replace(/\"/g,'\\"')+'"';}else{if(!includeFunctions&&t=="function"){v="";}else{if(v.constructor==Date){v="";}else{if(t=="object"&&v!==null){v=gigya.global.JSONSerialize(v);}}}}}if(String(v)!=""){json.push('"'+n.replace(/\"/g,'\\"')+'":'+String(v));}}}return(arr?"[":"{")+String(json)+(arr?"]":"}");}};gigya.global.serializeToKeyValuePairs=function(o){var a=[];for(var p in o){switch(typeof o[p]){case"function":break;case"array":case"object":if(o[p]!=null){a.push(p+"="+gigya.global.URLEncode(gigya.global.JSONSerialize(o[p])));}break;case"undefined":break;default:a.push(p+"="+gigya.global.URLEncode(o[p]));}}var s=a.join("&");return s;};gigya.global.deserializeFromKeyValuePairs=function(urlEncodedString){var o={};var pairs=urlEncodedString.split("&");for(var iPair=0;iPair<pairs.length;iPair++){var pair=pairs[iPair];var eqPos=pair.indexOf("=");o[pair.substr(0,eqPos)]=gigya.global.URLDecode(pair.substr(eqPos+1));}return o;};if(gigya.global._MessageListeners==null){gigya.global._MessageListeners={};}gigya.global.onLoginEventFromFlashListener=function(serializedEvent){var oEvent=gigya.global.deserializeFromKeyValuePairs(serializedEvent);var eventKey=oEvent.id;var handler=gigya.global._MessageListeners[eventKey];if(handler!=null){if(typeof handler.callback=="function"){var context=handler.context;handler.callback(oEvent,context);}gigya.global.removeMessageListener(eventKey);}};gigya.global.addMessageListener=function(messageName,context,callback){gigya.global._MessageListeners[messageName]={callback:callback,context:context,t:(new Date()).getTime()};if(!(gigya.browser.isMobile)&&!(gigya.browser.supportsPostMessage)&&!gigya.addedFlashListener){gigya.addedFlashListener=true;gigya.global.runWithDoc(function(){var div=document.createElement("div");div.style.width="1px";div.style.height="1px";div.style.overflow="hidden";div.style.position="absolute";div.style.left="-1000px";gigya.global.bodyAppendChild(div);var legacyCrossSiteMethod="localStorage";var id=gigya._vars.flashListenerID;if(context&&context.c&&context.c.legacyCrossSiteMethod&&context.c.legacyCrossSiteMethod.toLowerCase()!="localStorage"){id=context.c.legacyCrossSiteMethod+":"+gigya._vars.flashListenerID;}div.innerHTML=['<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" name="eventsBroadcaster"','codebase="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"','width="1" height="1" id="eventsBroadcaster">','<param name="FlashVars" value="action=listen&id='+id+'&eventName=loginComplete&callback=gigya.global.onLoginEventFromFlashListener" />','<param name="allowScriptAccess" value="always" />','<param name="movie" value="https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf" />',"</object>"].join("");});}};gigya.global.removeMessageListener=function(messageName){delete gigya.global._MessageListeners[messageName];};gigya.global.handlePossibleMessage=function(cookieString){var keyVal=cookieString.split("=");var handler=gigya.global._MessageListeners[keyVal[0]];if(handler!=null){if(typeof handler.callback=="function"){var encodedEventObj=unescape(keyVal[1]);var eventObj=gigya.global.deserializeFromKeyValuePairs(encodedEventObj);var context=handler.context;handler.callback(eventObj,context);}return keyVal[0];}return"";};gigya.global.__onMessage=function(evt){if(evt!=null&&evt.data!=null){var keyToDelete=gigya.global.handlePossibleMessage(evt.data);if(keyToDelete!=""){gigya.global.removeMessageListener(keyToDelete);}}};gigya.global._onMessage=function(evt){if(evt!=null){setTimeout(gigya.global.__onMessage,100,evt);}};if(window.addEventListener){window.addEventListener("message",gigya.global._onMessage,false);}else{if(window.attachEvent){window.attachEvent("onmessage",gigya.global._onMessage);}}gigya.global.runWithDoc=function(func){if((!document.readyState&&document.body)||document.readyState=="interactive"||document.readyState=="loaded"||document.readyState=="complete"){func();}else{if(window.attachEvent){window.attachEvent("onload",func);}else{if(window.addEventListener){window.addEventListener("load",func,false);}}}};gigya.global.loadScript=function(src,scriptElementStore,fnOnError,rid){var scriptLoader=function(){var script=document.createElement("SCRIPT");script.type="text/javascript";script.charset="UTF-8";if(fnOnError&&rid){script.onerror=fnOnError;script.onreadystatechange=function(){var req=gigya.global.JPReqests[rid];if(req&&!req.loaded&&script.readyState=="loaded"){fnOnError();}};}var head=document.getElementsByTagName("head");if(head&&head.length>0){head[0].appendChild(script);}setTimeout(function(){script.src=src;},1);};if(gigya.browser.isIE){gigya.global.runWithDoc(scriptLoader);}else{scriptLoader();}};if(gigya.services.socialize==null){gigya.services.socialize={};}gigya.services.socialize._GlobalEventHandlers={onLogin:{idx:0},onConnect:{idx:0},onDisconnect:{idx:0},onConnectionAdded:{idx:0},onConnectionRemoved:{idx:0},onLogout:{idx:0},onFBCLoaded:{idx:0},onFBCRefreshed:{idx:0},onHideUIRequested:{idx:0}};gigya.services.socialize.addEventHandlers=function(c,p){var resp={status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:p["context"]};var eventHandlerName="";for(var knowEvtHandlerName in this._GlobalEventHandlers){if(typeof p[knowEvtHandlerName]=="function"){eventHandlerName=knowEvtHandlerName;var eventHandlers=this._GlobalEventHandlers[eventHandlerName];var currHandlerIndex;if(null!=p["ContainerAndSWF"]){currHandlerIndex=p["ContainerAndSWF"];}else{currHandlerIndex=(eventHandlers.idx++);}var listenerType=gigya.services.socialize._ExtractParam([c,p],"listenerType");if(listenerType!="component"&&eventHandlerName=="onLogin"){gigya.global.addedOnLoginEvent=true;}eventHandlers["HC"+currHandlerIndex]={context:p["context"],handler:p[eventHandlerName],listenerType:(typeof listenerType=="undefined")?"other":listenerType,listenerDescription:(typeof p["listenerDescription"]=="undefined")?"":p["listenerDescription"],ContainerAndSWF:p["ContainerAndSWF"]};}else{if(p[knowEvtHandlerName]!=null){alert("gigya.services.socialize.addEventHandlers:\nThe event handler '"+knowEvtHandlerName+"' is not a function");gigya.services.socialize.setErrorToMissingOrInvalid(resp,knowEvtHandlerName,p[knowEvtHandlerName]);}}}if(typeof p["callback"]=="function"){p["callback"](resp);}};gigya.services.socialize._dispatchGlobalEvent=function(eventObj,ignoreRID){if(gigya.services.socialize._HandleObjectRepresentation){gigya.services.socialize._HandleObjectRepresentation(eventObj);}var events=eventObj["eventName"].split(",");for(var i=0;i<events.length;i++){var eventName=events[i];var eventHandlerName="on"+eventName.substring(0,1).toUpperCase()+eventName.substring(1);var eventHandlers=gigya.services.socialize._GlobalEventHandlers[eventHandlerName];var eventHandlerKeysSnaphhot={};for(var hcKey in eventHandlers){eventHandlerKeysSnaphhot[hcKey]=true;}var eventObjCopy;var needToInvoke;var ListenerTypes=["component","other"];for(var iListenerType=0;iListenerType<ListenerTypes.length;iListenerType++){var listenerType=ListenerTypes[iListenerType];for(hcKey in eventHandlerKeysSnaphhot){if(hcKey.substring(0,2)!="HC"){continue;}if(eventHandlers[hcKey].listenerType==listenerType){eventObjCopy=new Object();for(var prop in eventObj){eventObjCopy[prop]=eventObj[prop];}if(eventObjCopy["context"]==null&&eventHandlers[hcKey]["context"]!=null){eventObjCopy["context"]=eventHandlers[hcKey]["context"];}eventObjCopy.eventName=eventName;if(listenerType!="component"){gigya.services.socialize._HandleSpecialFields(eventObjCopy);}needToInvoke=true;if(ignoreRID!=null){var oRID=gigya.services.socialize._parseRID(ignoreRID);var container=oRID.container;var req=oRID.req;if(null!=req){var swfName=req.servicedBy;var ContainerIDAndSWFName=container.id+"_"+swfName;var cas=eventHandlers[hcKey]["ContainerAndSWF"];if(typeof cas!="undefined"){if(ContainerIDAndSWFName==cas){needToInvoke=false;}}}}if(needToInvoke){if(gigya.services.socialize.plugins&&gigya.services.socialize.plugins.debug&&gigya.services.socialize.plugins.debug.conf&&gigya.services.socialize.plugins.debug.conf.dbg>0){var debug=gigya.services.socialize.plugins.debug;if((debug.conf.dbg>1)||((debug.conf.dbg>0)&&(listenerType=="other"))){gigya.services.socialize._callPartnerHandlerForGlobalEvent(eventHandlers[hcKey]["handler"],eventObjCopy);}}else{try{eventHandlers[hcKey]["handler"](eventObjCopy);}catch(ex){}}}}}}}},gigya.services.socialize._callPartnerHandlerForGlobalEvent=function(handler,eventObj){handler(eventObj);};gigya.services.socialize._fireComponentEvent=function(rid,eventObj){gigya.services.socialize._AdjustResponseStatus(eventObj);if("error"==eventObj["eventName"]&&"INVALID_KEY"==eventObj["status"]){var errTxt="The Gigya Socialize key set on this page does not match this domain.\nPlease make sure to set up this domain and get the proper key in the URL bellow:\n  http://www.gigya.com/site/partners/wfsocapi.aspx#&&userstate=SiteSetup";}if(gigya.services.socialize._HandleObjectRepresentation){gigya.services.socialize._HandleObjectRepresentation(eventObj);}var oRID=gigya.services.socialize._parseRID(rid);var req=oRID.req;if(null==req){return;}gigya.services.socialize._HandleSpecialFields(eventObj);var events=eventObj["eventName"].split(",");for(var i=0;i<events.length;i++){var eventName=events[i];var eventHandlerName="on"+eventName.substring(0,1).toUpperCase()+eventName.substring(1);if(typeof req.p[eventHandlerName]=="function"){eventObj.context=req.context;eventObj.eventName=eventName;try{req.p[eventHandlerName](eventObj);}catch(ex){}}}},gigya.services.socialize._getInfoForEvent=function(rid,evt){var oRID=gigya.services.socialize._parseRID(rid);var conf=oRID.req.c;gigya.services.socialize.getUserInfo(conf,{callback:gigya.services.socialize._afterGetInfoForEvent,context:{evt:evt}});};gigya.services.socialize._afterGetInfoForEvent=function(e){var evt=e.context.evt;evt.user=e.user;evt.isEvent=true;gigya.services.socialize._dispatchGlobalEvent(evt);};gigya.services.socialize._SetContainerSizeAndPosition=function(container,w,h,blnCenter){if(container==null||container.style==null){return;}if((container.style.width!=""+w+"px")||(container.style.height!=""+h+"px")){if(w!=undefined&&!isNaN(w)){container.style.width=""+w+"px";}if(h!=undefined&&!isNaN(h)){container.style.height=""+h+"px";}}if(blnCenter&&w&&h){if(container.style.zIndex==null||blnCenter){container.style.zIndex=gigya.global._NextZIndex++;}var vph;var vpw;if(window.innerHeight){vph=window.innerHeight;vpw=window.innerWidth;}if(typeof vph=="undefined"){var de=document.documentElement;vph=de.clientHeight;vpw=de.clientWidth;}if(((typeof vph=="undefined")||(vph==0))&&(document.body)&&document.body.clientHeight){vph=document.body.clientHeight;vpw=document.body.clientWidth;}var children=container.children;if(null==children){children=container.childNodes;}if(null!=children&&w!=0){var child1=children[0];if(null!=child1){if(w!=child1.width||h!=child1.height){child1.height=""+h;child1.width=""+w;}}}var scrl=gigya.services.socialize._getScrollXY();var vpt=scrl[1];var vpl=scrl[0];container.style.top=""+(Math.max(0,vpt+Math.floor((vph-h)/2)))+"px";container.style.left=""+(Math.max(0,vpl+Math.floor((vpw-w)/2)))+"px";container.style.visibility="";}};gigya.services.socialize._PopupContainers={};gigya.services.socialize.pseudoContainers={};gigya.services.socialize.CenteredComponentDivID="WFComponentDiv_"+(new Date()).getTime().toString();gigya.services.socialize.GetCenteredComponentDivID=function(popupName){return this.CenteredComponentDivID+"_"+popupName;};gigya.services.socialize.loadFB2=function(noAppID){gigya.fbcInitializedTime=-1;window.fbAsyncInit=function(){var oInit={appId:gigya.fbAppID,status:false,cookie:true,xfbml:true};FB.init(oInit);if(noAppID!=true){oInit.appId=gigya.fbAppID;}else{gigya.fbcInitializedTime=(new Date()).getTime();gigya.fb={isLoggedIn:false,isConnected:false};gigya.services.socialize._dispatchGlobalEvent({isEvent:true,eventName:"FBCLoaded",isLoggedIn:gigya.fb.isLoggedIn,isConnected:gigya.fb.isConnected});}FB.getLoginStatus(function(response){gigya.fbcInitializedTime=(new Date()).getTime();gigya.fb={isLoggedIn:(response.status!="unknown"),isConnected:(response.status=="connected")};gigya.services.socialize._dispatchGlobalEvent({isEvent:true,eventName:"FBCLoaded",isLoggedIn:gigya.fb.isLoggedIn,isConnected:gigya.fb.isConnected});gigya.services.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){gigya.refreshFbcSession();},onConnect:function(){gigya.refreshFbcSession();},onLogout:function(){gigya.refreshFbcSession();}});},true);};var divFbRoot=document.createElement("div");divFbRoot.id="fb-root";gigya.global.bodyAppendChild(divFbRoot);var e=document.createElement("script");e.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";e.async=true;divFbRoot.appendChild(e);};gigya.services.socialize._parseRID=function(rid){var ridp=rid.split("@");var swf=document.getElementById(ridp[2]+"_"+ridp[1]);var containerID=ridp[2];var container;if(null==(container=gigya.services.socialize.pseudoContainers[containerID])){container=document.getElementById(ridp[2]);}var Reqs=null;if(container!=null){Reqs=container.Reqs;}var req=null;if(Reqs!=null){req=Reqs[parseInt(ridp[0])];}return{rid:rid,container:container,Reqs:Reqs,req:req,swf:swf};},gigya.services.socialize._getScrollXY=function(){var scrOfX=0,scrOfY=0;if(typeof(window.pageYOffset)=="number"){scrOfY=window.pageYOffset;scrOfX=window.pageXOffset;}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){scrOfY=document.body.scrollTop;scrOfX=document.body.scrollLeft;}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){scrOfY=document.documentElement.scrollTop;scrOfX=document.documentElement.scrollLeft;}}}return[scrOfX,scrOfY];};gigya.services.socialize._getPseudoContainer=function(id){if(gigya.services.socialize.pseudoContainers==null){gigya.services.socialize.pseudoContainers={};}if(id=="coreDiv"||id.toLowerCase().indexOf("pseudoContainer_")==0){if(gigya.services.socialize.pseudoContainers[id]==null){gigya.services.socialize.pseudoContainers[id]={};}return gigya.services.socialize.pseudoContainers[id];}return null;};gigya.services.socialize.setErrorToMissingOrInvalid=function(obj,paramName,paramValue){if(obj==null){obj={};}obj.status="FAIL";if(typeof paramValue=="undefined"||paramValue==""){obj.errorCode=400002;obj.statusMessage=obj.errorMessage="Missing_required_parameter ("+paramName+")";}else{obj.errorCode=400006;obj.statusMessage=obj.errorMessage="Invalid_parameter_value ("+paramName+")";}return obj;};gigya.services.socialize._noSuchDivID=function(containerID,p,methodName){var onErrorFn=p["onError"];if(typeof onErrorFn=="function"){var evt={eventName:"Error",context:p["context"]};gigya.services.socialize.setErrorToMissingOrInvalid(evt,"containerID",containerID);onErrorFn(evt);}else{var callback=p["callback"];if(typeof callback!="undefined"){var resp={eventName:"Error",context:p["context"]};gigya.services.socialize.setErrorToMissingOrInvalid(resp,"containerID",containerID);callback(resp);}}};gigya.services.socialize._RetryPending=function(){var pr=gigya.services.socialize.pendingRequests;if(!document.body){window.setTimeout("gigya.services.socialize._RetryPending()",200);}else{for(var i=0;i<pr.length;i++){var r=pr[i];gigya.services.socialize._AddJSRequest(r[0],r[1],r[2],r[3],r[4],r[5]);}}};gigya.services.socialize._handlePendingJSCalls=function(serviceName){var reqs=gigya.services.socialize.pendingJSRequests[serviceName];if(reqs){for(var i=0;i<reqs.length;i++){var req=reqs[i];gigya.global.raiseLoadEventForWidget(req.methodName,req.c,req.p);eval(req.methodName+"(req.c,req.p,req.i)");}}};gigya.global.raiseLoadEventForWidget=function(methodName,c,p){if(!p.reportedLoad&&p.containerID&&p.containerID.indexOf("pseudocontainer_")==-1){c.reportedLoad=true;p.reportedLoad=true;var event="load";if(methodName=="gigya.services.socialize.plugins.reactions.showReactionsBarUI"){return;}if(methodName=="gigya.services.socialize.plugins.simpleshare.showSimpleShareUI"){event="loadSimple";}gigya.global.generateEvent(event,p.APIKey,p.cid,p.source,p.sourceData);}};gigya.services.socialize._preloadJS=function(servicedBy){pr=gigya.services.socialize.pendingJSRequests;var loadScript=false;if(typeof pr=="undefined"){pr=gigya.services.socialize.pendingJSRequests=[];}if(typeof pr[servicedBy]=="undefined"){pr[servicedBy]=[];loadScript=true;}if(loadScript){gigya.global.loadScript(gigya._vars.lastScriptURLBase+"/js/"+servicedBy+((gigya._getDebugStatus()==1)?"":".min")+".js");}};gigya.services.socialize._AddJSRequest=function(servicedBy,methodName,containerID,conf,params,i){if(!params){params={};}if(!conf){conf={};}if(!i){i={};}var pr;if(!document.body){var needTimeout=false;pr=gigya.services.socialize.pendingRequests;if(typeof pr=="undefined"){pr=gigya.services.socialize.pendingRequests=[];needTimeout=true;}pr.push([servicedBy,methodName,containerID,conf,params,i]);window.setTimeout("gigya.services.socialize._RetryPending()",200);return;}var blnCenter=false;var p={};var c={};for(var param in params){p[param]=params[param];}for(param in conf){c[param]=conf[param];}var GS=gigya.services.socialize;var isPopup=(params["isPopup"]==true);var container;if(containerID.toLowerCase().indexOf("pseudocontainer_")==0){if(gigya.services.socialize.pseudoContainers[containerID]==null){gigya.services.socialize.pseudoContainers[containerID]={};}container=gigya.services.socialize.pseudoContainers[containerID];}else{if(typeof containerID=="undefined"||containerID==""){blnCenter=true;containerID=GS.GetCenteredComponentDivID(methodName);isPopup=true;container=document.getElementById(containerID);if(container==null){container=GS._CreateContainer(containerID);}}else{container=document.getElementById(containerID);}}if(!container){gigya.services.socialize._noSuchDivID(containerID,p,methodName);return;}p["containerID"]=containerID;if(container.style){container.style.display="";container.style.visibility="";container.innerHTML="";var ifrel=document.getElementById("gigya_ifr_"+containerID);if(ifrel){ifrel.style.display="";ifrel.style.visibility="";}var fncFixPosition=function(){if(ifrel!=null){var frameOffset=(i.frameOffset!=null?i.frameOffset:0);GS._SetContainerSizeAndPosition(ifrel,p.width-frameOffset,p.height-frameOffset,blnCenter);ifrel.style.visibility="visible";}GS._SetContainerSizeAndPosition(container,p.width,p.height,blnCenter);};if(!i["isEvent"]){fncFixPosition();}}var Reqs=(container.Reqs?container.Reqs:(container.Reqs=[]));var rid=Reqs.length+"@"+servicedBy+"@"+containerID;i.rid=rid;i.isPopup=isPopup;var operation=methodName;if(i._operation){operation=i._operation;}var req=Reqs[Reqs.length]={rid:rid,servicedBy:servicedBy,container:container,method:methodName,context:p["context"],c:c,p:p,i:i,operation:operation,isHTML:true};var methodNameParts=methodName.split(".");var node=eval(methodNameParts[0]);var pfxi=1;while(null!=(node=node[methodNameParts[pfxi]])&&(++pfxi<methodNameParts.length)){}var func=node;if(typeof func!="undefined"){gigya.global.raiseLoadEventForWidget(methodName,c,p);eval(methodName+"(c,p,i)");}else{pr=GS.pendingJSRequests;var loadScript=false;if(typeof pr=="undefined"){pr=GS.pendingJSRequests=[];}if(typeof pr[servicedBy]=="undefined"){pr[servicedBy]=[];loadScript=true;}pr=pr[servicedBy];pr.push({serviceName:servicedBy,methodName:methodName,c:c,p:p,i:i});if(loadScript){gigya.global.loadScript(gigya._vars.lastScriptURLBase+"/js/"+servicedBy+((gigya._getDebugStatus()==1)?"":".min")+".js");}}return containerID;};gigya.services.socialize._AdjustResponseStatus=function(response){switch((""+response.status).toUpperCase()){case"FAIL":response.status="ERROR";break;case"NEW_USER":case"NO_AUTH_SITE":response.status="NOT_LOGGED_IN";break;case"INVALID_URL":case"INVALID_SITE":response.status="INVALID_KEY";break;case"NO_AUTH_LEVEL":response.status="UNAUTHORIZED";break;}};gigya.services.socialize._addDefaultResponseProperties=function(response,target){var r=response;if(r.response){r=r.response;}if(target==null){target={};}var status="FAIL";var statusMessage="General Server Error";var errorCode=500001;var errorMessage="General Server Error";if(r!=null){if(r.status!=null){status=r.status;}if(r.statusMessage!=null){statusMessage=r.statusMessage;}if(r.errorCode!=null){errorCode=r.errorCode;}if(r.errorMessage!=null){errorMessage=r.errorMessage;}}target.status=status;target.statusMessage=statusMessage;target.errorCode=errorCode;target.errorMessage=errorMessage;return target;};gigya.services.socialize._broadcastError=function(rid,response,additionalProperties){var evt={eventName:"error"};gigya.services.socialize._addDefaultResponseProperties(response,evt);if(additionalProperties!=null){for(var p in additionalProperties){evt[p]=additionalProperties[p];}}gigya.services.socialize._broadcastEvent(rid,evt);};gigya.services.socialize._broadcastEvent=function(rid,eventObj,global,sendToSelf){if(global){if(sendToSelf){this._dispatchGlobalEvent(eventObj);}else{this._dispatchGlobalEvent(eventObj,rid);}}else{this._fireComponentEvent(rid,eventObj);}};if(typeof gigya.global.RESTBackendAPI=="undefined"){gigya.global.RESTBackendAPI=function(apiMethod){var domain="";var path="";if(apiMethod.indexOf(".")==-1){domain="socialize.gigya.com";path="/socialize."+apiMethod;}else{if(apiMethod.substr(0,1)=="/"){apiMethod=apiMethod.substr(1);}var tokens=apiMethod.split(".");domain=tokens[0]+".gigya.com";path="/"+apiMethod;}var url="https://"+domain+path;var secureURL=url;var baseURL=secureURL;this.isHTTPS=document.location.protocol=="https:";this.baseURL=baseURL;this.secureURL=secureURL;this.defaultUrl=(this.isHTTPS)?secureURL:baseURL;};}if(typeof gigya.global.JPCMD=="undefined"){gigya.global.JPReqests={};gigya.global.JPCMD=function(backendAPI){this.backendAPI=backendAPI;this.forceHTTPS=false;this.params={};this.ifrName="gigyaPostIframe_"+(new Date()).getTime();this.context=null;this.callback=null;};var JPCMDProto=gigya.global.JPCMD.prototype;JPCMDProto.addParam=function(){for(var i=0;i<arguments.length;i+=2){if((arguments[i]!=null)&&(arguments[i+1]!=null)){if((arguments[i+1]!=null)&&(typeof arguments[i+1]!="undefined")){this.params[arguments[i]]=arguments[i+1];}}}return this;};JPCMDProto.createParamString=function(){var ps=[];var p="";ps.push(gigya.global.serializeToKeyValuePairs(this.params));ps.push("&");var s=ps.join("");if(s.substr(s.length-1,1)=="&"){return s.substr(0,s.length-1);}return s;};JPCMDProto.createParamFormElements=function(){var ps=[];var p="";for(p in this.params){ps.push('<textarea name="');ps.push(p);ps.push('">');if(typeof this.params[p]=="object"){ps.push(gigya.global.URLEncode(gigya.global.JSONSerialize(this.params[p])));}else{ps.push(this.params[p]);}ps.push("</textarea>");}return ps.join("");};JPCMDProto.GetDataPendingTimeout=function(retry){if(retry<=4){return 500;}if(retry<=4+4){return 1000;}if(retry<=4+4+13){return 2000;}if(retry<=4+4+13+18){return 5000;}return -1;};JPCMDProto.hanldeJPResponse=function(res,rid){if(rid==null){if(res.hasOwnProperty("context")){rid=res.context;}else{if(res.hasOwnProperty("state")){rid=res.state;}else{return;}}}var req=gigya.global.JPReqests[rid];if(req==null){return;}if(req.retryTimerID!=null){window.clearTimeout(req.retryTimerID);}req.loaded=true;var script=gigya.global.JPReqests[rid].scriptElement;var frmDiv=gigya.global.JPReqests[rid].cmd.formDiv;if(script&&script.parentNode){script.parentNode.removeChild(script);}if(frmDiv&&frmDiv.parentNode){frmDiv.parentNode.removeChild(frmDiv);}if(res.errorCode==100001&&(!res.dontTryAgain)){if(req.cmd.retry==null){req.cmd.retry=0;}var t=this.GetDataPendingTimeout(req.cmd.retry++);if(t>0){window.setTimeout("gigya.global.JPReqests['"+rid+"'].cmd.run(); delete gigya.global.JPReqests['"+rid+"']",t);}else{gigya.global.JPReqests[rid].cmd.presetResponse={status:"FAIL",statusMessage:"Data_Pending",errorCode:100001,errorMessage:"Data_Pending",dontTryAgain:true};gigya.global.JPReqests[rid].cmd.run(rid);}return;}if(res.dontTryAgain){delete res.dontTryAgain;}if(res.errorCode==403030){var waitingForService=req.cmd.onSessionExpired(res);if(waitingForService){return;}}delete gigya.global.JPReqests[rid];if(typeof req.cmd.callback=="function"){req.cmd.callback(req.cmd.context,res);}else{if(typeof req.cmd.callback=="string"){try{eval(req.cmd.callback+"(req.cmd.context,res)");}catch(e){gigya.log(e);}}}};JPCMDProto.onSessionExpired=function(response){if(this.params.retryPossible==true){this.params.retryPossible=false;gigya.services.socialize._arRequestsWaitingForFBC.push({cmd:this,response:response});return true;}return false;};JPCMDProto.hanldeJPTimeout=function(res){};JPCMDProto.getFormHTML=function(rid){var a=[];a.push('<form accept-charset="UTF-8" id="');a.push("coreDiv_Form_");a.push(this.ifrName);a.push('" method="post" action="');if(this.params.methodURL){a.push(this.params.methodURL);}else{a.push(this.backendAPI.defaultUrl);}a.push('" target="');a.push(this.ifrName);a.push('">');a.push(this.createParamFormElements());a.push('<input type="submit" value="go" />');a.push("</form>");a.push("<iframe");if(gigya.browser.isIE6){a.push(' src="'+gigya._vars.lastScriptURLBase+'/wildfire/DO_NOT_DELETE.htm"');}a.push(" onload=\"if (this.phase2==null) {this.phase2='1'; window.setTimeout(function(){document.getElementById('coreDiv_Form_"+this.ifrName+"').submit();},10)} else if (gigya.global.JPReqests['"+rid+"']) { gigya.global.JPReqests['"+rid+"'].cmd.run('"+rid+'\',true);}" id="');a.push(this.ifrName);a.push('" name="');a.push(this.ifrName);a.push('">');a.push("</iframe>");return a.join("");};JPCMDProto.run=function(rid,fromServerCache){var t=(new Date()).getTime();var r=Math.random();if(rid==null){rid="R"+t+"_"+r;}var retryTimerID=null;if(this.retryTimoutSec!=null){}this.lastSentRequestID=rid;var cmd=this;gigya.global.JPReqests[rid]={rid:rid,cmd:cmd,retryTimerID:retryTimerID};this.addParam("callback","gigya.global.JPCMD.prototype.hanldeJPResponse");this.addParam("context",rid);if(this.params["oauth_token"]){this.addParam("authMode","token");}else{this.addParam("authMode",gigya.partnerSettings.authMode);}if(this.presetResponse!=null){eval(this.params.callback+"(this.presetResponse,rid)");}else{var baseUrl=this.backendAPI.defaultUrl;if(this.forceHTTPS){baseUrl=this.backendAPI.secureURL;}if(this.params.methodURL){baseUrl=this.params.methodURL;}var paramString=this.createParamString();var extraLength=0;var maxLength=8*1024;if(gigya.browser.isIE){extraLength=6*1024;}if(this.params.maxLength){extraLength=0;maxLength=this.params.maxLength;}if(fromServerCache==true){var getSavedResponseParams={};gigya.services.socialize._ExtractParams(cmd.params,getSavedResponseParams,["APIKey","authMode","oauth_token","saveResponseID","login_token","methodURL"]);gigya.services.socialize.sendRequest("getSavedResponse",getSavedResponseParams,cmd.params.context);}else{if((baseUrl.length+1+paramString.length+extraLength)<=maxLength){var url;if(fromServerCache==true){url=baseUrl+"?rid="+gigya.global.URLEncode(this.params.rid)+"&callback="+gigya.global.URLEncode(this.params.callback)+"&methodName=getResp&originalMethodName="+gigya.global.URLEncode(this.params.methodName);}else{url=baseUrl+"?"+paramString;}var callback=eval(this.params.callback);var sendReqRID=rid;if(cmd.params.saveResponseID){sendReqRID=cmd.params.saveResponseID;}var fnOnError=function(){callback({context:sendReqRID,errorCode:500026,errorMessage:"Network_error"});};gigya.global.loadScript(url,gigya.global.JPReqests[rid],fnOnError,sendReqRID);}else{var This=this;gigya.global.runWithDoc(function(){var formsContainer=document.getElementById("coreDiv_Forms");if(formsContainer==null){formsContainer=document.createElement("span");formsContainer.id="coreDiv_Forms";formsContainer.style.display="none";gigya.global.bodyAppendChild(formsContainer);}var formDiv=document.createElement("span");This.addParam("saveResponseID",rid);formDiv.innerHTML=This.getFormHTML(rid);formsContainer.appendChild(formDiv);gigya.global.JPReqests[rid].cmd.formDiv=formDiv;});}}}};}gigya.services.socialize._addUserInfoToEvent=function(response,targetObject,addLoginProperties,useBasePhotoURL){if(targetObject==null){targetObject={};}if(response.user!=null){targetObject.user={};for(var p in response.user){targetObject.user[p]=response.user[p];}if(response["isLoggedIn"]!=null){targetObject.user["isLoggedIn"]=response["isLoggedIn"];}if(response["isSiteUID"]!=null){targetObject.user["isSiteUID"]=response["isSiteUID"];}if(response["iRank"]!=null){targetObject.user["iRank"]=response["iRank"];}}if(addLoginProperties){gigya.services.socialize._ExtractParams(response,targetObject,["signature","UIDSig","timestamp","UIDSignature","signatureTimestamp"]);if(targetObject.user!=null){targetObject.UID=response.user.UID;}}return targetObject;};gigya.services.socialize._redirectTo=function(url,arParams){var urlParts=url.split("?");url=urlParts[0];var vars={};if(urlParts.length>1){var qsParams=urlParts[1].split("&");for(var u=0;u<qsParams.length;u++){var qsParam=qsParams[u].split("=");vars[decodeURIComponent(qsParam[0])]=decodeURIComponent(qsParam[1]);}}for(var i=0;i<arParams.length;i++){var params=arParams[i];var p;for(p in params){if((typeof params[p]=="boolean"||typeof params[p]=="string")&&p!="eventName"){vars[p]=params[p];}}}arParams=[];for(p in vars){arParams.push(p+"="+encodeURIComponent(vars[p]));}document.location.href=url+"?"+arParams.join("&");};gigya.services.socialize._CreateContainer=function(id){var el=document.createElement("div");el.style.position="absolute";if(el.style.zIndex!=null){el.style.zIndex=gigya.global._NextZIndex++;}el.id=id;gigya.global.bodyAppendChild(el);return el;};gigya.services.socialize.generateEventsFromResponse=function(res,context,originalResponse){var op=context.operation;var isAfterGetUserInfoFor=false;if(context.p&&context.p.hasOwnProperty("getUserInfoFor")){context.operation=op=context.p.getUserInfoFor;delete context.p.getUserInfoFor;isAfterGetUserInfoFor=true;}var oEvent;if(res.status=="OK"){switch(op){case"unlinkAccounts":case"deleteAccount":oEvent={eventName:"logout"};break;case"linkAccounts":case"setUID":this._addUserInfoToEvent(res,oEvent,true);break;case"removeConnection":case"disconnect":oEvent={eventName:"connectionRemoved,disconnect",provider:(context.p["provider"]?context.p["provider"]:"")};this._addUserInfoToEvent(res,oEvent);break;case"addConnection":case"connect":if(context.i.userWasLoggedOut&&gigya.global.valueIsExplicitTrue(res.user.isLoggedIn)){oEvent={eventName:"login",provider:context.p["provider"]};this._addUserInfoToEvent(res,oEvent,true);}else{oEvent={eventName:"connectionAdded,connect",provider:context.p["provider"]};this._addUserInfoToEvent(res,oEvent);}break;case"login":oEvent={eventName:"login",provider:context.p["provider"]};if(res.authCode){oEvent.authCode=res.authCode;}this._addUserInfoToEvent(res,oEvent,true);if(res.user&&context.p["provider"]){var exp="Wed, 01 Jan 2020 12:00:00 GMT";document.cookie="_gig_llp="+context.p["provider"].toLowerCase()+";expires="+exp+"; path=/";if(res.user.firstName){document.cookie="_gig_llu="+escape(res.user.firstName)+";expires="+exp+";  path=/";}else{document.cookie="_gig_llu=;expires="+exp+";  path=/";}}break;case"logout":oEvent={eventName:"logout"};break;case"notifyLogin":if(!context.c.authCode){oEvent={eventName:"login",provider:"site"};this._addUserInfoToEvent(res,oEvent,true);}break;}}if(op=="login"&&context.p.redirectURL!=null&&context.p.redirectURL!=""&&oEvent&&oEvent.user){this._redirectTo(context.p.redirectURL,[oEvent,oEvent.user]);}if(oEvent!=null){oEvent.context=context.context;gigya.services.socialize._broadcastEvent(context.rid,oEvent,true,false);}};gigya.services.socialize._APIParamSchema={common:["APIKey","cid","oauth_token","source","sourceData"],login:[["x_provider","provider"],["client_id","APIKey"],["redirect_uri",function(){return"/GS/AfterLogin.aspx";}],["x_cid","cid"],["x_pending_registration","newUsersPendingRegistration"],["x_pending_registration","pendingRegistration"],["x_lang","lang"],["x_extraPermissions","extraPermissions"],["x_extraPermissions","permissions"],["x_sessionExpiration","sessionExpiration"],"includeiRank","includeAllIdentities","extraFields","enabledProviders","disabledProviders","signIDs","source","sourceData"],addConnection:[["x_provider","provider"],["client_id","APIKey"],["redirect_uri",function(){return"/GS/AfterLogin.aspx";}],["x_cid","cid"],["x_pending_registration","newUsersPendingRegistration"],["x_pending_registration","pendingRegistration"],["x_lang","lang"],["x_extraPermissions","extraPermissions"],["x_extraPermissions","permissions"],["x_sessionExpiration","sessionExpiration"],"includeiRank","includeAllIdentities","extraFields","enabledProviders","disabledProviders","signIDs","source","sourceData"],requestPermissions:[["x_provider","provider"],["client_id","APIKey"],["redirect_uri",function(){return"/GS/AfterLogin.aspx";}],["x_cid","cid"],["x_pending_registration","newUsersPendingRegistration"],["x_pending_registration","pendingRegistration"],["x_lang","lang"],["x_extraPermissions","extraPermissions"],["x_extraPermissions","permissions"],"source","sourceData"],postBookmark:["provider","URL",["URL","url"],"title","description","cid","APIKey","shortURLs","source","sourceData"]};gigya.services.socialize._oAuth2ParamNamesTranslator=function(n){switch(n){case"APIKey":return"client_id";case"redirect_uri":case"response_type":case"state":case"oauth_token":case"authMode":case"format":case"sdk":case"getPerms":return n;}if(n.substr(0,2)=="x_"){return n;}return"x_"+n;};gigya.services.socialize._RemoveClientSideOnlyParams=function(o){delete o.UIConfig;delete o.x_UIConfig;delete o.containerID;delete o.x_containerID;return o;};gigya.services.socialize._MergeParams=function(src,dest,fnNameTranslator){if(fnNameTranslator==null){fnNameTranslator=function(n){return n;};}if(src==null){return;}if(dest==null){dest={};}if(src.constructor==Array){for(var iSrc=0;iSrc<src.length;iSrc++){gigya.services.socialize._MergeParams(src[iSrc],dest,fnNameTranslator);}}else{for(var p in src){if(src.hasOwnProperty(p)){if(src[p]!=null&&typeof src[p]!="undefined"&&src[p]!="undefined"){var translatedName=fnNameTranslator(p);if(translatedName!=null&&translatedName!=""){dest[fnNameTranslator(p)]=src[p];}}}}}return dest;};gigya.services.socialize._ExtractParams=function(src,dest,schema){if(src==null){return;}if(dest==null){dest={};}if(src.constructor==Array){for(var iSrc=0;iSrc<src.length;iSrc++){gigya.services.socialize._ExtractParams(src[iSrc],dest,schema);}}else{var t=(new Date().getTime());if(typeof schema=="string"){var regexp=new RegExp(schema);for(var param in src){if(regexp.test(param)){dest[param]=src[param];}}}else{for(var iRule=0;iRule<schema.length;iRule++){var rule=schema[iRule];switch(rule.constructor){case String:if(src[rule]!=null){dest[rule]=src[rule];}break;case Array:switch(typeof rule[1]){case"string":if(src[rule[1]]!=null){dest[rule[0]]=src[rule[1]];}break;case"function":dest[rule[0]]=rule[1](src);break;break;}break;}}}}return dest;};gigya.services.socialize._ExtractParam=function(src,paramName){var params;return gigya.services.socialize._ExtractParams(src,params,[paramName])[paramName];};gigya.global.getCookie=function(c_name,defValue){if(document.cookie.length>0){c_start=document.cookie.lastIndexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length;}return unescape(document.cookie.substring(c_start,c_end));}}return defValue;};gigya.global.setCookie=function(c_name,value,expireMs,domain,dontUseRootPath){var exdate=new Date();exdate.setTime(exdate.getTime()+expireMs);var cookieString=c_name+"="+escape(value)+(dontUseRootPath?"":"; path=/")+((expireMs==null)?"":"; expires="+exdate.toGMTString())+((domain&&domain!=""&&domain.indexOf(".")!=-1)?";domain="+domain:"");document.cookie=cookieString;};if(typeof gigya.global.localStorage=="undefined"){if(gigya.browser.supportsLocalStorage){gigya.global.localStorage={_getAllItems:function(){return window.localStorage;},setItem:function(key,val){window.localStorage[key]=val;},getItem:function(key){return window.localStorage[key];},removeItem:function(key){window.localStorage.removeItem(key);},implementation:"standard HTML5 window.localStorage"};}else{if(gigya.browser.isIE6||gigya.browser.isIE7){gigya.global.localStorage={_start:function(){if(!gigya.global.localStorage.el){gigya.global.localStorage.el=document.createElement("div");gigya.global.localStorage.el.addBehavior("#default#userData");gigya.global.bodyAppendChild(gigya.global.localStorage.el);}},_getAllItems:function(){this._load();var o={};var rootNodeAtts=this.el.XMLDocument.firstChild.attributes;for(var i=0;i<rootNodeAtts.length;i++){o[rootNodeAtts[i].name]=rootNodeAtts[i].value;}return o;},_save:function(iExpiryMin){try{this._start();this.el.save("gigya_ud");}catch(e){}},_load:function(){try{this._start();this.el.load("gigya_ud");}catch(e){}},setItem:function(key,val){this._load();this.el.setAttribute(key,val);this._save();},getItem:function(key){this._load();return this.el.getAttribute(key);},removeItem:function(key){this._load();this.el.removeAttribute(key);this._save();},implementation:"userData behavior (IE6/IE7)"};}else{if(gigya.browser.isFF){gigya.global.localStorage={setItem:function(key,val){globalStorage[location.hostname][key]=val;},getItem:function(key){return globalStorage[location.hostname][key];},removeItem:function(key){delete globalStorage[location.hostname][key];},implementation:"userData behavior (FF 3.0 upto but not includig 3.5)"};}else{gigya.global.localStorage={setItem:function(key,val){},getItem:function(key){},removeItem:function(key){},implementation:"not supported"};}}}}gigya.global.localStorage.setObject=function(key,oVal){gigya.global.localStorage.setItem(key,gigya.global.JSONSerialize(oVal));};gigya.global.localStorage.getObject=function(key){var oVal=gigya.global.localStorage.getItem(key);try{oVal=gigya.global.JSONDeserialize(oVal);}catch(ex){}return oVal;};if(gigya.services==null){gigya.services={};}if(gigya.services.socialize==null){gigya.services.socialize={};}gigya.services.socialize.migrateExistingToken=function(){var oldCookie=gigya.global.getCookie("_gig_lt");if(oldCookie&&gigya._vars.apiKeyFromURL&&!gigya.services.socialize.getLoginTokenCookie()){gigya.services.socialize.removeTokenCookie("_gig_lt");gigya.services.socialize.setLoginTokenCookie(oldCookie);}};gigya.services.socialize.getLoginTokenCookie=function(){if(gigya._vars.apiKeyFromURL){return gigya.global.getCookie("glt_"+gigya._vars.apiKeyFromURL);}else{return gigya.global.getCookie("_gig_lt");}};gigya.services.socialize.setLoginTokenCookie=function(login_token,expires_in){gigya.global.localStorage.removeItem("gigyaSettings");if(gigya._vars.apiKeyFromURL){gigya.services.socialize.setTokenCookie("glt_"+gigya._vars.apiKeyFromURL,login_token,expires_in);gigya.services.socialize.removeTokenCookie("gac_"+gigya._vars.apiKeyFromURL);}else{gigya.services.socialize.setTokenCookie("_gig_lt",login_token,expires_in);}};gigya.services.socialize.getAccessTokenCookie=function(c,p,def){if(p&&p.hasOwnProperty("oauth_token")&&p.oauth_token!=null&&p.oauth_token!="undefined"){return p.oauth_token;}if(c&&c.hasOwnProperty("oauth_token")&&c.oauth_token!=null&&c.oauth_token!="undefined"){return c.oauth_token;}};gigya.services.socialize.setAccessTokenCookie=function(access_token,expires_in){gigya.global.localStorage.removeItem("gigyaSettings");gigya.services.socialize.setTokenCookie(gigya._vars.tokenCookieName,access_token,expires_in);};gigya.services.socialize.setTokenCookie=function(name,value,expires_in){var pageDomain=document.domain;var baseDomain=gigya.partnerSettings.baseDomain;var cookieDomain=((baseDomain.length>0)&&(pageDomain.length>=baseDomain.length)&&(pageDomain.lastIndexOf(baseDomain)==pageDomain.length-baseDomain.length))?baseDomain:pageDomain;var expireMs;if(expires_in==null||expires_in==""){expireMs=1000*60*60*24*365*15;}else{if(expires_in==0){expireMs=null;}else{expireMs=expires_in*1000;}}gigya.global.setCookie(name,value,expireMs,cookieDomain);};gigya.services.socialize.removeAccessToken=function(){gigya.services.socialize.removeTokenCookie(gigya._vars.tokenCookieName);};gigya.services.socialize.removeLoginToken=function(){gigya.services.socialize.removeTokenCookie("glt_"+gigya._vars.apiKeyFromURL);gigya.services.socialize.removeTokenCookie("_gig_lt");};gigya.services.socialize.removeTokenCookie=function(name){var pageDomain=document.domain;var baseDomain=gigya.partnerSettings.baseDomain;var cookieDomain=gigya.partnerSettings.baseDomain;if((baseDomain.length>0)&&(pageDomain.length>=baseDomain.length)&&(pageDomain.lastIndexOf(baseDomain)==pageDomain.length-baseDomain.length)){gigya.global.setCookie(name,"x",-1,cookieDomain);gigya.global.setCookie(name,"x",-1,cookieDomain,true);}gigya.global.setCookie(name,"x",-1,document.domain);gigya.global.setCookie(name,"x",-1,document.domain,true);gigya.global.setCookie(name,"x",-1,"");gigya.global.setCookie(name,"x",-1,"",true);};gigya.services.socialize.saveTokenFromResult=function(res,reqParamSet){if(res.hasOwnProperty("access_token")){gigya.services.socialize.setAccessTokenCookie(res.access_token,res.expires_in);var pageDomain=document.domain;var baseDomain=gigya.partnerSettings.baseDomain;var cookieDomain=((baseDomain.length>0)&&(pageDomain.length>=baseDomain.length)&&(pageDomain.lastIndexOf(baseDomain)==pageDomain.length-baseDomain.length))?baseDomain:pageDomain;}if(res.hasOwnProperty("login_token")){gigya.services.socialize.setLoginTokenCookie(res.login_token,res.expires_in);}};gigya.services.socialize._continueWithGetUserInfo=function(context,originalAPI){var guiC={};if(context&&context.c){for(var p in context.c){guiC[p]=context.c[p];}}var guiP={};if(context&&context.p){for(p in context.p){guiP[p]=context.p[p];}}guiP.getUserInfoFor=originalAPI;guiP._operation=originalAPI;guiP.originalResponse=context.i.originalResponse;gigya.services.socialize.getUserInfo(guiC,guiP);};gigya.services.socialize.endPoint=function(operation,c,p,i,endPointCallback){if(!c){c={};}if(!p){p={};}if(!i){i={};}var callback=gigya.services.socialize._ExtractParam([c,p,i],"callback");var context=gigya.services.socialize._ExtractParam([c,p,i],"context");var authCodeOnly=gigya.global.valueIsExplicitTrue(gigya.services.socialize._ExtractParam([c,p,i],"authCodeOnly"));var id=operation+"_"+(new Date().getTime());var realOperation=operation;if(i._operation){realOperation=i._operation;}gigya.global.addMessageListener(id,{id:id,c:c,p:p,i:i,callback:callback,context:context,operation:realOperation,apiName:operation},endPointCallback);var endpoint="https://socialize.gigya.com/socialize."+operation+"?";var requestParams={};var loginToken=gigya.services.socialize.getLoginTokenCookie();var accessToken=gigya.services.socialize.getAccessTokenCookie(c,p);if(operation=="addConnection"){var connectBehavior=gigya.services.socialize._ExtractParam([c,p],"connectWithoutLoginBehavior");if(connectBehavior){connectBehavior=connectBehavior.toLowerCase();}if(connectBehavior=="loginexistinguser"){requestParams.loginIfExists=true;}if((loginToken==""||loginToken==null)&&(accessToken==null||accessToken=="")){endpoint="https://socialize.gigya.com/socialize.login?";i.userWasLoggedOut=true;if(connectBehavior!="alwayslogin"){requestParams.x_temporary_account=true;}}}var extraPermissions;if(requestParams&&p.provider){if(c[p.provider+"ExtraPermissions"]){extraPermissions=c[p.provider+"ExtraPermissions"];}if(p[p.provider+"ExtraPermissions"]){extraPermissions=p[p.provider+"ExtraPermissions"];}}gigya.services.socialize._ExtractParams([c,p,i,{redirect_uri:"/GS/AfterLogin.aspx",response_type:(authCodeOnly?"code":"server_token"),format:"jsonp",sdk:"js"}],requestParams,gigya.services.socialize._APIParamSchema[operation]);requestParams.authMode=gigya.partnerSettings.authMode;if(accessToken){requestParams.oauth_token=accessToken;requestParams.authMode="token";}if(extraPermissions){requestParams["x_extraPermissions"]=extraPermissions;}requestParams.redirect_uri="/GS/AfterLogin.aspx";requestParams.response_type=(authCodeOnly?"code":"server_token");requestParams.format="jsonp";requestParams.sdk="js";if(gigya.partnerSettings.gcid){requestParams.gcid=gigya.partnerSettings.gcid;}var lid=gigya._vars.flashListenerID;if(c.legacyCrossSiteMethod&&c.legacyCrossSiteMethod.toLowerCase()!="localStorage"){lid=c.legacyCrossSiteMethod+":"+gigya._vars.flashListenerID;}var state={domain:document.location.href.split("?")[0].split("#")[0],id:id,lid:lid};if(p&&p.provider&&p.provider.toLowerCase()=="facebook"){gigya.services.socialize._ExtractParams([c,p,i],state,["invite","userAction"]);}requestParams.state=gigya.global.serializeToKeyValuePairs(state);i.requestParams=requestParams;var qs=gigya.global.serializeToKeyValuePairs(requestParams);var provider;if(requestParams&&requestParams["x_provider"]){provider=gigya.services.socialize._getProviderByName(requestParams["x_provider"].toLowerCase());}var windowOptions=null;if(provider!=null){windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+provider.width+",height="+provider.height;}gigya.global.generateEvent(operation,c["APIKey"],c.cid,requestParams.source,requestParams.sourceData,{sn:provider.toString()});gigya.global._OpenWindow(endpoint+qs,id,windowOptions);};gigya.services.socialize.login=function(c,p,i){gigya.services.socialize.endPoint("login",c,p,i,gigya.services.socialize._onLogin);};gigya.services.socialize._onLogin=function(res,context){if(res.errorCode==0){if(!res.dontClose){gigya.global._CloseWindow(context.id);}var authCodeOnly=gigya.global.valueIsExplicitTrue(gigya.services.socialize._ExtractParam([context.c,context.p,context.i],"authCodeOnly"));if(authCodeOnly){gigya.services.socialize.handleRESTResponse(context,{authCode:res.code});}else{gigya.services.socialize.handleRESTResponse(context,res);}}else{gigya.services.socialize.handleRESTResponse(context,res);}};gigya.services.socialize.addConnection=function(c,p,i){gigya.services.socialize.endPoint("addConnection",c,p,i,gigya.services.socialize._onAddConnection);};gigya.services.socialize._onAddConnection=function(res,context){if(!res.dontClose){gigya.global._CloseWindow(context.id);}gigya.services.socialize.handleRESTResponse(context,res);};gigya.services.socialize.requestPermissions=function(c,p,i){gigya.services.socialize.endPoint("requestPermissions",c,p,i,gigya.services.socialize._onRequestPermissions);};gigya.services.socialize._onRequestPermissions=function(res,context){if(!res.dontClose){gigya.global._CloseWindow(context.id);}gigya.services.socialize.handleRESTResponse(context,res);};gigya.services.socialize.getBoookmarkSize=function(provider){var w;var h;provider=provider.toLowerCase();switch(provider){case"facebook":w=590;h=540+55;break;case"myspace":w=590;h=540+55;break;case"twitter":w=880;h=530+55;break;case"messenger":w=710;h=850+55;break;case"linkedin":w=560;h=760+55;break;case"google":w=710;h=850+55;break;case"yahoobookmarks":w=840;h=920+55;break;case"digg":w=1010;h=990+55;break;case"delicious":w=890;h=850+55;break;case"googlebookmarks":w=710;h=850+55;break;}return{w:w,h:h};};gigya.services.socialize.postBookmark=function(c,p,i){var callback=p.callback;var context=p.context;var requestParams={};gigya.services.socialize._ExtractParams([c,p,i],requestParams,gigya.services.socialize._APIParamSchema.postBookmark);requestParams.sdk="js";if(!requestParams.URL||requestParams.URL==""){var metas=document.getElementsByTagName("meta");for(var i=0;i<metas.length;i++){if(metas[i].getAttribute("property")=="og:url"&&metas[i].getAttribute("content")){requestParams.URL=metas[i].getAttribute("content");break;}}}if(!requestParams.URL&&!requestParams.url){requestParams.URL=document.location.href;}delete requestParams["context"];var qs=gigya.global.serializeToKeyValuePairs(requestParams);if(!p.provider){p.provider="";}var bookmarkSize=gigya.services.socialize.getBoookmarkSize(p.provider);var windowOptions;if(bookmarkSize.w&&bookmarkSize.h){windowOptions="menubar=0,toolbar=0,resizable=1,width="+bookmarkSize.w+",height="+bookmarkSize.h;}gigya.global._OpenWindow("https://socialize.gigya.com/gs/bookmark.aspx?"+qs,"gs_bookmark_"+requestParams.provider,windowOptions);};gigya.services.socialize._convertIdentitiesArrayToObject=function(o){if(o.identities==null){o.identities={};return;}if(o.identities.constructor!=Array){return;}var identitiesArray=o.identities;o.identities={};for(var i=0;i<identitiesArray.length;i++){o.identities[identitiesArray[i].provider]=new gigya.services.socialize.Identity(identitiesArray[i]);}};gigya.services.socialize._HandleSpecialFields=function(o){if(o.photos){o.photos=new gigya.services.socialize.Collection(o.photos,"");}if(o.albums){o.albums=new gigya.services.socialize.Collection(o.albums,"");}if(o.user){o.user=new gigya.services.socialize.User(o.user);}if(o.friends){var arUIDs=[];for(var i=0;i<o.friends.length;i++){arUIDs.push(o.friends[i].UID);}o.UIDs=arUIDs.join(",");o.friends=new gigya.services.socialize.Collection(gigya.services.socialize._ConvertToTypedObjects(o.friends,gigya.services.socialize.Friend),"UID");}if(o.contacts){o.contacts=new gigya.services.socialize.Collection(gigya.services.socialize._ConvertToTypedObjects(o.contacts,gigya.services.socialize.Contact),"email");}if(o.friend){o.friend=new gigya.services.socialize.Collection(gigya.services.socialize._ConvertToTypedObjects(o.friend,gigya.services.socialize.Friend),"UID");}if(o.actions){o.actions=new gigya.services.socialize.Collection(gigya.services.socialize._ConvertToTypedObjects(o.actions,gigya.services.socialize.UserAction),"UID");}};gigya.services.socialize._ConvertToTypedObjects=function(arr,ctor){if((arr==null)||(arr.length==0)||(ctor==null)){return arr;}var oarr=[];var i=0;var el=arr[i];while(el){oarr.push(new ctor(el));if(oarr[i].identities){gigya.services.socialize._convertIdentitiesArrayToObject(oarr[i]);}el=arr[++i];}return oarr;};(function(){gigya.services.socialize.Collection=function(arr,k){this.arr=arr;this._key=k?k:"";};var collectionProto=gigya.services.socialize.Collection.prototype;collectionProto.asArray=function(){return this.arr;};collectionProto.each=function(f){var i=0;var el=this.arr[i];while(el){f(el,i);i++;el=this.arr[i];}};collectionProto.getById=function(id){if(typeof this._hash=="undefined"){this._buildHash();}return(this._hash?this._hash:this.arr)[id];};collectionProto.getSize=function(){return this.arr.length;};collectionProto._buildHash=function(){var h=this._hash={};var k=this._key;this.each(function(o,i){h[(typeof o[k]=="function")?o[k]():o[k]]=o;});};gigya.services.socialize.UserAction=function(uao){if(arguments.length==1&&typeof(uao)=="object"){this.actorUID=uao.actorUID;this.actorNickname=uao.actorNickname?uao.actorNickname:"";this.actionName=uao.actionName?uao.actionName:"";this.titleTemplate=uao.template?uao.template:"";this.templateFields=uao.templateFields?uao.templateFields:{};this.date=new Date();this.date.setTime(uao.date);this.targets=uao.targets?uao.targets:[];this.images=uao.images?uao.images:[];this.actionData1=uao.data1?uao.data1:"";this.actionData2=uao.data2?uao.data2:"";this.iconURL=uao.icon?uao.icon:"";this.title=uao.title?uao.title:"";this.linkBack=uao.linkBack?uao.linkBack:"";this.userMessage=uao.userMessage?uao.userMessage:"";this.description=uao.description?uao.description:"";this.actionLinks=uao.actionLinks?uao.actionLinks:[];this.mediaItems=uao.mediaItems?uao.mediaItems:[];}else{this.titleTemplate="";this.actorNickame="";this.actorUID="";this.actionName="";this.templateFields={};this.targets=[];this.images=[];this.actionData1="";this.actionData2="";this.iconURL="";this.actionData1="";this.date=new Date();this.title="";this.linkBack="";this.userMessage="";this.description="";this.actionLinks=[];this.mediaItems=[];}if(typeof(uao)=="string"){this.titleTemplate=uao;}};var UserActionProto=gigya.services.socialize.UserAction.prototype;UserActionProto.clone=function(){return new gigya.services.socialize.UserAction(gigya.global.cloneObject(this,true,true));};UserActionProto.getTemplate=function(){return this.titleTemplate;};UserActionProto.setTemplate=function(a){this.titleTemplate=a;};UserActionProto.getActor=function(a){return{UID:this.actorUID,nickname:this.actorNickname};};UserActionProto.setActionName=function(a){this.actionName=a;return this;};UserActionProto.getActionName=function(a){return this.actionName;};UserActionProto.getTemplateFields=function(){var fieldsArray=[];for(var fn in this.templateFields){fieldsArray.push(this.templateFields[fn]);}return new gigya.services.socialize.Collection(fieldsArray,"fieldName");};UserActionProto.setTemplateField=function(n,t,h){this.templateFields[n]=new gigya.services.socialize.TemplateField(n,t,h);return this;};UserActionProto.getTemplateField=function(n){return this.templateFields[n]?this.templateFields[n]:null;};UserActionProto.addTarget=function(t){if(typeof(t)=="object"){this.targets.push({UID:t.UID,nickname:t.nickname?t.nickname:""});return this;}else{if(typeof(t)=="string"){this.targets.push({UID:t,nickname:""});return this;}}};UserActionProto.addActionLink=function(title,href){this.actionLinks.push({text:title,href:(href?href:"")});return this;};UserActionProto.addMediaItem=function(obj){this.mediaItems.push(obj);return this;};UserActionProto.setTitle=function(text){this.title=text;return this;};UserActionProto.setLinkBack=function(href){this.linkBack=href;return this;};UserActionProto.setUserMessage=function(text){this.userMessage=(text?text:"");return this;};UserActionProto.setDescription=function(text){this.description=(text?text:"");return this;};UserActionProto.addImage=function(s,h){this.addMediaItem({type:"image",src:s,href:h});};UserActionProto.getImages=function(){return new gigya.services.socialize.Collection(this.images,"");};UserActionProto.getTargets=function(){return new gigya.services.socialize.Collection(this.targets,"UID");};UserActionProto.setIconURL=function(url){this.iconURL=url;return this;};UserActionProto.getIconURL=function(){return this.iconURL;};UserActionProto.getDate=function(){return this.date;};UserActionProto.setActionData1=function(ad){this.actionData1=ad;return this;};UserActionProto.getActionData1=function(ad){return this.actionData1;};UserActionProto.setActionData2=function(ad){this.actionData2=ad;return this;};UserActionProto.getActionData2=function(ad){return this.actionData2;};gigya.services.socialize.TemplateField=function(n,t,h){this.fieldName=n;this.text=t?t:"";this.href=h?h:"";};})();gigya.services.socialize.getGigyaSettings=function(group){var gigyaSettings=gigya.global.localStorage.getItem("gigyaSettings");try{gigyaSettings=gigya.global.JSONDeserialize(gigyaSettings);}catch(e){gigyaSettings={};}if(!gigyaSettings){gigyaSettings={};}return gigya.global.JSONSerialize(gigyaSettings[group]);};gigya.services.socialize.setGigyaSettings=function(group,settings){var gigyaSettings=gigya.global.localStorage.getItem("gigyaSettings");try{gigyaSettings=gigya.global.JSONDeserialize(gigyaSettings);}catch(e){gigyaSettings={};}if(!gigyaSettings){gigyaSettings={};}if(!gigyaSettings[group]){gigyaSettings[group]={};}for(var p in settings){gigyaSettings[group][p]=settings[p];}gigya.global.localStorage.setItem("gigyaSettings",gigya.global.JSONSerialize(gigyaSettings));};gigya.services.socialize.delGigyaSettings=function(group,settings){if(!group){gigya.global.localStorage.removeItem("gigyaSettings");}else{var gigyaSettings=gigya.global.localStorage.getItem("gigyaSettings");if(gigyaSettings){gigyaSettings=gigya.global.JSONDeserialize(gigyaSettings);delete gigyaSettings[group];gigya.global.localStorage.setItem("gigyaSettings",gigya.global.JSONSerialize(gigyaSettings));}}};gigya.services.socialize.handleRESTResponse=function(context,res){var originalResponse=res;if(res.userInfo){if(typeof res.userInfo=="string"){res.userInfo=gigya.global.JSONDeserialize(res.userInfo);}res=res.userInfo;}delete res.statusCode;delete res.statusReason;if(!res.hasOwnProperty("errorCode")){res.errorCode=0;}if(!res.hasOwnProperty("status")){res.status=(res.errorCode==0)?"OK":"FAIL";}if(!res.hasOwnProperty("errorMessage")){res.errorMessage="";}if(!res.hasOwnProperty("statusMessage")){res.statusMessage=res.errorMessage;}var defaultOKResponse={status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:""};if(res.errorCode==403005){gigya.services.socialize.removeAccessToken();gigya.services.socialize.removeLoginToken();switch(context.apiName){case"setUserSettings":gigya.services.socialize.setGigyaSettings(context.p.group,context.p.settings);res=defaultOKResponse;break;case"delUserSettings":gigya.services.socialize.delGigyaSettings(context.p.group);res=defaultOKResponse;break;case"getUserSettings":var settings=gigya.services.socialize.getGigyaSettings(context.p.group);res=defaultOKResponse;res.settings=settings;break;case"logout":res=defaultOKResponse;break;}}if(res.errorCode==0){switch(context.apiName){case"postComment":if(res.comment){try{res.comment=gigya.global.JSONDeserialize(res.comment);}catch(e){}}break;case"notifyLogin":case"addConnection":case"login":case"getUserInfo":if(context.operation=="isLoggedIn"){var user=res;res={loggedIn:gigya.global.valueIsExplicitTrue(user.isLoggedIn)};gigya.services.socialize._ExtractParams(user,res,["status","statusMessage","callId","errorCode","errorMessage","errorDetails","context"]);}else{if(!res.authCode&&!(context.apiName=="notifyLogin"&&context.c.authCode)){var user=res;res={user:user};gigya.services.socialize._ExtractParams(user,res,["status","statusMessage","callId","errorCode","errorMessage","errorDetails","settings","context","UIDSig","timestamp","UIDSignature","signatureTimestamp","UID"]);if(res.user.hasOwnProperty("UIDSig")){res.signature=res.user.UIDSig;}delete user.status;delete user.statusMessage;delete user.callId;delete user.errorCode;delete user.errorMessage;delete user.errorDetails;delete user.settings;delete user.context;if(user.age!=""&&!isNaN(parseInt(user.age))){user.age=parseInt(user.age);}var capabilitiesString=user.capabilities;if(!capabilitiesString){capabilitiesString="";}if(typeof user.capabilities!="object"){user.capabilities={};}capabilitiesString=capabilitiesString.toLowerCase();user.capabilities={actions:capabilitiesString.indexOf("actions")>-1,friends:capabilitiesString.indexOf("friends")>-1,login:capabilitiesString.indexOf("login")>-1,status:capabilitiesString.indexOf("status")>-1,notifications:capabilitiesString.indexOf("notifications")>-1,contacts:capabilitiesString.indexOf("contacts")>-1,photos:capabilitiesString.indexOf("photos")>-1};gigya.services.socialize._convertIdentitiesArrayToObject(user);if(typeof user.providers=="string"){user.providers=user.providers.split(",");}if(context.p.group&&!res.settings){var settings=gigya.services.socialize.getGigyaSettings(context.p.group);res.settings=settings;}}}break;case"getAvailableProviders":var oAvailableProviders={};for(var i=0;i<res.availableProviders.length;i++){oAvailableProviders[res.availableProviders[i].name]=res.availableProviders[i];}res.availableProviders=oAvailableProviders;break;case"getAlbums":break;case"getPhotos":break;case"unlinkAccounts":case"deleteAccount":case"logout":gigya.services.socialize.removeAccessToken();gigya.services.socialize.removeLoginToken();break;}gigya.services.socialize._HandleSpecialFields(res);}gigya.services.socialize.saveTokenFromResult(originalResponse,[]);gigya.services.socialize.saveTokenFromResult(res,[context.c,context.p,context.i]);switch(context.apiName){case"removeConnection":case"disconnect":if(res.errorCode==0){gigya.services.socialize._continueWithGetUserInfo(context,context.operation);return;}break;}if(res.errorCode==403005&&context.apiName=="getUserInfo"){res.status="OK";res.statusMessage="";res.errorCode=0;res.statusCode=0;res.errorMessage="";res.errorDetails="";res.statusReason="";res.user={UID:"",nickname:"",photoURL:"",thumbnailURL:"",isSiteUID:false,birthDay:0,birthMonth:0,birthYear:0,gender:"",email:"",proxiedEmail:"",country:"",state:"",city:"",zip:"",firstName:"",lastName:"",profileURL:"",age:"",isLoggedIn:false,isConnected:false,isSiteUser:false,providers:[],identities:{},timestamp:"",UIDSig:"",UIDSignature:"",signatureTimestamp:"",loginProvider:"",loginProviderUID:"",capabilities:{actions:false,friends:false,login:false,status:false,notifications:false,contacts:false,photos:false}};if(context.p.group){gigya.services.socialize.getGigyaSettings(context.p.group);}}try{if(res.settings){res.settings=gigya.global.JSONDeserialize(res.settings);}}catch(e){}if(context.context!=null){res.context=context.context;}else{delete res.context;}delete context.p._operation;delete context.p.originalResponse;res.requestParams=context.p;res.operation=context.operation;var fnCallback=function(){context.cbCalled=true;gigya.services.socialize.generateEventsFromResponse(res,context,originalResponse);if(typeof context.callback=="function"){context.callback(res);}};var forceProvidersLogout=gigya.services.socialize._ExtractParam([context.c,context.p],"forceProvidersLogout");if(context.apiName=="logout"&&res.connectedProviders&&!gigya.global.valueIsExplicitFalse(forceProvidersLogout)){var fn=function(){if(!context.cbCalled){fnCallback();}};window.setTimeout(fn,5000);gigya.services.socialize.logoutFromProviders(res.connectedProviders.toLowerCase(),fn);}else{fnCallback();}};gigya.services.socialize.logoutFromProviders=function(providers,callback){var arProviders=providers.split(",");var loggedOutCount=0;for(var i=0;i<arProviders.length;i++){var providerName=arProviders[i];var logoutURL;var useIframe=false;switch(providerName){case"facebook":logoutURL="https://m.facebook.com/logout.php?confirm=1&r=";break;case"yahoo":logoutURL="https://login.yahoo.com/config/login?.src=fpctx&amp;logout=1&r=";break;case"google":if(gigya._vars.lastScriptProtocol=="https"){logoutURL="https://google.com/accounts/Logout?r=1";useIframe=true;}else{logoutURL="https://www.google.com/accounts/Logout?r=";useIframe=true;}break;case"linkedin":logoutURL="https://www.linkedin.com/secure/login?session_full_logout=&trk=hb_signout&r=";break;default:logoutURL="";}var fnOnLoggedOut=function(){loggedOutCount++;if(loggedOutCount==arProviders.length){if(providerName=="facebook"){gigya.refreshFbcSession();}callback();}};if(logoutURL&&logoutURL!=""){logoutURL+=(new Date()).getTime();var fnOnLoad;if(!useIframe){var img=new Image();fnOnLoad=function(){if(!this.loaded){this.loaded=true;fnOnLoggedOut();}};img.onload=fnOnLoad;img.onerror=fnOnLoad;img.src=logoutURL;}else{var ifr=document.createElement("iframe");ifr.style.width="30px";ifr.style.height="10px";ifr.style.position="absolute";ifr.style.top="-1000px";ifr.style.left="-1000px";fnOnLoad=function(e){var el;if(e&&e.srcElement){el=e.srcElement;}else{if(e&&e.target){el=e.target;}else{el=this;}}if(!el.loaded){el.loaded=true;fnOnLoggedOut();try{document.body.removeChild(el);}catch(ex){}}};if(ifr.addEventListener){ifr.addEventListener("load",fnOnLoad,false);ifr.addEventListener("error",fnOnLoad,false);}else{if(ifr.attachEvent){ifr.attachEvent("onload",fnOnLoad);ifr.attachEvent("onerror",fnOnLoad);}else{ifr.onload=fnOnLoad;ifr.onerror=fnOnLoad;}}ifr.src=logoutURL;gigya.global.bodyAppendChild(ifr);}}else{fnOnLoggedOut();}}};gigya.services.socialize.sendRequest=function(apiMethod,params,context,callback,i){var cmd=new gigya.global.JPCMD(new gigya.global.RESTBackendAPI(apiMethod));cmd.addParam("format","jsonp");cmd.addParam("sdk","js");var paramArray;if(typeof params=="object"&&params.constructor==Array){paramArray=params;}else{paramArray=[params];}if(i!=null&&i.presetResponse!=null){cmd.presetResponse=i.presetResponse;}for(var j=0;j<paramArray.length;j++){var paramsBlock=paramArray[j];for(var p in paramsBlock){if(p!=null){if(paramsBlock.hasOwnProperty(p)){if(p=="context"){cmd.context=paramsBlock[p];}else{if(p=="presetResponse"){cmd.presetResponse=paramsBlock[p];}else{if(p=="callback"){cmd.callback=paramsBlock[p];}else{if(typeof paramsBlock[p]!="function"&&typeof paramsBlock[p]!="undefined"&&paramsBlock[p]!=null){cmd.addParam(p,paramsBlock[p]);}}}}}}}}if(typeof callback=="function"){cmd.callback=callback;}if(context!=null){cmd.context=context;}cmd.run();};gigya.services.socialize.Provider=function(ID,displayName,width,height,arDefaultCapabilities,iframeWidth,iframeHeight,nativeLoginStr,explicitOnly){this.ID=ID;this.arDefaultCapabilities=arDefaultCapabilities;this.displayName=displayName;this.name=displayName.toLowerCase().split(" ").join("");this.width=width;this.height=height;this.windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+width+",height="+height;this.iframeWidth=iframeWidth;this.iframeHeight=iframeHeight;this.nativeLoginStr=nativeLoginStr;this.explicitOnly=explicitOnly;this.toString=function(){return this.name;};};gigya.services.socialize._arProviders=[new gigya.services.socialize.Provider(64,"Facebook",650,400,["login","friends","actions","status","photos"],670,440,"&useFBC=true"),new gigya.services.socialize.Provider(9012,"Twitter",800,440,["login","friends","notifications","actions","status"]),new gigya.services.socialize.Provider(9803,"Yahoo",500,567,["login","friends","actions","status","contacts","notifications"]),new gigya.services.socialize.Provider(1047,"Messenger",520,450,["login","friends","actions","status","notifications"]),new gigya.services.socialize.Provider(9811,"Google",410,450,["login","actions","status","friends","contacts"]),new gigya.services.socialize.Provider(9042,"LinkedIn",865,450,["login","friends","status","actions","notifications"]),new gigya.services.socialize.Provider(1,"MySpace",610,510,["login","friends","actions","status","photos","notifications"]),new gigya.services.socialize.Provider(9003,"Digg",730,590,["login"],null,null,null,true),new gigya.services.socialize.Provider(9007,"FourSquare",1000,650,["login","friends"]),new gigya.services.socialize.Provider(9809,"Orkut",610,510,["login","friends","status","actions","photos"]),new gigya.services.socialize.Provider(9800,"AOL",530,720,["login"]),new gigya.services.socialize.Provider(4096,"WordPress",700,540,["login"]),new gigya.services.socialize.Provider(256,"Blogger",760,400,["login"]),new gigya.services.socialize.Provider(1041,"Hyves",700,540,["login"]),new gigya.services.socialize.Provider(16,"LiveJournal",670,360,["login"]),new gigya.services.socialize.Provider(1043,"VeriSign",940,500,["login"]),new gigya.services.socialize.Provider(1024,"Typepad",730,590,["login"]),new gigya.services.socialize.Provider(4120,"OpenID",730,590,["login"]),new gigya.services.socialize.Provider(1045,"LiveID",800,550,["login","contacts"]),new gigya.services.socialize.Provider(4218,"Netlog",730,590,["login"],null,null,null,true),new gigya.services.socialize.Provider(4222,"SignOn",870,900,["login"],null,null,null,true),new gigya.services.socialize.Provider(4224,"Orange France",730,590,["login"],null,null,null,true),new gigya.services.socialize.Provider(4228,"Mixi",730,590,["login"],null,null,null,true),new gigya.services.socialize.Provider(5002,"Livedoor",970,700,["login"],null,null,null,true),new gigya.services.socialize.Provider(5004,"Fox News",730,590,["login"],null,null,null,true),new gigya.services.socialize.Provider(1051,"PayPal",820,660,["login"],null,null,null,true),new gigya.services.socialize.Provider(6002,"Site",730,590,[],null,null,null,true)];gigya.services.socialize.getProvidersForRequiredCapabilities=function(providers,capabilities){if(capabilities==null){capabilities="";}var arProviders=[];for(var i=0;i<providers.length;i++){var provider=providers[i];var validNet=true;for(var u=0;u<capabilities.length;u++){var found=false;for(var a=0;a<provider.arDefaultCapabilities.length;a++){if(provider.arDefaultCapabilities[a].toLowerCase()==capabilities[u].toLowerCase()){found=true;break;}}if(!found){validNet=false;break;}}if(validNet){arProviders.push(provider);}}return arProviders;};gigya.services.socialize._getProviderByName=function(provider,providersEnum){if(null==providersEnum){providersEnum=gigya.services.socialize._arProviders;}for(var i=0;i<providersEnum.length;i++){if(providersEnum[i].name.toLowerCase()==provider.toLowerCase()){return providersEnum[i];}}};gigya.services.socialize._getProviderByID=function(providerID,providersEnum){if(null==providersEnum){providersEnum=gigya.services.socialize._arProviders;}for(var i=0;i<providersEnum.length;i++){if(providersEnum[i].ID==providerID){return providersEnum[i];}}};gigya.services.socialize.hideProvidersByName=function(arProviders,providersToHide,providersEnum){providersToHide=providersToHide.toLowerCase();var arProvidersToHide=providersToHide.split(" ").join("").toLowerCase().split(",");arProvidersToHide=this.replaceWildcard(arProvidersToHide,providersEnum);for(var i=0;i<arProvidersToHide.length;i++){for(var u=0;u<arProviders.length;u++){var provider=arProviders[u];provider=provider.toString();if(provider){provider=provider.toLowerCase();}if(provider==arProvidersToHide[i]){arProviders.splice(u,1);}}}return arProviders;};gigya.services.socialize.getAllProviders=function(){return gigya.services.socialize._arProviders.concat();};gigya.services.socialize.getProvidersByName=function(providers,providersEnum){providers=(""+providers).split(" ").join("").toLowerCase();var arProviders=(""+providers).split(",");arProviders=this.replaceWildcard(arProviders,providersEnum);var arProvidersObjects=[];for(var i=0;i<arProviders.length;i++){var providerObject=gigya.services.socialize._getProviderByName(arProviders[i],providersEnum);if(providerObject!=null){arProvidersObjects.push(providerObject);}}return arProvidersObjects;};gigya.services.socialize.replaceWildcard=function(arProviders,providersEnum){if(null==providersEnum){providersEnum=gigya.services.socialize._arProviders;}var arProvidersNew=[];for(var i=0;i<arProviders.length;i++){if(arProviders[i]=="*"){for(var iProvider=0;iProvider<providersEnum.length;iProvider++){var found=false;for(var u=0;u<arProviders.length;u++){if(arProviders[u].toLowerCase()==providersEnum[iProvider].name.toLowerCase()){found=true;}}if(!found&&!providersEnum[iProvider].explicitOnly){arProvidersNew.push(providersEnum[iProvider].name);}}}else{arProvidersNew.push(arProviders[i]);}}return arProvidersNew;};gigya.services.socialize._getCommonOverridableParams=function(){var params={};if(gigya.partnerSettings.authMode=="token"){var access_token=gigya.services.socialize.getAccessTokenCookie(null,null,null);if(access_token!=null){params.oauth_token=access_token;}}return params;};gigya.services.socialize._getCommonNonOverridableParams=function(){var params={};var lt=gigya.services.socialize.getLoginTokenCookie();if(lt!=null){params.login_token=lt;}if(gigya._vars.apiKeyFromURL!=null){var loginTokenExp=gigya.global.getCookie("gltexp_"+gigya._vars.apiKeyFromURL);if(loginTokenExp!=null){params.loginTokenExp=loginTokenExp;}}if(gigya.partnerSettings.gcid){params.gcid=gigya.partnerSettings.gcid;}if(gigya.customDomain){var oFbParams=gigya.services.socialize._getFacebookParams();for(var fbParam in oFbParams){params[fbParam]=oFbParams[fbParam];}}return params;};gigya.services.socialize._ExtractListOfGIGUIDs=function(source){switch(typeof source){case"string":return source;case"object":if(typeof source.UID!="undefined"){return source.UID;}if(source instanceof gigya.services.socialize.Collection){var a=[];source.each(function(o,i){var UID=gigya.services.socialize._ExtractListOfGIGUIDs(o);if((UID!=null)&&(UID!="")){a.push(UID);}});return a.join(",");}}};gigya.services.socialize.processMergedParams=function(apiMethod,mp){gigya.services.socialize._RemoveClientSideOnlyParams(mp);if(mp.hasOwnProperty("timestamp")){mp["UIDTimestamp"]=mp["timestamp"];delete mp["timestamp"];}if(mp.hasOwnProperty("signature")){mp["UIDSig"]=mp["signature"];delete mp["signature"];}if(mp.hasOwnProperty("nonce")){mp["UIDNonce"]=mp["nonce"];delete mp["nonce"];}if(mp.hasOwnProperty("format")&&!mp["dataFormat"]){mp["dataFormat"]=mp["format"];delete mp["format"];}if(mp.hasOwnProperty("recipients")){mp["recipients"]=gigya.services.socialize._ExtractListOfGIGUIDs(mp["recipients"]);}if(mp.hasOwnProperty("friends")){var friendUIDs=gigya.services.socialize._ExtractListOfGIGUIDs(mp["friends"]);if(mp["UIDs"].length>0){mp["UIDs"]+=",";}mp["UIDs"]+=friendUIDs;}};gigya.services.socialize._createAPIFunction=function(oApi){if(oApi.type==0){return function(c,p,i){if(gigya.services.socialize._APICallsQueue.isActive){gigya.services.socialize._APICallsQueue.queue.push({apiName:oApi.name,params:arguments});return;}if(!c){c={};}if(!p){p={};}if(!i){i={};}var context={context:p.context,callback:p.callback,p:p,c:c,i:i,apiName:oApi.name};if(oApi.needsAuth==1&&!gigya.services.socialize.canSendRequest(c,p)){if(oApi.name=="getUserInfo"||oApi.name=="logout"){i={_operation:i._operation,presetResponse:{context:context,status:"OK",statusMessage:"",errorCode:0,errorMessage:"",dontTryAgain:true}};}else{i={_operation:i._operation,presetResponse:{context:context,status:"FAIL",statusMessage:"Unauthorized user",errorCode:403005,errorMessage:"Unauthorized user",dontTryAgain:true}};}}var overridableParams=gigya.services.socialize._getCommonOverridableParams();var nonOverridableParams=gigya.services.socialize._getCommonNonOverridableParams();var meregedParams=gigya.services.socialize._MergeParams([overridableParams,c,p,i],{},null);gigya.services.socialize.processMergedParams(oApi.name,meregedParams);var operation=oApi.name;if(meregedParams._operation){operation=meregedParams._operation;}context.operation=operation;if(oApi.schema&&!i.presetResponse){meregedParams=gigya.services.socialize._ExtractParams(meregedParams,{},oApi.schema);}meregedParams=gigya.services.socialize._MergeParams([meregedParams,nonOverridableParams],{},null);gigya.services.socialize.sendRequest(oApi.name,meregedParams,context,gigya.services.socialize.handleRESTResponse);};}else{if(oApi.type==4){return function(c,p,i){if(!i){i={};}i._operation=oApi.name;this[oApi.replacedBy](c,p,i);};}}};(function(){var API=function(name,type,needsAuth,paramsSchema,replacedBy){this.name=name;this.type=type;this.needsAuth=gigya.global.valueIsExplicitTrue(needsAuth);this.replacedBy=replacedBy;if(typeof paramsSchema=="string"){this.schema=gigya.services.socialize._APIParamSchema.common.join("|")+"|"+paramsSchema;}else{this.schema=gigya.services.socialize._APIParamSchema.common.concat(paramsSchema);}};gigya.services.socialize._apis=[new API("getAvailableProviders",0,0,["requiredCapabilities"]),new API("notifyLogin",0,0,["siteUID","UIDTimestamp","UIDSig","UIDNonce","provider","authToken","tokenSecret","tokenExpiration","sessionHandle","sessionHandleExpiration","userInfo","providerSessions","sessionExpiration","authCode","includeAllIdentities","includeiRank","group","settings","extraFields","signIDs","newUser"]),new API("shortenURL",0,0,["URL"]),new API("convertAction",0,0,["userAction","provider"]),new API("postComment",0,0,"categoryID|streamID|parentCommentID|username|email|commentText|userAction|(.*?)UserAction|enabledProviders|disabledProviders|shortURLs|scope|privacy|feedID"),new API("getReactionCounts",0,0,["reactionBarId","buttonIDs","countOnly"]),new API("incrementReactionsCount",0,0,["reactionBarId","buttonID","count"]),new API("deleteAccount",0,1,[]),new API("delUserSettings",0,1,["group","settings"]),new API("getAlbums",0,1,["type","enabledProviders","disabledProviders"]),new API("getContacts",0,1,["enabledProviders","disabledProviders"]),new API("getFriendsInfo",0,1,["enabledProviders","disabledProviders","detailLevel","UIDs","siteUsersOnly","requiredCapabilities","signIDs"]),new API("getPhotos",0,1,["enabledProviders","disabledProviders","albumIDs","tags"]),new API("getRawData",0,1,["provider","UID","fields","dataFormat"]),new API("getSessionInfo",0,1,["provider","paddingMode","encrypt"]),new API("getUserInfo",0,1,["enabledProviders","disabledProviders","signIDs","includeiRank","includeAllIdentities","extraFields","group","settings"]),new API("getUserSettings",0,1,["group","settings"]),new API("logout",0,1,[]),new API("notifyRegistration",0,1,["siteUID","UIDTimestamp","UIDSig"]),new API("publishUserAction",0,1,"userAction|(.*?)UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID"),new API("removeConnection",0,1,["provider"]),new API("sendNotification",0,1,["recipients","body","subject","shortURLs"]),new API("setStatus",0,1,"shortURLs|status|enabledProviders|disabledProviders|.*?Status"),new API("setUID",0,1,["siteUID","UIDTimestamp","UIDSig"]),new API("setUserSettings",0,1,["group","settings"]),new API("unlinkAccounts",0,1,[]),new API("connect",4,null,null,"addConnection"),new API("disconnect",4,null,null,"removeConnection"),new API("linkAccounts",4,null,null,"setUID"),new API("showConnectUI",4,null,null,"showAddConnectionsUI"),new API("showNewsfeedUI",4,null,null,"showFeedUI"),new API("isLoggedIn",4,null,null,"getUserInfo")];var fnbody,APICallName;for(var iAPI=0;iAPI<gigya.services.socialize._apis.length;iAPI++){var oApi=gigya.services.socialize._apis[iAPI];gigya.services.socialize[oApi.name]=gigya.services.socialize._createAPIFunction(oApi);}})();gigya.services.socialize.canSendRequest=function(c,p){var baseDomain=gigya.partnerSettings.baseDomain;var pageDomain=document.domain;return !((baseDomain&&pageDomain.length>=baseDomain.length&&pageDomain.lastIndexOf(baseDomain)==pageDomain.length-baseDomain.length)&&(!gigya.services.socialize.getLoginTokenCookie()&&!gigya.services.socialize.getAccessTokenCookie(c,p,null)));};gigya.services.socialize.UIQueue=[];gigya.services.socialize.runUIQueue=function(){gigya.services.socialize.pluginsCoreLoaded=true;for(var i=0;i<gigya.services.socialize.UIQueue.length;i++){gigya.services.socialize.showUI.apply(this,gigya.services.socialize.UIQueue[i]);}gigya.services.socialize.UIQueue=[];};gigya.services.socialize._closeComponent=function(rid,dispatchCloseEvent){var oRID=gigya.services.socialize._parseRID(rid);var req=oRID.req;if(gigya.services.socialize.GrayOut){gigya.services.socialize.GrayOut(false);}var ifr=document.getElementById("gigya_ifr_"+req.container.id);if(ifr!=null){ifr.style.display="none";}if(dispatchCloseEvent){gigya.services.socialize._broadcastEvent(rid,{eventName:"close"});}req.container.style.display="none";};gigya.services.socialize.sourceDataParams={showReactionsBarUI:["barID"],showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID"]};gigya.services.socialize.showUI=function(pluginName,methodName,c,p,allowPopup,defaultParams,defaultPopupParams,requiredParams,internals,dontLoadPluginsCore,ignoreContainerID){if(!dontLoadPluginsCore&&!gigya.services.socialize.pluginsCoreLoaded){gigya.services.socialize.UIQueue.push(arguments);gigya.services.socialize._preloadJS("gigya.services.socialize.plugins");gigya.services.socialize._preloadJS("gigya.services.socialize.plugins."+pluginName);return;}if(!defaultParams){defaultParams={};}if(!defaultPopupParams){defaultPopupParams={};}if(!requiredParams){requiredParams={};}if(allowPopup){if(p["containerID"]==null){p["containerID"]="";}}else{if(gigya.global.ParamsFailValidation(c,p,{containerID:{req:true}})){return;}}var containerID=p["containerID"];if(ignoreContainerID){containerID="";}var isPopup=containerID==""||p["isPopup"];for(var paramName in defaultParams){if(!p[paramName]){if(isPopup&&defaultPopupParams[paramName]){p[paramName]=defaultPopupParams[paramName];}else{p[paramName]=defaultParams[paramName];}}}if(isPopup){for(var paramName in defaultPopupParams){if(!p[paramName]){p[paramName]=defaultParams[paramName];}}}else{gigya.global._ClearContainer(containerID);}for(var i=0;i<requiredParams.length;i++){var o={};o[requiredParams[i]]={req:true};if(gigya.global.ParamsFailValidation(c,p,o)){return;}}var mergedParams=gigya.services.socialize._MergeParams([c,p],{});if(!mergedParams.source){if(methodName=="showSimpleShareUI"){mergedParams.source="showShareUI";}else{mergedParams.source=methodName;}if(!mergedParams.sourceData&&gigya.services.socialize.sourceDataParams[methodName]){var sourceData={};var addedSourceData=false;for(var i=0;i<gigya.services.socialize.sourceDataParams[methodName].length;i++){var paramName=gigya.services.socialize.sourceDataParams[methodName][i];if(mergedParams[paramName]!=null){addedSourceData=true;sourceData[paramName]=mergedParams[paramName];}}if(addedSourceData){mergedParams.sourceData=sourceData;}}}if(!mergedParams.stacktrace){mergedParams.stacktrace=[];}mergedParams.stacktrace.push({source:methodName});return gigya.services.socialize._AddJSRequest("gigya.services.socialize.plugins."+pluginName,"gigya.services.socialize.plugins."+pluginName+"."+methodName,containerID,mergedParams,mergedParams,internals);};gigya.services.socialize.showFriendSelectorUI=function(c,p){return gigya.services.socialize.showUI("friendSelector","showFriendSelectorUI",c,p,true,{width:400,height:360});};gigya.services.socialize.showShareUI=function(c,p){p=gigya.global.cloneObject(p,true,false,undefined,undefined,true);var operationMode=p["operationMode"];if(operationMode){operationMode=operationMode.toLowerCase().replace(/ /g,"");}if(!p["containerID"]){delete p["width"];delete p["height"];}if(operationMode=="simpleshare"||(operationMode=="autodetect"&&!gigya.services.socialize.canSendRequest(c,p))){return gigya.services.socialize._showSimpleShareUI(c,p);}var frameOffset=20;if(!gigya.browser.isIE){frameOffset=0;}var internals={frameOffset:frameOffset};if(p["grayedOutScreenOpacity"]){internals.grayedOutScreenOpacity=p["grayedOutScreenOpacity"];}return gigya.services.socialize.showUI("share","showShareUI",c,p,true,{width:520,height:320},{width:595,height:324},["userAction"],internals);};gigya.services.socialize._showHTMLBookmarkUI=function(c,p){return gigya.services.socialize.showUI("bookmark","showBookmarkUI",c,p,true,{width:310,height:250},{width:310,height:310});};gigya.services.socialize.showFeedUI=function(c,p){return gigya.services.socialize.showUI("newsfeed","showFeedUI",c,p,false,{width:304,height:265});};gigya.services.socialize.showChatUI=function(c,p){if(p&&p.site){p.configID=p.site;}if(p&&p.catogoryID){p.configID=p.categoryID;}if(p&&p.stream){p.streamID=p.stream;}return gigya.services.socialize.showUI("chat","showChatUI",c,p,false,{width:300,height:450});};gigya.services.socialize.showCommentsUI=function(c,p){return gigya.services.socialize.showUI("comments","showCommentsUI",c,p,false,{width:500});};gigya.services.socialize.showLoginUI=function(c,p){return gigya.services.socialize.showUI("login","showLoginUI",c,p,true,{width:120,height:110},{width:280,height:220});};gigya.services.socialize.showMiniShareUI=function(c,p){var frameOffset=10;var internals={frameOffset:frameOffset};return gigya.services.socialize.showUI("minishare","showShareMiniUI",c,p,true,{width:320,height:153},{},[],internals);};gigya.services.socialize._showSimpleShareUI=function(c,p){return gigya.services.socialize.showUI("simpleshare","showSimpleShareUI",c,p,true,{width:280,height:175},{},["userAction"],{},true,true);};gigya.services.socialize.showReactionsBarUI=function(c,p){if(p&&!p.barID){p.barID=p.itemID;}return gigya.services.socialize.showUI("reactions","showReactionsBarUI",c,p,false,{},{},["userAction","barID","reactions"]);};gigya.services.socialize.showShareBarUI=function(c,p){return gigya.services.socialize.showUI("reactions","showShareBarUI",c,p,false,{},{},["userAction","shareButtons"]);};gigya.services.socialize.showConnectUI=function(c,p){if(p==null){p={};}this.showAddConnectionsUI(c,p);};gigya.services.socialize.showAddConnectionsUI=function(c,p){return gigya.services.socialize.showUI("login","showConnectUI",c,p,true,{width:110,height:65},{width:250,height:200});};gigya.services.socialize.showEditConnectionsUI=function(c,p){return gigya.services.socialize.showUI("edit","showEditConnectionsUI",c,p,true,{width:310,height:250},{width:310,height:310});};gigya.services.socialize.trackReferrals=function(c,p){if(!gigya.reportedReferrals&&document.referrer&&document.referrer.indexOf("://")!=-1){var referringDomain=document.referrer.split("://")[1].split("/")[0].split(".com")[0].split("www.")[0];var referrers=["digg","stumbleupon","delicious","technorati","mixx"];for(var i=0;i<referrers.length;i++){if(referringDomain==referrers[i]){var cid=p["cid"];if(!cid){cid=c["cid"];}gigya.global.generateEvent("linkback",c["APIKey"],c.cid,null,null,{url:document.location.href,sn:referrers[i]});gigya.reportedReferrals=true;break;}}}if(typeof p["callback"]=="function"){p["callback"]({status:"OK",statusMessage:"",operation:"trackReferrals",context:p.context,errorMessage:"",errorCode:0});}};gigya.services.socialize.getProviderShareCounts=function(c,p){return gigya.services.socialize._AddJSRequest("gigya.services.socialize.plugins.shareCounts","gigya.services.socialize.plugins.shareCounts.getProviderShareCounts","pseudocontainer_shareCounts",c,p,{});};gigya.services.socialize._getFacebookParams=function(oTarget){if(oTarget==null){oTarget={};}if(gigya.fbAppID){if(typeof FB!="undefined"&&FB.getSession){var session=FB.getSession();if(session){if(session.uid!=null){oTarget.fb_UID=session.uid;}if(session.access_token!=null){oTarget.fb_at=session.access_token;}if(session.secret!=null){oTarget.fb_ss=session.secret;}if(session.expires!=null){oTarget.fb_exp=session.expires;}}}}else{var gfk=gigya.services.socialize._getFacebookCookie;var user=gfk("user");var expires=gfk("expires");var ss=gfk("ss");var session_key=gfk("session_key");if(user!=null){oTarget.fb_UID=user;}if(expires!=null){oTarget.fb_exp=expires;}if(ss!=null){oTarget.fb_ss=ss;}if(session_key!=null){oTarget.fb_sk=session_key;}}return oTarget;};gigya.services.socialize._getFacebookCookie=function(name){var nameEQ=gigya.fbcAPIKey+"_"+name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length);}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length);}}return null;};gigya.services.socialize.hideUI=function(c,p){if(p!=null&&typeof p.callback=="function"){var oResponse={status:"OK",statusMessage:"",operation:"hideUI",context:p.context,errorMessage:"",errorCode:0};p.callback(oResponse);}};gigya.debug=function(c,p){gigya.services.socialize._AddJSRequest("gigya.services.socialize.plugins.debugger","gigya.services.socialize.plugins.debug.debug","PseudoContainer_debug",c,p,{});};gigya.nodebug=function(){var expires_date=new Date();document.cookie="_gig_dbgConsole_dbg=0;expires="+expires_date.toGMTString()+";path=/;";document.cookie="_gig_dbgConsole_log=0;expires="+expires_date.toGMTString()+";path=/;";};gigya.showLog=function(c,p){gigya.services.socialize._AddJSRequest("gigya.services.socialize.plugins.debugger","gigya.services.socialize.plugins.debug.showLog","PseudoContainer_debug",c,p,{});};gigya._getLoggingStatus=function(){return(document.cookie.indexOf("_gig_dbgConsole_log=1")!=-1)?1:0;};gigya._activateDebugConsoleIfNeeded=function(){var dbg=gigya._getDebugStatus();var log=gigya._getLoggingStatus();if(log==1||dbg==1){gigya.debug({log:log,dbg:dbg});}};gigya._activateDebugConsoleIfNeeded();gigya.services.socialize._tryGacAuthCode=function(){if(gigya.partnerSettings.authMode=="cookie"&&gigya._vars.apiKeyFromURL){var gac=gigya.global.getCookie("gac_"+gigya._vars.apiKeyFromURL);if(gac){gigya.services.socialize.notifyLogin({authCode:gac,APIKey:gigya._vars.apiKeyFromURL,client_id:gigya._vars.apiKeyFromURL},{callback:function(){gigya.services.socialize.removeTokenCookie("gac_"+gigya._vars.apiKeyFromURL);gigya.services.socialize._APICallsQueue.stopAndRunQueue();}});gigya.services.socialize._APICallsQueue.start();}}};gigya.services.socialize._APICallsQueue={queue:[],isActive:false,start:function(){this.isActive=true;},stopAndRunQueue:function(){gigya.services.socialize._APICallsQueue.isActive=false;var q=gigya.services.socialize._APICallsQueue.queue;gigya.services.socialize._APICallsQueue.queue=[];for(var i=0;i<q.length;i++){gigya.services.socialize[q[i].apiName].apply(gigya.services.socialize[q[i].apiName],q[i].params);}}};gigya.services.socialize._preloadJS("gigya.services.socialize.plugins.simpleshare");gigya.services.socialize._defaultObjects={};gigya.services.socialize._defaultObjectsDef={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false"};gigya.services.socialize._createDefaultObject=function(type){var o={};var objectDef=gigya.services.socialize._defaultObjectsDef[type];if(objectDef.indexOf("+")!=-1){o=gigya.services.socialize._createDefaultObject(objectDef.split("+")[0]);objectDef=objectDef.split("+")[1];}arFields=objectDef.split(",");for(var i=0;i<arFields.length;i++){var defaultValue="";var arField=arFields[i].split("|");if(arField.length>1){try{defaultValue=gigya.global.JSONDeserialize(arField[1]);}catch(ex){}}o[arField[0]]=defaultValue;}return o;};gigya.services.socialize._createConstructor=function(name){return function(o){var defaultObject=gigya.services.socialize._defaultObjects[name];for(var p in defaultObject){this[p]=defaultObject[p];}if(typeof o=="object"){for(var p in o){this[p]=o[p];}}};};for(var def in gigya.services.socialize._defaultObjectsDef){gigya.services.socialize._defaultObjects[def]=gigya.services.socialize._createDefaultObject(def);gigya.services.socialize[def]=gigya.services.socialize._createConstructor(def);}gigya.services.socialize.addEventHandlers({listenerType:"component"},{onFBCLoaded:gigya.services.socialize._retryPendingFBReqs,onFBCRefreshed:gigya.services.socialize._retryPendingFBReqs});gigya.services.socialize._injectLoadPixel=function(){gigya.global.generateEvent("loadc",gigya._vars.apiKeyFromURL);};gigya.global.generateEvent=function(event,APIKey,cid,source,sourceData,params){if(!event){return;}var cimp=new Image(1,1);var newParams={sdk:"js",f:"re",e:event,ak:APIKey,cid:cid,source:source,sourceData:sourceData,now:(new Date()).getTime()};if(params){for(var paramName in params){newParams[paramName]=params[paramName];}}var url=gigya._vars.lastScriptProtocol+"://gscounters.gigya.com/gs/api.ashx?"+gigya.global.serializeToKeyValuePairs(newParams);cimp.src=url;};gigya.services.socialize._injectLoadPixel();if(typeof onGigyaServiceReady=="function"){onGigyaServiceReady("socialize");}gigya.services.socialize._injectFBC=function(){var fncLoadFB;if(typeof gigya.fbAppID!="undefined"){fncLoadFB=gigya.services.socialize.loadFB2;}if(typeof gigya.fbcAPIKey!="undefined"&&document.domain.indexOf(gigya.fbcDomain)!=-1){fncLoadFB=gigya.services.socialize.loadFBC;if(typeof gig_xdReceiverUrl=="undefined"){document.domain=gigya.fbcDomain;gig_xdReceiverUrl=gigya._vars.lastScriptProtocol+"://"+gigya.fbcXdURL;}}if(fncLoadFB){gigya.fbcInitializedTime=-1;window.setInterval("gigya.refreshFbcSession()",45*60*1000);if((!document.readyState&&document.body)||document.readyState=="loaded"||document.readyState=="complete"){fncLoadFB();}else{if(window.attachEvent){window.attachEvent("onload",fncLoadFB);}else{if(window.addEventListener){window.addEventListener("load",fncLoadFB,false);}}}}};gigya.global.getMousePosition=function(){if(document.body){var posx=0;var posy=0;var e=gigya.global.mousePosEvent;if(e.pageX||e.pageY){posx=e.pageX;posy=e.pageY;}else{if(e.clientX||e.clientY){posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop;}}return{x:posx,y:posy};}};gigya.global.mouseMove=function(e){if(!e){e=window.event;}gigya.global.mousePosEvent=e;};if(!gigya.global.addedMouseEvents){if(document.attachEvent){document.attachEvent("onmousemove",gigya.global.mouseMove);}else{if(document.addEventListener){document.addEventListener("mousemove",gigya.global.mouseMove,false);}}gigya.global.addedMouseEvents=true;}if(gigya.browser.isSafari&&gigya._vars.apiKeyFromURL){gigya.global._onGCID=function(e){if(e&&e.data&&e.data.indexOf("gcid=")==0){var gcid=e.data.split("gcid=")[1];if(gcid&&gcid!=-1){gigya.partnerSettings.gcid=e.data.split("gcid=")[1];}gigya.services.socialize._APICallsQueue.stopAndRunQueue();var ifr=gigya.global.ifrGcid;ifr.parentNode.removeChild(ifr);delete gigya.global.ifrGcid;window.removeEventListener("message",gigya.global._onGCID,false);delete gigya.global._onGCID;}gigya.services.socialize.migrateExistingToken();gigya.services.socialize._tryGacAuthCode();};gigya.services.socialize._APICallsQueue.start();window.addEventListener("message",gigya.global._onGCID,false);var ifr=document.createElement("iframe");var domain=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];ifr.src="https://cdns.gigya.com/gs/SafariGCIDProxy.htm?APIKey="+encodeURIComponent(gigya._vars.apiKeyFromURL)+"&domain="+encodeURIComponent(domain);ifr.style.width="30px";ifr.style.height="10px";ifr.style.position="absolute";ifr.style.top="-1000px";ifr.style.left="-1000px";gigya.global.ifrGcid=ifr;if(document.body){gigya.global.bodyAppendChild(ifr);}else{gigya.global.runWithDoc(function(){gigya.global.bodyAppendChild(ifr);});}}else{gigya.services.socialize.migrateExistingToken();gigya.services.socialize._tryGacAuthCode();}