!function(a,b){a.Ractive=b()}(this,function(){"use strict";function a(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function b(a){return a&&"unknown"!=typeof a.parentNode&&a.parentNode&&a.parentNode.removeChild(a),a}function c(a){return null!=a&&a.toString?a:""}function d(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];for(var e,f;f=c.shift();)for(e in f)Bg.call(f,e)&&(a[e]=f[e]);return a}function e(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];return c.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function f(a){return"[object Array]"===Cg.call(a)}function g(a){return Dg.test(Cg.call(a))}function h(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){return a&&"[object Object]"===Cg.call(a)}function k(a,b){return a.replace(/%s/g,function(){return b.shift()})}function l(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];throw a=k(a,c),new Error(a)}function m(){Dq.DEBUG&&yg.apply(null,arguments)}function n(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];a=k(a,c),zg(a,c)}function o(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];a=k(a,c),Fg[a]||(Fg[a]=!0,zg(a,c))}function p(){Dq.DEBUG&&n.apply(null,arguments)}function q(){Dq.DEBUG&&o.apply(null,arguments)}function r(a,b,c){var d=s(a,b,c);return d?d[a][c]:null}function s(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function t(a){return function(){return a}}function u(a){var b,c,d,e,f,g;for(b=a.split("."),(c=Og[b.length])||(c=v(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function v(a){var b,c,d,e,f,g,h,i,j="";if(!Og[a]){for(d=[];j.length<a;)j+=1;for(b=parseInt(j,2),e=function(a){return"1"===a},f=0;b>=f;f+=1){for(c=f.toString(2);c.length<a;)c="0"+c;for(i=[],h=c.length,g=0;h>g;g++)i.push(e(c[g]));d[f]=i}Og[a]=d}return Og[a]}function w(a,b,c,d){var e=a[b];if(!e||!e.equalsOrStartsWith(d)&&e.equalsOrStartsWith(c))return a[b]=e?e.replace(c,d):d,!0}function x(a){var b=a.slice(2);return"i"===a[1]&&i(b)?+b:b}function y(a){return null==a?a:(Rg.hasOwnProperty(a)||(Rg[a]=new Sg(a)),Rg[a])}function z(a,b){function c(b,c){var d,e,g;return c.isRoot?g=[].concat(Object.keys(a.viewmodel.data),Object.keys(a.viewmodel.mappings),Object.keys(a.viewmodel.computations)):(d=a.viewmodel.wrapped[c.str],e=d?d.get():a.viewmodel.get(c),g=e?Object.keys(e):null),g&&g.forEach(function(a){"_ractive"===a&&f(e)||b.push(c.join(a))}),b}var d,e,g;for(d=b.str.split("."),g=[Ug];e=d.shift();)"*"===e?g=g.reduce(c,[]):g[0]===Ug?g[0]=y(e):g=g.map(A(e));return g}function A(a){return function(b){return b.join(a)}}function B(a){return a?a.replace(Pg,".$1"):""}function C(a,b,c){if("string"!=typeof b||!i(c))throw new Error("Bad arguments");var d=void 0,e=void 0;if(/\*/.test(b))return e={},z(a,y(B(b))).forEach(function(b){var d=a.viewmodel.get(b);if(!i(d))throw new Error(Wg);e[b.str]=d+c}),a.set(e);if(d=a.get(b),!i(d))throw new Error(Wg);return a.set(b,+d+c)}function D(a,b){return Vg(this,a,void 0===b?1:+b)}function E(a){this.event=a,this.method="on"+a,this.deprecate=_g[a]}function F(a,b){var c=a.indexOf(b);-1===c&&a.push(b)}function G(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function H(a,b){var c;if(!f(a)||!f(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function I(a){return"string"==typeof a?[a]:void 0===a?[]:a}function J(a){return a[a.length-1]}function K(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function L(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function M(a){setTimeout(a,0)}function N(a,b){return function(){for(var c;c=a.shift();)c(b)}}function O(a,b,c,d){var e;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof ah)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return void d(f)}if("function"==typeof e){var g,h,i;h=function(b){g||(g=!0,O(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),void(g=!0)}}else c(b)}}function P(a,b,c){var d;return b=B(b),"~/"===b.substr(0,2)?(d=y(b.substring(2)),S(a,d.firstKey,c)):"."===b[0]?(d=Q(gh(c),b),d&&S(a,d.firstKey,c)):d=R(a,y(b),c),d}function Q(a,b){var c;if(void 0!=a&&"string"!=typeof a&&(a=a.str),"."===b)return y(a);if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),y(c.join("."))}return y(a?a+b.replace(/^\.\//,"."):b.replace(/^\.\/?/,""))}function R(a,b,c,d){var e,f,g,h,i;if(b.isRoot)return b;for(f=b.firstKey;c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e.join(b.str);return T(a.viewmodel,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,f=y(f),i=R(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function S(a,b){var c;!a.parent||a.isolated||T(a.viewmodel,b)||(b=y(b),(c=R(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function T(a,b){return""===b||b in a.data||b in a.computations||b in a.mappings}function U(a){a.teardown()}function V(a){a.unbind()}function W(a){a.unrender()}function X(a){a.cancel()}function Y(a){a.detach()}function Z(a){a.detachNodes()}function $(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function _(){for(var a,b,c;jh.ractives.length;)b=jh.ractives.pop(),c=b.viewmodel.applyChanges(),c&&nh.fire(b,c);for(aa(),a=0;a<jh.views.length;a+=1)jh.views[a].update();for(jh.views.length=0,a=0;a<jh.tasks.length;a+=1)jh.tasks[a]();return jh.tasks.length=0,jh.ractives.length?_():void 0}function aa(){var a,b,c,d;for(a=mh.length;a--;)b=mh[a],b.keypath?mh.splice(a,1):(c=hh(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),mh.splice(a,1));d&&d.forEach(ba)}function ba(a){a.item.resolve(a.keypath)}function ca(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(d=new fh(function(a){return e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(n={},c.step=null,c.complete=null,m=function(a){return function(b,c){n[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(o=m(f),c={easing:i,duration:j},k&&(c.step=o)),c.complete=l?o:Eg,h.push(da(this,f,a[f],c)));return q={easing:i,duration:j},k&&(q.step=function(a){return k(a,n)}),l&&d.then(function(a){return l(a,n)}),q.complete=e,p=da(this,null,null,q),h.push(p),d.stop=function(){for(var a;a=h.pop();)a.stop();p&&p.stop()},d}return c=c||{},c.complete&&d.then(c.complete),c.complete=e,g=da(this,a,b,c),d.stop=function(){return g.stop()},d}function da(a,b,c,d){var e,f,g,i;return b&&(b=y(B(b))),null!==b&&(i=a.viewmodel.get(b)),rh.abort(b,a),h(i,c)?(d.complete&&d.complete(d.to),vh):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,g=new th({keypath:b,from:i,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),rh.add(g),a._animations.push(g),g)}function ea(){return this.detached?this.detached:(this.el&&K(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),xh.fire(this),this.detached)}function fa(a){return this.el?this.fragment.find(a):null}function ga(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?lg(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0}function ha(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function ia(a){var b,c;for(b=[a],c=ha(a);c;)b.push(c),c=ha(c);return b}function ja(a,b,c,d){var e=[];return vg(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:zh}}),c?(vg(e,{cancel:{value:Ah},_root:{value:a},_sort:{value:Dh},_makeDirty:{value:Eh},_remove:{value:Fh},_dirty:{value:!1,writable:!0}}),e):e}function ka(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Gh(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function la(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Gh(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function ma(a){return this.fragment.findComponent(a)}function na(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function oa(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function pa(a,b){var c=void 0===arguments[2]?{}:arguments[2];if(b){c.event?c.event.name=b:c.event={name:b,_noArg:!0};var d=y(b).wildcardMatches();qa(a,d,c.event,c.args,!0)}}function qa(a,b,c,d){var e,f,g=void 0===arguments[4]?!1:arguments[4],h=!0;for(Nh.enqueue(a,c),f=b.length;f>=0;f--)e=a._subs[b[f]],e&&(h=ra(a,e,c,d)&&h);if(Nh.dequeue(a),a.parent&&h){if(g&&a.component){var i=a.component.name+"."+b[b.length-1];b=y(i).wildcardMatches(),c&&(c.component=a)}qa(a.parent,b,c,d)}}function ra(a,b,c,d){var e=null,f=!1;c&&!c._noArg&&(d=[c].concat(d)),b=b.slice();for(var g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function sa(a){var b={args:Array.prototype.slice.call(arguments,1)};Oh(this,a,b)}function ta(a){var b;return a=y(B(a)),b=this.viewmodel.get(a,Rh),void 0===b&&this.parent&&!this.isolated&&hh(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a)),b}function ua(b,c){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(b=a(b),c=a(c)||null,!b)throw new Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c),this.el=b,(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this),this.detached=null,va(this)}function va(a){Th.fire(a),a.findAllComponents("*").forEach(function(a){va(a.instance)})}function wa(a,b,c){var d,e;return a=y(B(a)),d=this.viewmodel.get(a),f(d)&&f(b)?(e=oh.start(this,!0),this.viewmodel.merge(a,d,b,c),oh.end(),e):this.set(a,b,c&&c.complete)}function xa(a,b){var c,d;return c=z(a,b),d={},c.forEach(function(b){d[b.str]=a.get(b.str)}),d}function ya(a,b,c,d){var e,f,g;b=y(B(b)),d=d||gi,b.isPattern?(e=new ei(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new Xh(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0;var h={cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}};return a._observers.push(h),h}function za(a,b,c){var d,e,f,g;if(j(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",fi(this,a,b,c);if(f=a.split(" "),1===f.length)return fi(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(fi(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function Aa(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function Ba(a,b){var c,d=this;if(a)c=a.split(" ").map(ji).filter(ki),c.forEach(function(a){var c,e;(c=d._subs[a])&&(b?(e=c.indexOf(b),-1!==e&&c.splice(e,1)):d._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function Ca(a,b){var c,d,e,f=this;if("object"==typeof a){c=[];for(d in a)a.hasOwnProperty(d)&&c.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=c.pop();)a.cancel()}}}return e=a.split(" ").map(ji).filter(ki),e.forEach(function(a){(f._subs[a]||(f._subs[a]=[])).push(b)}),{cancel:function(){return f.off(a,b)}}}function Da(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function Ea(a,b,c){var d,e,f,g,h,i,j=[];if(d=Fa(a,b,c),!d)return null;for(e=a.length,h=d.length-2-d[1],f=Math.min(e,d[0]),g=f+d[1],i=0;f>i;i+=1)j.push(i);for(;g>i;i+=1)j.push(-1);for(;e>i;i+=1)j.push(i+h);return 0!==h?j.touchedFrom=d[0]:j.touchedFrom=a.length,j}function Fa(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:[0,0];case"push":return[a.length,0].concat(c);case"shift":return[0,a.length?1:0];case"unshift":return[0,0].concat(c)}}function Ga(b,c){var d,e,f,g=this;if(f=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),d=oh.start(this,!0),oh.scheduleTask(function(){return Bi.fire(g)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(b=a(b)||this.el,c=a(c)||this.anchor,this.el=b,this.anchor=c,!this.append&&b){var h=b.__ractive_instances__;h&&h.length&&Ha(h),b.innerHTML=""}return this.cssId&&zi.apply(),b&&((e=b.__ractive_instances__)?e.push(this):b.__ractive_instances__=[this],c?b.insertBefore(this.fragment.render(),c):b.appendChild(this.fragment.render())),oh.end(),this.transitionsEnabled=f,d.then(function(){return Ci.fire(g)})}function Ha(a){a.splice(0,a.length).forEach(U)}function Ia(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Ja(a,b){var c,d,e;return d='[data-ractive-css~="{'+b+'}"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=Ii.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(La),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=Ki.test(a)?a.replace(Ki,d):a.replace(Hi,"").replace(Gi,function(a,b){var c,d;return Ji.test(b)?a:(c=b.split(",").map(Ka),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function Ka(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function La(a){return a.str}function Ma(a){a&&a.constructor!==Object&&("function"==typeof a||("object"!=typeof a?l("data option must be an object or a function, `"+a+"` is not valid"):p("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Na(a,b){Ma(b);var c="function"==typeof a,d="function"==typeof b;return b||c||(b={}),c||d?function(){var e=d?Oa(b,this):b,f=c?Oa(a,this):a;return Pa(e,f)}:Pa(b,a)}function Oa(a,b){var c=a.call(b);if(c)return"object"!=typeof c&&l("Data function must return an object"),c.constructor!==Object&&q("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),c}function Pa(a,b){if(a&&b){for(var c in b)c in a||(a[c]=b[c]);return a}return a||b}function Qa(a){var b=tg(Si);return b.parse=function(b,c){return Ra(b,c||a)},b}function Ra(a,b){if(!Qi)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Qi(a,b||this.options)}function Sa(a,b){var c;if(!$f){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(Ta(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return"textContent"in c?c.textContent:c.innerHTML}function Ta(a){return a&&"#"===a[0]}function Ua(a){return!("string"==typeof a)}function Va(a){return a.defaults&&(a=a.defaults),Ri.reduce(function(b,c){return b[c]=a[c],b},{})}function Wa(a){var b,c=a._config.template;if(c&&c.fn)return b=Xa(a,c.fn),b!==c.result?(c.result=b,b=Za(b,a)):void 0}function Xa(a,b){var c=Ya(Ti.getParseOptions(a));return b.call(a,c)}function Ya(a){var b=tg(Ti);return b.parse=function(b,c){return Ti.parse(b,c||a)},b}function Za(a,b){if("string"==typeof a)"#"===a[0]&&(a=Ti.fromId(a)),a=Qi(a,Ti.getParseOptions(b));else{if(void 0==a)throw new Error("The template cannot be "+a+".");if("number"!=typeof a.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(a.v!==fg)throw new Error("Mismatched template version (expected "+fg+", got "+a.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return a}function $a(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function _a(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a,e=ab(d._parent,b),f="_super"in this,g=this._super;return this._super=e,a=c.apply(this,arguments),f?this._super=g:delete this._super,a};return d._parent=a,d._method=c,d}function ab(a,b){var c,d;return b in a?(c=a[b],d="function"==typeof c?c:function(){return c}):d=Eg,d}function bb(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function cb(a,b,c){if(b in a){if(c in a)throw new Error(bb(b,c,!0));p(bb(b,c)),a[c]=a[b]}}function db(a){cb(a,"beforeInit","onconstruct"),cb(a,"init","onrender"),cb(a,"complete","oncomplete"),cb(a,"eventDefinitions","events"),f(a.adaptors)&&cb(a,"adaptors","adapt")}function eb(a,b,c,d){cj(d);for(var e in d)if(_i.hasOwnProperty(e)){var f=d[e];"el"!==e&&"function"==typeof f?p(""+e+" is a Ractive option that does not expect a function and will be ignored","init"===a?c:null):c[e]=f}aj.forEach(function(e){e[a](b,c,d)}),Ei[a](b,c,d),Vi[a](b,c,d),Ni[a](b,c,d),fb(b.prototype,c,d)}function fb(a,b,c){for(var d in c)if(!$i[d]&&c.hasOwnProperty(d)){var e=c[d];"function"==typeof e&&(e=bj(a,d,e)),b[d]=e}}function gb(a){var b={};return a.forEach(function(a){return b[a]=!0}),b}function hb(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function ib(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function jb(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function kb(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function lb(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function mb(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function nb(a){var b,c=a.index;return b=this.items[c+1]?this.items[c+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function ob(){return this.items&&this.items[0]?this.items[0].firstNode():null}function pb(a){var b;return(b=a.matchPattern(Yj))?{t:Ej,v:b}:null}function qb(a){var b;return(b=Wj(a))?_j.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=Xj(a))?b.v:(b=a.matchPattern(Zj))?b:void 0}function rb(a){var b,c,d;return a.allowWhitespace(),(b=$j(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function sb(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return sb(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function tb(){var a,b,c,d;return this.dirtyArgs&&(b=jk(this.items,a={},this.root._guid),c=ik("["+b+"]",a),d=c?c.value:[this.toString()],this.argsList=d,this.dirtyArgs=!1),this.argsList}function ub(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function vb(){var a,b,c,d;return this.dirtyValue&&(b=jk(this.items,a={},this.root._guid),c=ik(b,a),d=c?c.value:this.toString(),this.value=d,this.dirtyValue=!1),this.value}function wb(a){return a.replace(ek,function(a,b){var c;return c="#"!==b[0]?ck[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(xb(c)):a})}function xb(a){return a?10===a?32:128>a?a:159>=a?dk[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function yb(a){return a.replace(hk,"&amp;").replace(fk,"&lt;").replace(gk,"&gt;")}function zb(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Ab(){return this.value}function Bb(a,b){for(var c,d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function Cb(a,b){var c,d,e,f,g,h={},i=!1;for(b||(h.refs=c={});a;){if((g=a.owner)&&(d=g.indexRefs)){if(b&&(e=g.getIndexRef(b)))return h.ref={fragment:a,ref:e},h;if(!b)for(f in d)e=d[f],c[e.n]||(i=!0,c[e.n]={fragment:a,ref:e})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(h.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?h:void 0}function Db(a,b,c){var d;return"@"===b.charAt(0)?new wk(a,b,c):(d=zk(a.parentFragment,b))?new yk(a,d,c):new tk(a,b,c)}function Eb(a,b){var c,d;if(Dk[a])return Dk[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),Dk[a]=c,c}function Fb(a){return a.call()}function Gb(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return+c>=b.length?"_"+c:(d=b[c],void 0===d?"undefined":d.isSpecial?(e=d.value,"number"==typeof e?e:'"'+e+'"'):d.str)})}function Hb(a){return y("${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Ib(a){return void 0!==a&&"@"!==a[0]}function Jb(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){ug(a,d,{value:Ek.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return ug(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function Kb(a){return a.value}function Lb(a){return void 0!=a}function Mb(a){a.forceResolution()}function Nb(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var e,f,g;f=b.parentFragment,g=b.template,a.root=f.root,a.parentFragment=f,a.pElement=f.pElement,a.template=b.template,a.index=b.index||0,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(e=g.r)&&(a.resolver=Bk(a,e,c)),b.template.x&&(a.resolver=new Fk(a,f,b.template.x,d)),b.template.rx&&(a.resolver=new Jk(a,b.template.rx,d)),a.template.n!==Ij||a.hasOwnProperty("value")||a.setValue(void 0)}function Ob(a){var b,c,d;return a&&a.isSpecial?(this.keypath=a,void this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),void(b&&(d=this.twowayBinding)&&d.rebound()))}function Pb(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Qb(){this.parentFragment.bubble()}function Rb(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Sb(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function Tb(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function Ub(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function Vb(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function Wb(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function Xb(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function Yb(a){var b,c,d,e,f,g,h,i=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Jj){if(this.shuffling=!0,oh.scheduleTask(function(){return i.shuffling=!1}),b=this.parentFragment,f=[],a.forEach(function(a,b){var d,e,g,h,j;return a===b?void(f[a]=i.fragments[b]):(d=i.fragments[b],void 0===c&&(c=b),-1===a?(i.fragmentsToUnrender.push(d),void d.unbind()):(e=a-b,g=i.keypath.join(b),h=i.keypath.join(a),d.index=a,(j=d.registeredIndexRefs)&&j.forEach(Zb),d.rebind(g,h),void(f[a]=d)))}),e=this.root.viewmodel.get(this.keypath).length,void 0===c){if(this.length===e)return;c=this.length}for(this.length=this.fragments.length=e,this.rendered&&oh.addView(this),g={template:this.template.f,root:this.root,owner:this},d=c;e>d;d+=1)h=f[d],h||this.fragmentsToCreate.push(d),this.fragments[d]=h}}function Zb(a){a.rebind("","")}function $b(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function _b(a){var b,c,d=this;this.updating||(this.updating=!0,this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),this.fragmentsToCreate.length?(c={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var b;c.context=d.keypath.join(a),c.index=a,b=new bq(c),d.fragmentsToRender.push(d.fragments[a]=b)}),this.fragmentsToCreate.length=0):bc(this,a)&&(this.bubble(),this.rendered&&oh.addView(this)),this.value=a,this.updating=!1)}function ac(a,b,c){if(b===Jj&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function bc(a,b){var c={template:a.template.f||[],root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.hasContext=!0,a.subtype)switch(a.subtype){case Hj:return a.hasContext=!1,gc(a,b,!1,c);case Ij:return a.hasContext=!1,gc(a,b,!0,c);case Kj:return fc(a,c);case Lj:return ec(a,b,c);case Jj:if(j(b))return ac(a,a.subtype,!0),dc(a,b,c)}return a.ordered=!!g(b),a.ordered?(ac(a,Jj,!1),cc(a,b,c)):j(b)||"function"==typeof b?a.template.i?(ac(a,Jj,!0),dc(a,b,c)):(ac(a,Kj,!1),fc(a,c)):(ac(a,Hj,!1),a.hasContext=!1,gc(a,b,!1,c))}function cc(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(V);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath.join(d),c.index=d,f=new bq(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function dc(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(jc));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=a.keypath.join(d),c.key=d,c.index=e++,g=new bq(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function ec(a,b,c){return b?fc(a,c):hc(a)}function fc(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new bq(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function gc(a,b,c,d){var e,f,h,i,k;if(f=g(b)&&0===b.length,h=!1,!g(b)&&j(b)){h=!0;for(k in b){h=!1;break}}return e=c?f||h||!b:b&&!f&&!h,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(V),!0):void 0:(d.index=0,i=new bq(d),a.fragmentsToRender.push(a.fragments[0]=i),a.length=1,!0):hc(a)}function hc(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(ic),a.fragmentsToUnrender.forEach(V),a.length=a.fragmentsToRender.length=0,!0):void 0}function ic(a){return a.rendered}function jc(a){a.rebind("","")}function kc(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function lc(){var a=this;this.fragments.forEach(V),this.fragmentsToRender.forEach(function(b){return K(a.fragments,b)}),this.fragmentsToRender=[],qk.call(this),this.length=0,this.unbound=!0}function mc(a){this.fragments.forEach(a?nc:oc),this.renderedFragments=[],this.rendered=!1}function nc(a){a.unrender(!0)}function oc(a){a.unrender(!1)}function pc(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function qc(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function rc(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(lg(d,a))return d;if(e=d.querySelector(a))return e}return null}function sc(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(lg(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function tc(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function uc(a){return ml[a]||(ml[a]=kg(a))}function vc(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=L(a.node.options).filter(wc),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function wc(a){return a.selected}function xc(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=nl(this.value,this.parentFragment.getNode(),this.docFrag),ol(this.pElement),this.rendered=!0,this.docFrag}function yc(a){var b;(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&oh.addView(this))}function zc(){return void 0!=this.value?wb(""+this.value):""}function Ac(a){this.rendered&&a&&(this.nodes.forEach(b),this.rendered=!1)}function Bc(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),
this.nodes=nl(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),ol(this.pElement)}}function Cc(){var a,b=this.node;return b?((a=b.parentNode)&&a.removeChild(b),b):void 0}function Dc(){return null}function Ec(){return this.node}function Fc(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function Gc(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();h(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&oh.addView(this))}function Hc(a){var b=a.fragment.items;if(1===b.length)return b[0].type===uj?b[0]:void 0}function Ic(a){return this.type=Aj,this.element=a.element,this.root=a.root,Ol(this,a.name),this.isBoolean=ak.test(this.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new bq({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Pl(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:a.value||"")}function Jc(a,b){this.fragment&&this.fragment.rebind(a,b)}function Kc(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==cg.html||(b=Tl[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===b&&(a._ractive.value=this.value)),this.rendered=!0,this.update()}function Lc(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;if(("value"!==b||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==b||void 0===this.element.getAttribute("contenteditable"))){if("name"===b&&"input"===this.element.name&&e)return"name={{"+(e.keypath.str||e.ref)+"}}";if(this.isBoolean)return d?b:"";if(f){if(1===f.items.length&&null==f.items[0].value)return"";d=f.toString()}return c&&(b=c+":"+b),d?b+'="'+Mc(d)+'"':b}}function Mc(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Nc(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Oc(){var a,b,c,d,e=this.value;if(!this.locked)for(this.node._ractive.value=e,a=this.node.options,d=a.length;d--;)if(b=a[d],c=b._ractive?b._ractive.value:b.value,c==e){b.selected=!0;break}}function Pc(){var a,b,c,d,e=this.value;for(f(e)||(e=[e]),a=this.node.options,b=a.length;b--;)c=a[b],d=c._ractive?c._ractive.value:c.value,c.selected=G(e,d)}function Qc(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Rc(){var a,b,c,d,e=this.node;if(a=e.checked,e.value=this.element.getAttribute("value"),e.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!e.checked&&this.element.binding&&(c=this.element.binding.siblings,d=c.length)){for(;d--;){if(b=c[d],!b.element.node)return;if(b.element.node.checked)return oh.addRactive(b.root),b.handleChange()}this.root.viewmodel.set(b.keypath,void 0)}}function Sc(){var a,b,c=this,d=c.element,e=c.node,g=c.value,h=d.binding;if(a=d.getAttribute("value"),f(g)){for(b=g.length;b--;)if(a==g[b])return void(h.isChecked=e.checked=!0);h.isChecked=e.checked=!1}else h.isChecked=e.checked=g==a}function Tc(){this.node.className=c(this.value)}function Uc(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function Vc(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function Wc(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function Xc(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function Yc(){this.locked||(this.node[this.propertyName]=this.value)}function Zc(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):this.isBoolean?e?b.setAttribute(d,""):b.removeAttribute(d):null==e?b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function $c(){var a,b,c=this,d=c.name,e=c.element,f=c.node;"id"===d?b=am:"value"===d?"select"===e.name&&"value"===d?b=e.getAttribute("multiple")?Xl:Wl:"textarea"===e.name?b=dm:null!=e.getAttribute("contenteditable")?b=cm:"input"===e.name&&(a=e.getAttribute("type"),b="file"===a?Eg:"radio"===a&&e.binding&&"name"===e.binding.name?Zl:dm):this.isTwoway&&"name"===d?"radio"===f.type?b=Yl:"checkbox"===f.type&&(b=$l):"style"===d&&f.style.setAttribute?b=bm:"class"!==d||f.namespaceURI&&f.namespaceURI!==cg.html?this.useProperty&&(b=em):b=_l,b||(b=fm),this.update=b,this.update()}function _c(a,b){var c=b?"svg":"div";return im.innerHTML="<"+c+" "+a+"></"+c+">",L(im.childNodes[0].attributes)}function ad(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function bd(a){for(;a=a.parent;)if("form"===a.name)return a}function cd(){this._ractive.binding.handleChange()}function dd(){var a;rm.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function ed(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&rm.call(b),a._timeout=void 0},a.element.lazy)}function fd(a,b,c){var d=a+b+c;return wm[d]||(wm[d]=[])}function gd(a){return a.isChecked}function hd(a){return a.element.getAttribute("value")}function id(a){var b,c,d,e,f,g=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||g.contenteditable&&jd(g.contenteditable))&&jd(g.value)?c=um:"input"===a.name?(b=a.getAttribute("type"),"radio"===b||"checkbox"===b?(d=jd(g.name),e=jd(g.checked),d&&e&&p("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:a.root}),d?c="radio"===b?Am:Cm:e&&(c="radio"===b?ym:Em)):"file"===b&&jd(g.value)?c=Km:jd(g.value)&&(c="number"===b||"range"===b?Lm:sm)):"select"===a.name&&jd(g.value)?c=a.getAttribute("multiple")?Im:Gm:"textarea"===a.name&&jd(g.value)&&(c=sm),c&&(f=new c(a))&&f.keypath?f:void 0}function jd(a){return a&&a.isBindable}function kd(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function ld(a){Oh(this.root,this.getAction(),{event:a})}function md(){return this.action.toString().trim()}function nd(a,b,c){var d,e,f,g=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&(l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0),c.m?(e=c.a.r,this.method=c.m,this.keypaths=[],this.fn=Ck(c.a.s,e.length),this.parentFragment=a.parentFragment,f=this.root,this.refResolvers=[],e.forEach(function(a,b){var c=void 0;(c=Rm.exec(a))?g.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:g.refResolvers.push(Bk(g,a,function(a){return g.resolve(b,a)}))}),this.fire=od):(d=c.n||c,"string"!=typeof d&&(d=new bq({template:d,root:this.root,owner:this})),this.action=d,c.d?(this.dynamicParams=new bq({template:c.d,root:this.root,owner:this.element}),this.fire=qd):c.a&&(this.params=c.a,this.fire=pd))}function od(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),Nh.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),Nh.dequeue(b)}function pd(a){Oh(this.root,this.getAction(),{event:a,args:this.params})}function qd(a){var b=this.dynamicParams.getArgsList();"string"==typeof b&&(b=b.substr(1,b.length-2)),Oh(this.root,this.getAction(),{event:a,args:b})}function rd(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=zk(c.element.parentFragment))&&(e=zk.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})}function sd(){var a,b=this.name;if(!this.invalid){if(a=r("events",this.root,b))this.custom=a(this.node,td(b));else{if(!("on"+b in this.node||window&&"on"+b in window||_f))return void(Vm[b]||q(Ig(b,"event"),{node:this.node}));this.node.addEventListener(b,Sm,!1)}this.hasListener=!0}}function td(a){return Um[a]||(Um[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath.str,b.context=c.root.viewmodel.get(c.keypath),c.events[a].fire(b)}),Um[a]}function ud(a,b){function c(c){c&&c.rebind(a,b)}var d;return this.method?(d=this.element.parentFragment,void this.refResolvers.forEach(c)):("string"!=typeof this.action&&c(this.action),void(this.dynamicParams&&c(this.dynamicParams)))}function vd(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function wd(a,b){this.keypaths[a]=b}function xd(){return this.method?void this.refResolvers.forEach(V):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function yd(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Sm,!1),this.hasListener=!1}function zd(){var a=this;this.dirty||(this.dirty=!0,oh.scheduleTask(function(){Ad(a),a.dirty=!1})),this.parentFragment.bubble()}function Ad(a){var b,c,d,e,f;b=a.node,b&&(e=L(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?Bd(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function Bd(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function Cd(a,b){a.select=Ed(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function Dd(a){a.select&&K(a.select.options,a)}function Ed(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function Fd(a){var b,c,d,e,f,g,h;this.type=xj,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=Nl(c.e),"option"===this.name&&Cd(this,c),"select"===this.name&&(this.options=[],this.bubble=zd),"form"===this.name&&(this.formBindings=[]),h=Ll(this,c),this.attributes=km(this,c.a),this.conditionalAttributes=nm(this,c.m),c.f&&(this.fragment=new bq({template:c.f,root:d,owner:this,pElement:this,cssIds:null})),g=d.twoway,h.twoway===!1?g=!1:h.twoway===!0&&(g=!0),this.twoway=g,this.lazy=h.lazy,g&&(e=Mm(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath.str]||(this.root._twowayBindings[e.keypath.str]=[]),f.push(e)),c.v&&(this.eventHandlers=bn(this,c.v)),c.o&&(this.decorator=new gn(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function Gd(a,b){function c(c){c.rebind(a,b)}var d,e,f,g;if(this.attributes&&this.attributes.forEach(c),this.conditionalAttributes&&this.conditionalAttributes.forEach(c),this.eventHandlers&&this.eventHandlers.forEach(c),this.decorator&&c(this.decorator),this.fragment&&c(this.fragment),f=this.liveQueries)for(g=this.root,d=f.length;d--;)f[d]._makeDirty();this.node&&(e=this.node._ractive)&&w(e,"keypath",a,b)}function Hd(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function Id(a){a.node.addEventListener("reset",Kd,!1)}function Jd(a){a.node.removeEventListener("reset",Kd,!1)}function Kd(){var a=this._ractive.proxy;oh.start(),a.formBindings.forEach(Ld),oh.end()}function Ld(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Md(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new bq({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new bq({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind()),this._fn=r("transitions",d,e),this._fn||q(Ig(e,"transition"),{ractive:this.root}))}function Nd(a){return a}function Od(){Ln.hidden=document[Hn]}function Pd(){Ln.hidden=!0}function Qd(){Ln.hidden=!1}function Rd(){var a,b,c,d=this;return a=this.node=this.element.node,b=a.getAttribute("style"),this.complete=function(e){c||(!e&&d.isIntro&&Sd(a,b),a._ractive.transition=null,d._manager.remove(d),c=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Sd(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function Td(){var a,b,c,d=this,e=this.root;return a=Ud(this),b=this.node=kg(this.name,a),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" ")),ug(this.node,"_ractive",{value:{proxy:this,keypath:gh(this.parentFragment),events:tg(null),root:e}}),this.attributes.forEach(function(a){return a.render(b)}),this.conditionalAttributes.forEach(function(a){return a.render(b)}),this.fragment&&("script"===this.name?(this.bubble=Wn,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Eg):"style"===this.name?(this.bubble=Vn,this.bubble(),this.fragment.unrender=Eg):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Eg:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),"option"===this.name&&Vd(this),"img"===this.name?Hd(this):"form"===this.name?Id(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&oh.scheduleTask(function(){d.decorator.torndown||d.decorator.init()},!0),e.transitionsEnabled&&this.intro&&(c=new Xn(this,this.intro,!0),oh.registerTransition(c),oh.scheduleTask(function(){return c.start()},!0),this.transition=c),this.node.autofocus&&oh.scheduleTask(function(){return d.node.focus()},!0),Wd(this),this.node}function Ud(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?cg.svg:(d=a.parent)?"foreignObject"===d.name?cg.html:d.node.namespaceURI:a.root.el.namespaceURI}function Vd(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&f(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function Wd(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function Xd(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&f(c))for(d=c.length;d--;)if(c[d]==b)return!0}function Yd(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator&&d.value===e.interpolator.value?!0:void 0}function Zd(a){var b=a.toString();return b?" "+b:""}function $d(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(V),"option"===this.name&&Dd(this),this.attributes.forEach(V),this.conditionalAttributes.forEach(V)}function _d(a){var b,c,d;(d=this.transition)&&d.complete(),"option"===this.name?this.detach():a&&oh.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath.str],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(W),this.decorator&&oh.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(d=new Xn(this,this.outro,!1),oh.registerTransition(d),oh.scheduleTask(function(){return d.start()})),this.liveQueries&&ae(this),"form"===this.name&&Jd(this)}function ae(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function be(a,b){var c=eo.exec(b)[0];return null===a||c.length<a.length?c:a}function ce(a,b,c){var d;if(d=de(a,b,c||{}))return d;if(d=Ti.fromId(b,{noThrow:!0})){d=fo(d);var e=Ti.parse(d,Ti.getParseOptions(a));return a.partials[b]=e.t}}function de(a,b,c){var d=void 0,e=ge(b,c.owner);if(e)return e;var f=s("partials",a,b);if(f){if(e=f.partials[b],"function"==typeof e&&(d=e.bind(f),d.isOwner=f.partials.hasOwnProperty(b),e=d.call(a,Ti)),!e&&""!==e)return void p(Hg,b,"partial","partial",{ractive:a});if(!Ti.isParsed(e)){var g=Ti.parse(e,Ti.getParseOptions(f));g.p&&p("Partials ({{>%s}}) cannot contain nested inline partials",b,{ractive:a});var h=d?f:ee(f,b);h.partials[b]=e=g.t}return d&&(e._fn=d),e.v?e.t:e}}function ee(a,b){return a.partials.hasOwnProperty(b)?a:fe(a.constructor,b)}function fe(a,b){return a?a.partials.hasOwnProperty(b)?a:fe(a._Parent,b):void 0}function ge(a,b){if(b){if(b.template&&b.template.p&&b.template.p[a])return b.template.p[a];if(b.parentFragment&&b.parentFragment.owner)return ge(a,b.parentFragment.owner)}}function he(a,b){var c,d=s("components",a,b);if(d&&(c=d.components[b],!c._Parent)){var e=c.bind(d);if(e.isOwner=d.components.hasOwnProperty(b),c=e(),!c)return void p(Hg,b,"component","component",{ractive:a});"string"==typeof c&&(c=he(a,c)),c._fn=e,d.components[b]=c}return c}function ie(){var a=this.instance.fragment.detach();return qo.fire(this.instance),a}function je(a){return this.instance.fragment.find(a)}function ke(a,b){return this.instance.fragment.findAll(a,b)}function le(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function me(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function ne(){return this.parentFragment.findNextNode(this)}function oe(){return this.rendered?this.instance.fragment.firstNode():null}function pe(a,b,c){function d(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,oh.start(d),d.viewmodel.mark(c),oh.end(),a.updating=!1)}var e,f,g,h,i,j;if(e=a.obj,f=a.prop,c&&!c.configurable){if("length"===f)return;throw new Error('Cannot use magic mode with property "'+f+'" - object is not configurable')}c&&(g=c.get,h=c.set),i=g||function(){return b},j=function(a){h&&h(a),b=g?g():a,j._ractiveWrappers.forEach(d)},j._ractiveWrappers=[a],Object.defineProperty(e,f,{get:i,set:j,enumerable:!0,configurable:!0})}function qe(a,b){var c,d,e,f;if(this.adaptors)for(c=this.adaptors.length,d=0;c>d;d+=1)if(e=this.adaptors[d],e.filter(b,a,this.ractive))return f=this.wrapped[a]=e.wrap(this.ractive,b,a,se(a)),void(f.value=b)}function re(a,b){var c,d={};if(!b)return a;b+=".";for(c in a)a.hasOwnProperty(c)&&(d[b+c]=a[c]);return d}function se(a){var b;return Oo[a]||(b=a?a+".":"",Oo[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?re(c,a):c:void 0}),Oo[a]}function te(a){var b,c,d=[Ug];for(b=a.length;b--;)for(c=a[b].parent;c&&!c.isRoot;)-1===a.indexOf(c)&&F(d,c),c=c.parent;return d}function ue(a,b,c){var d;we(a,b),c||(d=b.wildcardMatches(),d.forEach(function(c){ve(a,c,b)}))}function ve(a,b,c){var d,e,f;b=b.str||b,d=a.depsMap.patternObservers,e=d&&d[b],e&&e.forEach(function(b){f=c.join(b.lastKey),we(a,f),ve(a,b,f)})}function we(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function xe(){function a(a){var d=a.key;a.viewmodel===g?(g.clearCache(d.str),a.invalidate(),c.push(d),b(d)):a.viewmodel.mark(d)}function b(c){var d,e;g.noCascade.hasOwnProperty(c.str)||((e=g.deps.computed[c.str])&&e.forEach(a),(d=g.depsMap.computed[c.str])&&d.forEach(b))}var c,d,e,f=this,g=this,h={};return c=this.changes,c.length?(c.slice().forEach(b),d=Po(c),d.forEach(function(b){var d;-1===c.indexOf(b)&&(d=g.deps.computed[b.str])&&d.forEach(a)}),this.changes=[],this.patternObservers.length&&(d.forEach(function(a){return Qo(f,a,!0)}),c.forEach(function(a){return Qo(f,a)})),this.deps.observers&&(d.forEach(function(a){return ye(f,null,a,"observers")}),Ae(this,c,"observers")),this.deps["default"]&&(e=[],d.forEach(function(a){return ye(f,e,a,"default")}),e.length&&ze(this,e,c),Ae(this,c,"default")),c.forEach(function(a){h[a.str]=f.get(a)}),this.implicitChanges={},this.noCascade={},h):void 0}function ye(a,b,c,d){var e,f;(e=Be(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function ze(a,b,c){b.forEach(function(b){for(var d=!1,e=0,f=c.length,g=[];f>e;){var h=c[e];if(h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Ae(a,b,c){function d(a){a.forEach(e),a.forEach(f)}function e(b){var d=Be(a,b,c);d&&h.push({keypath:b,deps:d})}function f(b){var e;(e=a.depsMap[c][b.str])&&d(e)}function g(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var h=[];d(b),h.forEach(g)}function Be(a,b,c){var d=a.deps[c];return d?d[b.str]:null}function Ce(){this.captureGroups.push([])}function De(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Ee(a,b){var c=b.firstKey;return!(c in a.data||c in a.computations||c in a.mappings)}function Fe(a,b){var c=new Xo(a,b);return this.ready&&c.init(this),this.computations[a.str]=c}function Ge(a,b){var c,d,e,f,g,h=this.cache,i=a.str;if(b=b||_o,b.capture&&(f=J(this.captureGroups))&&(~f.indexOf(a)||f.push(a)),Bg.call(this.mappings,a.firstKey))return this.mappings[a.firstKey].get(a,b);if(a.isSpecial)return a.value;if(void 0===h[i]?((d=this.computations[i])&&!d.bypass?(c=d.get(),this.adapt(i,c)):(e=this.wrapped[i])?c=e.value:a.isRoot?(this.adapt("",this.data),c=this.data):c=He(this,a),h[i]=c):c=h[i],!b.noUnwrap&&(e=this.wrapped[i])&&(c=e.get()),a.isRoot&&b.fullRootGet)for(g in this.mappings)c[g]=this.mappings[g].getValue();return c===Zo?void 0:c}function He(a,b){var c,d,e,f;return c=a.get(b.parent),(f=a.wrapped[b.parent.str])&&(c=f.get()),null!==c&&void 0!==c?((d=a.cacheMap[b.parent.str])?-1===d.indexOf(b.str)&&d.push(b.str):a.cacheMap[b.parent.str]=[b.str],"object"!=typeof c||b.lastKey in c?(e=c[b.lastKey],a.adapt(b.str,e,!1),a.cache[b.str]=e,e):a.cache[b.str]=Zo):void 0}function Ie(){var a;for(a in this.computations)this.computations[a].init(this)}function Je(a,b){var c=this.mappings[a.str]=new cp(a,b);return c.initViewmodel(this),c}function Ke(a,b){var c,d=a.str;b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0)),(c=this.computations[d])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a);var e=b?b.keepExistingWrapper:!1;this.clearCache(d,e),this.ready&&this.onchange()}function Le(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=Ne(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){p('merge(): "%s" comparison failed. Falling back to identity checking',a),e=b,f=c}}else e=b,f=c;h=ep(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function Me(a){return JSON.stringify(a)}function Ne(a){if(a===!0)return Me;if("string"==typeof a)return gp[a]||(gp[a]=function(b){return b[a]}),gp[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Oe(a,b){var c,d,e,f=void 0===arguments[2]?"default":arguments[2];b.isStatic||((c=this.mappings[a.firstKey])?c.register(a,b,f):(d=this.deps[f]||(this.deps[f]={}),e=d[a.str]||(d[a.str]=[]),e.push(b),this.depsMap[f]||(this.depsMap[f]={}),a.isRoot||Pe(this,a,f)))}function Pe(a,b,c){for(var d,e,f;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str]||(d[b.parent.str]=[]),f=b.str,void 0===e["_"+f]&&(e["_"+f]=0,e.push(b)),e["_"+f]+=1,b=b.parent}function Qe(){return this.captureGroups.pop()}function Re(a){this.data=a,this.clearCache("")}function Se(a,b){var c,d,e,f,g=void 0===arguments[2]?{}:arguments[2];if(!g.noMapping&&(c=this.mappings[a.firstKey]))return c.set(a,b);if(d=this.computations[a.str]){if(d.setting)return;d.set(b),b=d.get()}h(this.cache[a.str],b)||(e=this.wrapped[a.str],e&&e.reset&&(f=e.reset(b)!==!1,f&&(b=e.get())),d||f||Te(this,a,b),g.silent?this.clearCache(a.str):this.mark(a))}function Te(a,b,c){var d,e,f,g;f=function(){d.set?d.set(b.lastKey,c):(e=d.get(),g())},g=function(){e||(e=Io(b.lastKey),a.set(b.parent,e,{silent:!0})),e[b.lastKey]=c},d=a.wrapped[b.parent.str],d?f():(e=a.get(b.parent),(d=a.wrapped[b.parent.str])?f():g())}function Ue(a,b,c){var d,e,f,g=this;if(e=c.length,c.forEach(function(b,c){-1===b&&g.mark(a.join(c),np)}),this.set(a,b,{silent:!0}),(d=this.deps["default"][a.str])&&d.filter(Ve).forEach(function(a){return a.shuffle(c,b)}),e!==b.length){for(this.mark(a.join("length"),mp),f=c.touchedFrom;f<b.length;f+=1)this.mark(a.join(f));for(f=b.length;e>f;f+=1)this.mark(a.join(f),np)}}function Ve(a){return"function"==typeof a.shuffle}function We(){var a,b=this;for(Object.keys(this.cache).forEach(function(a){return b.clearCache(a)});a=this.unresolvedImplicitDependencies.pop();)a.teardown()}function Xe(a,b){var c,d,e,f=void 0===arguments[2]?"default":arguments[2];if(!b.isStatic){if(c=this.mappings[a.firstKey])return c.unregister(a,b,f);if(d=this.deps[f][a.str],e=d.indexOf(b),-1===e)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");d.splice(e,1),a.isRoot||Ye(this,a,f)}}function Ye(a,b,c){for(var d,e;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str],e["_"+b.str]-=1,e["_"+b.str]||(K(e,b),e["_"+b.str]=void 0),b=b.parent}function Ze(a){this.hook=new bh(a),this.inProcess={},this.queue={}}function $e(a,b){return a[b._guid]||(a[b._guid]=[])}function _e(a,b){var c=$e(a.queue,b);for(a.hook.fire(b);c.length;)_e(a,c.shift());delete a.queue[b._guid]}function af(a,b){var c,d={};for(c in b)d[c]=bf(a,c,b[c]);return d}function bf(a,b,c){var d,e;return"function"==typeof c&&(d=df(c,a)),"string"==typeof c&&(d=cf(a,c)),"object"==typeof c&&("string"==typeof c.get?d=cf(a,c.get):"function"==typeof c.get?d=df(c.get,a):l("`%s` computation must have a `get()` method",b),"function"==typeof c.set&&(e=df(c.set,a))),{getter:d,setter:e}}function cf(a,b){var c,d,e;return c="return ("+b.replace(up,function(a,b){return d=!0,'__ractive.get("'+b+'")'})+");",d&&(c="var __ractive = this; "+c),e=new Function(c),d?e.bind(a):e}function df(a,b){return/this/.test(a.toString())?a.bind(b):a}function ef(b){var c,e,f=void 0===arguments[1]?{}:arguments[1],g=void 0===arguments[2]?{}:arguments[2];if(Dq.DEBUG&&Ag(),hf(b,g),ug(b,"data",{get:jf}),vp.fire(b,f),zp.forEach(function(a){b[a]=d(tg(b.constructor[a]||null),f[a])}),e=new rp({adapt:ff(b,b.adapt,f),data:Pi.init(b.constructor,b,f),computed:tp(b,d(tg(b.constructor.prototype.computed),f.computed)),mappings:g.mappings,ractive:b,onchange:function(){return oh.addRactive(b)}}),b.viewmodel=e,e.init(),fj.init(b.constructor,b,f),wp.fire(b),xp.begin(b),b.template){var h=void 0;(g.cssIds||b.cssId)&&(h=g.cssIds?g.cssIds.slice():[],b.cssId&&h.push(b.cssId)),b.fragment=new bq({template:b.template,root:b,owner:b,cssIds:h})}if(xp.end(b),c=a(b.el)){var i=b.render(c,b.append);Dq.DEBUG_PROMISES&&i["catch"](function(a){throw q("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),p("An error happened during rendering",{ractive:b}),a.stack&&m(a.stack),a})}}function ff(a,b,c){function d(b){return"string"==typeof b&&(b=r("adaptors",a,b),b||l(Ig(b,"adaptor"))),b}var e,f,g;if(b=b.map(d),e=I(c.adapt).map(d),e=gf(b,e),f="magic"in c?c.magic:a.magic,g="modifyArrays"in c?c.modifyArrays:a.modifyArrays,f){if(!bg)throw new Error("Getters and setters (magic mode) are not supported in this browser");g&&e.push(Mo),e.push(Lo)}return g&&e.push(Go),e}function gf(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function hf(a,b){a._guid="r-"+yp++,a._subs=tg(null),a._config={},a._twowayBindings=tg(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],a._observers=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function jf(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function kf(a,b,c){this.parentFragment=a.parentFragment,this.callback=c,this.fragment=new bq({template:b,root:a.root,owner:this}),this.update()}function lf(a,b,c){var d;return b.r?d=Bk(a,b.r,c):b.x?d=new Fk(a,a.parentFragment,b.x,c):b.rx&&(d=new Jk(a,b.rx,c)),d}function mf(a){return 1===a.length&&a[0].t===uj}function nf(a,b){var c;for(c in b)b.hasOwnProperty(c)&&of(a.instance,a.root,c,b[c])}function of(a,b,c,d){"string"!=typeof d&&l("Components currently only support simple events - you cannot include arguments. Sorry!"),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),Oh(b,d,{event:a,args:c}),!1})}function pf(a,b){var c,d;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=Bj,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],Cp(this,b,a.template.a,a.template.f,a.template.p),Dp(this,a.template.v),(a.template.t0||a.template.t1||a.template.t2||a.template.o)&&p('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),Ep(this)}function qf(a,b){function c(c){c.rebind(a,b)}var d;this.resolvers.forEach(c);for(var e in this.yielders)this.yielders[e][0]&&c(this.yielders[e][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()}function rf(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function sf(){return this.instance.fragment.toString()}function tf(){var a=this.instance;this.resolvers.forEach(V),uf(this),a._observers.forEach(X),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&K(a.el.__ractive_instances__,a),Kp.fire(a)}function uf(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function vf(a){this.shouldDestroy=a,this.instance.unrender()}function wf(a){var b=this;this.owner=a.owner,this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null,this.items=a.template.map(function(c,d){return xf({parentFragment:b,pElement:a.pElement,template:c,index:d})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function xf(a){if("string"==typeof a.template)return new pk(a);switch(a.template.t){case Cj:return new Rp(a);case uj:return new Pk(a);case wj:return new hl(a);case vj:return new zl(a);case xj:var b=void 0;return(b=oo(a.parentFragment.root,a.template.e))?new Np(a,b):new bo(a);case yj:return new no(a);case zj:return new Pp(a);case Dj:return new Tp(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function yf(a,b){(!this.owner||this.owner.hasContext)&&w(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function zf(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){
a.appendChild(b.render())})),this.rendered=!0,a}function Af(a){return this.items?this.items.map(a?Cf:Bf).join(""):""}function Bf(a){return a.toString()}function Cf(a){return a.toString(!0)}function Df(){this.bound&&(this.items.forEach(Ef),this.bound=!1)}function Ef(a){a.unbind&&a.unbind()}function Ff(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Gf(a){var b,c,d,e,f;if(a=a||{},"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((c=this.viewmodel.wrapped[""])&&c.reset?c.reset(a)===!1&&this.viewmodel.reset(a):this.viewmodel.reset(a),d=fj.reset(this),e=d.length;e--;)if(dq.indexOf(d[e])>-1){f=!0;break}if(f){var g=void 0;this.viewmodel.mark(Ug),(g=this.component)&&(g.shouldDestroy=!0),this.unrender(),g&&(g.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new bq({template:this.template,root:this,owner:this})),b=this.render(this.el,this.anchor)}else b=oh.start(this,!0),this.viewmodel.mark(Ug),oh.end();return eq.fire(this,a),b}function Hf(a){var b,c;Vi.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new bq({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function If(a,b){var c,d;if(d=oh.start(this,!0),j(a)){c=a;for(a in c)c.hasOwnProperty(a)&&(b=c[a],Jf(this,a,b))}else Jf(this,a,b);return oh.end(),d}function Jf(a,b,c){b=y(B(b)),b.isPattern?z(a,b).forEach(function(b){a.viewmodel.set(b,c)}):a.viewmodel.set(b,c)}function Kf(a,b){return Vg(this,a,void 0===b?-1:-b)}function Lf(){var a;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(X),this.fragment.rendered&&this.el.__ractive_instances__&&K(this.el.__ractive_instances__,this),this.shouldDestroy=!0,a=this.fragment.rendered?this.unrender():fh.resolve(),oq.fire(this),this._boundFunctions.forEach(Mf),a}function Mf(a){delete a.fn[a.prop]}function Nf(a){var b=this;if("string"!=typeof a)throw new TypeError(Gg);var c=void 0;return/\*/.test(a)?(c={},z(this,y(B(a))).forEach(function(a){c[a.str]=!b.viewmodel.get(a)}),this.set(c)):this.set(a,!this.get(a))}function Of(){return this.fragment.toString(!0)}function Pf(){var a,b;if(!this.fragment.rendered)return p("ractive.unrender() was called on a Ractive instance that was not rendered"),fh.resolve();for(a=oh.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),K(this.el.__ractive_instances__,this),sq.fire(this),oh.end(),a}function Qf(a){var b;return a=y(a)||Ug,b=oh.start(this,!0),this.viewmodel.mark(a),oh.end(),vq.fire(this,a),b}function Rf(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||y(d).equalsOrStartsWith(a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=Sf(this,e),this.set(c)}function Sf(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return void(d[a.keypath.str]||a.changed()||(d.push(a.keypath),d[a.keypath.str]=a));b=a.attribute.value,e=a.getValue(),H(b,e)||h(b,e)||(c[a.keypath.str]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a.str],e=b.attribute.value,f=b.getValue(),H(e,f)||(c[a.str]=f)}),c}function Tf(a,b){return"function"==typeof b&&/_super/.test(a)}function Uf(a){for(var b={};a;)Vf(a,b),Xf(a,b),a=a._Parent!==Dq?a._Parent:!1;return b}function Vf(a,b){aj.forEach(function(c){Wf(c.useDefaults?a.prototype:a,b,c.name)})}function Wf(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function Xf(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var d=a.prototype[c];if(c in b){if("function"==typeof b[c]&&"function"==typeof d&&b[c]._method){var e=void 0,f=d._method;f&&(d=d._method),e=yq(b[c]._method,d),f&&(e._method=e),b[c]=e}}else b[c]=d._method?d._method:d}})}function Yf(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b.length?b.reduce(Zf,this):Zf(this)}function Zf(a){var b,c,e=void 0===arguments[1]?{}:arguments[1];return e.prototype instanceof Dq&&(e=zq(e)),b=function(a){return this instanceof b?void Ap(this,a):new b(a)},c=tg(a.prototype),c.constructor=b,vg(b,{defaults:{value:c},extend:{value:Yf,writable:!0,configurable:!0},_Parent:{value:a}}),fj.extend(a,c,e),Pi.extend(a,c,e),e.computed&&(c.computed=d(tg(a.prototype.computed),e.computed)),b.prototype=c,b}var $f,_f,ag,bg,cg,dg,eg,fg=3,gg={el:void 0,append:!1,template:{v:fg,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},hg=gg,ig={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}};$f="object"==typeof document,_f="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ag="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),bg=!0}catch(jg){bg=!1}cg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dg="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),eg=["o","ms","moz","webkit"];var kg,lg,mg,ng,og,pg,qg,rg,sg;if(kg=dg?function(a,b){return b&&b!==cg.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==cg.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},$f){for(mg=kg("div"),ng=["matches","matchesSelector"],sg=function(a){return function(b,c){return b[a](c)}},qg=ng.length;qg--&&!lg;)if(og=ng[qg],mg[og])lg=sg(og);else for(rg=eg.length;rg--;)if(pg=eg[qg]+og.substr(0,1).toUpperCase()+og.substring(1),mg[pg]){lg=sg(pg);break}lg||(lg=function(a,b){var c,d,e;for(d=a.parentNode,d||(mg.innerHTML="",d=mg,a=a.cloneNode(),mg.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else lg=null;var tg,ug,vg,wg=null;try{Object.defineProperty({},"test",{value:0}),$f&&Object.defineProperty(document.createElement("div"),"test",{value:0}),ug=Object.defineProperty}catch(xg){ug=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(xg){throw xg}$f&&Object.defineProperties(kg("div"),{test:{value:0}}),vg=Object.defineProperties}catch(xg){vg=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&ug(a,c,b[c])}}try{Object.create(null),tg=Object.create}catch(xg){tg=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}var yg,zg,Ag,Bg=Object.prototype.hasOwnProperty,Cg=Object.prototype.toString,Dg=/^\[object (?:Array|FileList)\]$/,Eg=function(){},Fg={};ag?!function(){var a=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],b="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Ag=function(){var c=!!console.groupCollapsed;console[c?"groupCollapsed":"log"].apply(console,a),console.log(b),c&&console.groupEnd(a),Ag=Eg},zg=function(a,b){if(Ag(),"object"==typeof b[b.length-1]){var c=b.pop(),d=c?c.ractive:null;if(d){var e=void 0;d.component&&(e=d.component.name)&&(a="<"+e+"> "+a);var f=void 0;(f=c.node||d.fragment&&d.fragment.rendered&&d.find("*"))&&b.push(f)}}console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(b))},yg=function(){console.log.apply(console,arguments)}}():zg=yg=Ag=Eg;var Gg="Bad arguments",Hg='A function was specified for "%s" %s, but no %s was returned',Ig=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+b+"s"},Jg=function(a,b,c,d){if(a===b)return t(b);if(d){var e=r("interpolators",c,d);if(e)return e(a,b)||t(b);l(Ig(d,"interpolator"))}return Mg.number(a,b)||Mg.array(a,b)||Mg.object(a,b)||t(b)},Kg=Jg,Lg={number:function(a,b){var c;return i(a)&&i(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,e,g;if(!f(a)||!f(b))return null;for(c=[],d=[],g=e=Math.min(a.length,b.length);g--;)d[g]=Kg(a[g],b[g]);for(g=e;g<a.length;g+=1)c[g]=a[g];for(g=e;g<b.length;g+=1)c[g]=b[g];return function(a){for(var b=e;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!j(a)||!j(b))return null;c=[],f={},e={};for(g in a)Bg.call(a,g)&&(Bg.call(b,g)?(c.push(g),e[g]=Kg(a[g],b[g])):f[g]=a[g]);for(g in b)Bg.call(b,g)&&!Bg.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var b,g=d;g--;)b=c[g],f[b]=e[b](a);return f}}},Mg=Lg,Ng=u,Og={},Pg=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Qg=/\*/,Rg={},Sg=function(a){var b=a.split(".");this.str=a,"@"===a[0]&&(this.isSpecial=!0,this.value=x(a)),this.firstKey=b[0],this.lastKey=b.pop(),this.isPattern=Qg.test(a),this.parent=""===a?null:y(b.join(".")),this.isRoot=!a};Sg.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return y(this.isRoot?String(a):this.str+"."+a)},replace:function(a,b){return this===a?b:this.startsWith(a)?null===b?b:y(this.str.replace(a.str+".",b.str+".")):void 0},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=Ng(this.str))}};var Tg,Ug=y(""),Vg=C,Wg="Cannot add to a non-numeric value",Xg=D;"undefined"==typeof window?Tg=null:(!function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(eg,0,window),Tg=window.requestAnimationFrame);var Yg,Zg=Tg;Yg="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var $g=Yg,_g={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};E.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?p(this.deprecate.message):p('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),b?a.fire(this.event,b):a.fire(this.event)};var ah,bh=E,ch={},dh={},eh={};"function"==typeof Promise?ah=Promise:(ah=function(a){var b,c,d,e,f,g,h=[],i=[],j=ch;d=function(a){return function(d){j===ch&&(b=d,j=a,c=N(j===dh?h:i,b),M(c))}},e=d(dh),f=d(eh);try{a(e,f)}catch(k){f(k)}return g={then:function(a,b){var d=new ah(function(e,f){var g=function(a,b,c){"function"==typeof a?b.push(function(b){var c;try{c=a(b),O(d,c,e,f)}catch(g){f(g)}}):b.push(c)};g(a,h,e),g(b,i,f),j!==ch&&M(c)});return d}},g["catch"]=function(a){return this.then(null,a)},g},ah.all=function(a){return new ah(function(b,c){var d,e,f,g=[];if(!a.length)return void b(g);for(f=function(a,e){a&&"function"==typeof a.then?a.then(function(a){g[e]=a,--d||b(g)},c):(g[e]=a,--d||b(g))},d=e=a.length;e--;)f(a[e],e)})},ah.resolve=function(a){return new ah(function(b){b(a)})},ah.reject=function(a){return new ah(function(b,c){c(a)})});var fh=ah,gh=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return Ug},hh=P,ih=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)};ih.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,$(this)},decrementTotal:function(){this.totalChildren-=1,$(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;K(b,a),$(this)},init:function(){this.ready=!0,$(this)},detachNodes:function(){this.decoratorQueue.forEach(U),this.detachQueue.forEach(Y),this.children.forEach(Z)}};var jh,kh,lh=ih,mh=[],nh=new bh("change");kh={start:function(a,b){var c,d;return b&&(c=new fh(function(a){return d=a})),jh={previousBatch:jh,transitionManager:new lh(d,jh&&jh.transitionManager),views:[],tasks:[],ractives:[],instance:a},a&&jh.ractives.push(a),c},end:function(){_(),jh.transitionManager.init(),!jh.previousBatch&&jh.instance&&(jh.instance.viewmodel.changes=[]),jh=jh.previousBatch},addRactive:function(a){jh&&F(jh.ractives,a)},registerTransition:function(a){a._manager=jh.transitionManager,jh.transitionManager.add(a)},registerDecorator:function(a){jh.transitionManager.addDecorator(a)},addView:function(a){jh.views.push(a)},addUnresolved:function(a){mh.push(a)},removeUnresolved:function(a){K(mh,a)},detachWhenReady:function(a){jh.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(jh){for(c=jh;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}};var oh=kh,ph=[],qh={tick:function(){var a,b,c;for(c=$g(),oh.start(),a=0;a<ph.length;a+=1)b=ph[a],b.tick(c)||ph.splice(a--,1);oh.end(),ph.length?Zg(qh.tick):qh.running=!1},add:function(a){ph.push(a),qh.running||(qh.running=!0,Zg(qh.tick))},abort:function(a,b){for(var c,d=ph.length;d--;)c=ph[d],c.root===b&&c.keypath===a&&c.stop()}},rh=qh,sh=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=Kg(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};sh.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(oh.start(this.root),this.root.viewmodel.set(f,this.to),oh.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&p("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),oh.start(this.root),this.root.viewmodel.set(f,c),oh.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&p("Animation was not found"),this.root._animations.splice(a,1)}};var th=sh,uh=ca,vh={stop:Eg},wh=ea,xh=new bh("detach"),yh=fa,zh=ga,Ah=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},Bh=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=ia(a.component||a._ractive.proxy),d=ia(b.component||b._ractive.proxy),e=J(c),f=J(d);e&&e===f;)c.pop(),d.pop(),g=e,e=J(c),f=J(d);if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Ch=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):Bh(a,b)},Dh=function(){this.sort(this._isComponentQuery?Bh:Ch),this._dirty=!1},Eh=function(){var a=this;this._dirty||(this._dirty=!0,oh.scheduleTask(function(){a._sort()}))},Fh=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},Gh=ja,Hh=ka,Ih=la,Jh=ma,Kh=na,Lh=oa,Mh={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Nh=Mh,Oh=pa,Ph=sa,Qh=ta,Rh={capture:!0,noUnwrap:!0,fullRootGet:!0},Sh=ua,Th=new bh("insert"),Uh=wa,Vh=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a};Vh.prototype={init:function(a){this.value=this.root.get(this.keypath.str),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;h(a,this.value)||(this.value=a,this.defer&&this.ready?oh.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Wh,Xh=Vh,Yh=xa,Zh=Array.prototype.slice;Wh=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},Wh.prototype={init:function(a){var b,c;if(b=Yh(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(y(c));else this.values=b},update:function(a){var b,c=this;if(a.isPattern){b=Yh(this.root,a);for(a in b)b.hasOwnProperty(a)&&this.update(y(a))}else if(!this.root.viewmodel.implicitChanges[a.str])return this.defer&&this.ready?void oh.scheduleTask(function(){return c.getProxy(a).update()}):void this.reallyUpdate(a)},reallyUpdate:function(a){var b,c,d,e;return b=a.str,c=this.root.viewmodel.get(a),this.updating?void(this.values[b]=c):(this.updating=!0,h(c,this.values[b])&&this.ready||(d=Zh.call(this.regex.exec(b),1),e=[c,this.values[b],b].concat(d),this.values[b]=c,this.callback.apply(this.context,e)),void(this.updating=!1))},getProxy:function(a){var b=this;return this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a.str]}};var $h,_h,ai,bi,ci,di,ei=Wh,fi=ya,gi={},hi=za,ii=Aa,ji=function(a){return a.trim()},ki=function(a){return""!==a},li=Ba,mi=Ca,ni=Da,oi=Ea,pi=Array.prototype,qi=function(a){return function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];var g,h,i,j,k=[];if(b=y(B(b)),g=this.viewmodel.get(b),h=g.length,!f(g))throw new Error("Called ractive."+a+"('"+b.str+"'), but '"+b.str+"' does not refer to an array");return k=oi(g,a,d),j=pi[a].apply(g,d),i=oh.start(this,!0).then(function(){return j}),k?this.viewmodel.smartUpdate(b,g,k):this.viewmodel.mark(b),oh.end(),i}},ri=qi("pop"),si=qi("push"),ti="/* Ractive.js component styles */\n",ui=[],vi=!1;$f?(ai=document.createElement("style"),ai.type="text/css",bi=document.getElementsByTagName("head")[0],di=!1,ci=ai.styleSheet,_h=function(){var a=ti+ui.map(function(a){return"\n/* {"+a.id+"} */\n"+a.styles}).join("\n");ci?ci.cssText=a:ai.innerHTML=a,di||(bi.appendChild(ai),di=!0)},$h={add:function(a){ui.push(a),vi=!0},apply:function(){vi&&(_h(),vi=!1)}}):$h={add:Eg,apply:Eg};var wi,xi,yi,zi=$h,Ai=Ga,Bi=new bh("render"),Ci=new bh("complete"),Di={extend:function(a,b,c){b.adapt=Ia(b.adapt,I(c.adapt))},init:function(){}},Ei=Di,Fi=Ja,Gi=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Hi=/\/\*.*?\*\//g,Ii=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Ji=/^@media/,Ki=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Li=1,Mi={name:"css",extend:function(a,b,c){if(c.css){var d=Li++,e=c.noCssTransform?c.css:Fi(c.css,d);b.cssId=d,zi.add({id:d,styles:e})}},init:function(){}},Ni=Mi,Oi={name:"data",extend:function(a,b,c){var d=void 0,e=void 0;if(c.data&&j(c.data))for(d in c.data)e=c.data[d],e&&"object"==typeof e&&(j(e)||f(e))&&p("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");b.data=Na(b.data,c.data)},init:function(a,b,c){var d=Na(a.prototype.data,c.data);return"function"==typeof d&&(d=d.call(b)),d||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);return a.viewmodel.reset(b),!0}},Pi=Oi,Qi=null,Ri=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Si={fromId:Sa,isHashedId:Ta,isParsed:Ua,getParseOptions:Va,createHelper:Qa,parse:Ra},Ti=Si,Ui={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,"function"==typeof d?b.template=d:b.template=Za(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=Xa(b,e),b._config.template={fn:e,result:d}),d=Za(d,b),b.template=d.t,d.p&&$a(b.partials,d.p)},reset:function(a){var b,c=Wa(a);return c?(b=Za(c,a),a.template=b.t,$a(a.partials,b.p,!0),!0):void 0}},Vi=Ui;wi=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],xi=function(a,b){this.name=a,this.useDefaults=b},xi.prototype={constructor:xi,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(){},configure:function(a,b,c){var d,e=this.name,f=c[e];d=tg(a[e]);for(var g in f)d[g]=f[g];b[e]=d},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c}},yi=wi.map(function(a){return new xi(a,"computed"===a)});var Wi,Xi,Yi,Zi,$i,_i,aj=yi,bj=_a,cj=db;Zi={adapt:Ei,css:Ni,data:Pi,template:Vi},Yi=Object.keys(hg),_i=gb(Yi.filter(function(a){return!Zi[a]})),$i=gb(Yi.concat(aj.map(function(a){return a.name}))),Xi=[].concat(Yi.filter(function(a){return!aj[a]&&!Zi[a]}),aj,Zi.data,Zi.template,Zi.css),Wi={extend:function(a,b,c){return eb("extend",a,b,c)},init:function(a,b,c){return eb("init",a,b,c)},reset:function(a){return Xi.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:Xi};var dj,ej,fj=Wi,gj=hb,hj=ib,ij=jb,jj=kb,kj=lb,lj=mb,mj=nb,nj=ob,oj=/^\s+/;ej=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},ej.prototype=Error.prototype,dj=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},dj.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},getLinePos:function(a){for(var b,c=0,d=0;a>=this.lineEnds[c];)d=this.lineEnds[c],c+=1;return b=a-d,[c+1,b+1,a]},error:function(a){var b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=0,g=e.replace(/\t/g,function(a,c){return c<b[1]&&(f+=1),"  "})+"\n"+new Array(b[1]+f).join(" ")+"^----",h=new ej(""+a+" at line "+c+" character "+d+":\n"+g);throw h.line=b[0],h.character=b[1],h.shortMessage=a,h},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(oj)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},dj.extend=function(a){var b,c,d=this;b=function(a,b){dj.call(this,a,b)},b.prototype=tg(d.prototype);for(c in a)Bg.call(a,c)&&(b.prototype[c]=a[c]);return b.extend=dj.extend,b};var pj,qj,rj,sj=dj,tj=1,uj=2,vj=3,wj=4,xj=7,yj=8,zj=9,Aj=13,Bj=15,Cj=16,Dj=18,Ej=20,Fj=21,Gj=30,Hj=50,Ij=51,Jj=52,Kj=53,Lj=54;pj=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,qj=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,rj=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Mj,Nj,Oj,Pj,Qj,Rj,Sj,Tj=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(pj)||b.matchPattern(qj)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(rj),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},Uj=Tj('"'),Vj=Tj("'"),Wj=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=Vj(a),a.matchString('"')?{t:Fj,v:c}:(a.pos=b,null)):a.matchString("'")?(c=Uj(a),a.matchString("'")?{t:Fj,v:c}:(a.pos=b,null)):null},Xj=pb,Yj=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Zj=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,$j=qb,_j=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;Nj={"true":!0,"false":!1,undefined:void 0,"null":null},Oj=new RegExp("^(?:"+Object.keys(Nj).join("|")+")"),Pj=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Qj=/\$\{([^\}]+)\}/g,Rj=/^\$\{([^\}]+)\}/,Sj=/^\s*$/,Mj=sj.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&Sj.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(Rj),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(Oj))?{v:Nj[b]}:void 0},function(a){var b;return(b=a.matchPattern(Pj))?{v:+b}:void 0},function(a){var b,c=Wj(a);return c&&(b=a.values)?{v:c.v.replace(Qj,function(a,c){return c in b?b[c]:c})}:c},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=rb(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]});var ak,bk,ck,dk,ek,fk,gk,hk,ik=function(a,b){var c=new Mj(a,{values:b});return c.result},jk=sb,kk=tb,lk=ub,mk=vb;ak=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,bk=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,ck={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},dk=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],ek=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(ck).join("|")+"));?","g"),fk=/</g,gk=/>/g,hk=/&/g;var nk=function(){return b(this.node)},ok=function(a){this.type=tj,this.text=a.template};ok.prototype={detach:nk,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?yb(this.text):this.text},unrender:function(a){return a?this.detach():void 0}};var pk=ok,qk=zb,rk=Ab,sk=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=hh(a.root,b,a.parentFragment),void 0!=d?this.resolve(d):oh.addUnresolved(this)};sk.prototype={
resolve:function(a){this.keypath&&!a&&oh.addUnresolved(this),this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(y(this.ref))},rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||oh.removeUnresolved(this)}};var tk=sk,uk=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},vk={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};uk.prototype={rebind:function(){var a,b=this.ref,c=this.parentFragment,d=vk[b];if(!d)throw new Error('Unknown special reference "'+b+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(y("@"+d.prefix+Bb(this.cached,d)));if(-1!==d.prop.indexOf("index")||-1!==d.prop.indexOf("key"))for(;c;){if(c.owner.currentSubtype===Jj&&void 0!==(a=Bb(c,d)))return this.cached=c,c.registerIndexRef(this),this.callback(y("@"+d.prefix+a));c=!c.parent&&c.owner&&c.owner.component&&c.owner.component.parentFragment&&!c.owner.component.instance.isolated?c.owner.component.parentFragment:c.parent}else for(;c;){if(void 0!==(a=Bb(c,d)))return this.callback(y("@"+d.prefix+a.str));c=c.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var wk=uk,xk=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()};xk.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback(y("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var yk=xk,zk=Cb;Cb.resolve=function(a){var b,c,d={};for(b in a.refs)c=a.refs[b],d[c.ref.n]="k"===c.ref.t?c.fragment.key:c.fragment.index;return d};var Ak,Bk=Db,Ck=Eb,Dk={},Ek=Function.prototype.bind;Ak=function(a,b,c,d){var e,f=this;e=a.root,this.root=e,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return Bk(f,a,function(a){f.resolve(b,a)})}),this.ready=!0,this.bubble()},Ak.prototype={bubble:function(){this.ready&&(this.uniqueString=Gb(this.str,this.keypaths),this.keypath=Hb(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var a,b,c,d,e,f=this;d=this.keypath,a=this.root.viewmodel.computations[d.str],a?this.root.viewmodel.mark(d):(e=Ck(this.str,this.refResolvers.length),b=this.keypaths.map(function(a){var b;return"undefined"===a?function(){return void 0}:a.isSpecial?(b=a.value,function(){return b}):function(){var b=f.root.viewmodel.get(a,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof b&&(b=Jb(b,f.root)),b}}),c={deps:this.keypaths.filter(Ib),getter:function(){var a=b.map(Fb);return e.apply(null,a)}},a=this.root.viewmodel.compute(d,c))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var Fk=Ak,Gk=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===Gj?this.refResolver=Bk(this,a.n,function(a){d.resolve(a)}):new Fk(b,c,a,function(a){d.resolve(a)})};Gk.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Hk=Gk,Ik=function(a,b,c){var d,e,f,g,h=this;this.parentFragment=g=a.parentFragment,this.root=d=a.root,this.mustache=a,this.ref=e=b.r,this.callback=c,this.unresolved=[],(f=hh(d,e,g))?this.base=f:this.baseResolver=new tk(this,e,function(a){h.base=a,h.baseResolver=null,h.bubble()}),this.members=b.m.map(function(a){return new Hk(a,h,g)}),this.ready=!0,this.bubble()};Ik.prototype={getKeypath:function(){var a=this.members.map(Kb);return!a.every(Lb)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(V)},rebind:function(a,b){var c;if(this.base){var d=this.base.replace(a,b);d&&d!==this.base&&(this.base=d,c=!0)}this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=y(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Mb),this.bubble()}};var Jk=Ik,Kk=Nb,Lk=Ob,Mk=Pb,Nk={getValue:rk,init:Kk,resolve:Lk,rebind:Mk},Ok=function(a){this.type=uj,Nk.init(this,a)};Ok.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Nk.resolve,rebind:Nk.rebind,detach:nk,unbind:qk,render:function(){return this.node||(this.node=document.createTextNode(c(this.value))),this.node},unrender:function(a){a&&b(this.node)},getValue:Nk.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),h(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&oh.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=""+c(this.value);return a?yb(b):b}};var Pk=Ok,Qk=Qb,Rk=Rb,Sk=Sb,Tk=Tb,Uk=Ub,Vk=Vb,Wk=Wb,Xk=Xb,Yk=Yb,Zk=function(a,b){Nk.rebind.call(this,a,b)},$k=$b,_k=_b,al=kc,bl=lc,cl=mc,dl=pc,el=function(a){this.type=wj,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===Ij,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,Nk.init(this,a)};el.prototype={bubble:Qk,detach:Rk,find:Sk,findAll:Tk,findAllComponents:Uk,findComponent:Vk,findNextNode:Wk,firstNode:Xk,getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:Nk.getValue,shuffle:Yk,rebind:Zk,render:$k,resolve:Nk.resolve,setValue:_k,toString:al,unbind:bl,unrender:cl,update:dl};var fl,gl,hl=el,il=qc,jl=rc,kl=sc,ll=tc,ml={};try{kg("table").innerHTML="foo"}catch(xg){fl=!0,gl={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var nl=function(a,b,c){var d,e,f,g,h,i=[];if(null!=a&&""!==a){for(fl&&(e=gl[b.tagName])?(d=uc("DIV"),d.innerHTML=e[0]+a+e[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(f=d.options[d.selectedIndex])):b.namespaceURI===cg.svg?(d=uc("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=uc(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(f=d.options[d.selectedIndex]));g=d.firstChild;)i.push(g),c.appendChild(g);if("SELECT"===b.tagName)for(h=i.length;h--;)i[h]!==f&&(i[h].selected=!1)}return i},ol=vc,pl=xc,ql=yc,rl=zc,sl=Ac,tl=Bc,ul=function(a){this.type=vj,Nk.init(this,a)};ul.prototype={detach:il,find:jl,findAll:kl,firstNode:ll,getValue:Nk.getValue,rebind:Nk.rebind,render:pl,resolve:Nk.resolve,setValue:ql,toString:rl,unbind:qk,unrender:sl,update:tl};var vl,wl,xl,yl,zl=ul,Al=function(){this.parentFragment.bubble()},Bl=Cc,Cl=function(a){return this.node?lg(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},Dl=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},El=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Fl=function(a){return this.fragment?this.fragment.findComponent(a):void 0},Gl=Dc,Hl=Ec,Il=Fc,Jl=/^true|on|yes|1$/i,Kl=/^[0-9]+$/,Ll=function(a,b){var c,d,e;return e=b.a||{},d={},c=e.twoway,void 0!==c&&(d.twoway=0===c||Jl.test(c)),c=e.lazy,void 0!==c&&(0!==c&&Kl.test(c)?d.lazy=parseInt(c):d.lazy=0===c||Jl.test(c)),d},Ml=Gc;vl="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),wl="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),xl=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},yl=xl(vl.concat(wl));var Nl=function(a){var b=a.toLowerCase();return yl[b]||b},Ol=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==cg.html?Nl(b):b;else if(b=b.substring(c+1),a.name=Nl(b),a.namespace=cg[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},Pl=Hc,Ql=Ic,Rl=Jc,Sl=Kc,Tl={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Ul=Lc,Vl=Nc,Wl=Oc,Xl=Pc,Yl=Qc,Zl=Rc,$l=Sc,_l=Tc,am=Uc,bm=Vc,cm=Wc,dm=Xc,em=Yc,fm=Zc,gm=$c,hm=function(a){this.init(a)};hm.prototype={bubble:Ml,init:Ql,rebind:Rl,render:Sl,toString:Ul,unbind:Vl,update:gm};var im,jm=hm,km=function(a,b){var c,d,e=[];for(c in b)"twoway"!==c&&"lazy"!==c&&b.hasOwnProperty(c)&&(d=new jm({element:a,name:c,value:b[c],root:a.root}),e[c]=d,"value"!==c&&e.push(d));return(d=e.value)&&e.push(d),e};"undefined"!=typeof document&&(im=kg("div"));var lm=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new bq({root:a.root,owner:this,template:[b]})};lm.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===cg.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a,b,c=this;a=this.fragment.toString(),b=_c(a,this.isSvg),this.attributes.filter(function(a){return ad(b,a)}).forEach(function(a){c.node.removeAttribute(a.name)}),b.forEach(function(a){c.node.setAttribute(a.name,a.value)}),this.attributes=b},toString:function(){return this.fragment.toString()}};var mm=lm,nm=function(a,b){return b?b.map(function(b){return new mm(a,b)}):[]},om=function(a){var b,c,d,e;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c.str.slice(-1))return q("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name,{ractive:this.root}),!1;if(c.isSpecial)return q("Two-way binding does not work with %s",b.resolver.ref,{ractive:this.root}),!1}else{var f=b.template.r?"'"+b.template.r+"' reference":"expression";p("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",f,{ractive:this.root}),b.resolver.forceResolution(),c=b.keypath}this.attribute.isTwoway=!0,this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=bd(a))&&(this.resetValue=d,e.formBindings.push(this))};om.prototype={handleChange:function(){var a=this;oh.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),oh.scheduleTask(function(){return a.attribute.locked=!1}),oh.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(K(this.root._twowayBindings[b.str],this),this.keypath=c,a=this.root._twowayBindings[c.str]||(this.root._twowayBindings[c.str]=[]),a.push(this))},unbind:function(){}},om.extend=function(a){var b,c=this;return b=function(a){om.call(this,a),this.init&&this.init()},b.prototype=tg(c.prototype),d(b.prototype,a),b.extend=om.extend,b};var pm,qm=om,rm=cd;pm=qm.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a,b=this.element.node,c=!1;this.rendered=!0,a=this.root.lazy,this.element.lazy===!0?a=!0:this.element.lazy===!1?a=!1:i(this.element.lazy)?(a=!1,c=+this.element.lazy):i(a||"")&&(c=+a,a=!1,this.element.lazy=c),this.handler=c?ed:rm,b.addEventListener("change",rm,!1),a||(b.addEventListener("input",this.handler,!1),b.attachEvent&&b.addEventListener("keyup",this.handler,!1)),b.addEventListener("blur",dd,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",rm,!1),a.removeEventListener("input",this.handler,!1),a.removeEventListener("keyup",this.handler,!1),a.removeEventListener("blur",dd,!1)}});var sm=pm,tm=sm.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),um=tm,vm=fd,wm={},xm=qm.extend({name:"checked",init:function(){this.siblings=vm(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",rm,!1),a.attachEvent&&a.addEventListener("click",rm,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",rm,!1),a.removeEventListener("click",rm,!1)},handleChange:function(){oh.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),oh.end()},getValue:function(){return this.element.node.checked},unbind:function(){K(this.siblings,this)}}),ym=xm,zm=qm.extend({name:"name",init:function(){this.siblings=vm(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",rm,!1),a.attachEvent&&a.addEventListener("click",rm,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",rm,!1),a.removeEventListener("click",rm,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&qm.prototype.handleChange.call(this)},rebound:function(a,b){var c;qm.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath.str+"}}")},unbind:function(){K(this.siblings,this)}}),Am=zm,Bm=qm.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.siblings=vm(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){K(this.siblings,this)},render:function(){var a,b,c=this.element.node;a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),f(a)?this.isChecked=G(a,b):this.isChecked=a==b,c.name="{{"+this.keypath.str+"}}",c.checked=this.isChecked,c.addEventListener("change",rm,!1),c.attachEvent&&c.addEventListener("click",rm,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",rm,!1),a.removeEventListener("click",rm,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,qm.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(gd).map(hd)}}),Cm=Bm,Dm=qm.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",rm,!1),a.attachEvent&&a.addEventListener("click",rm,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",rm,!1),a.removeEventListener("click",rm,!1)},getValue:function(){return this.element.node.checked}}),Em=Dm,Fm=qm.extend({getInitialValue:function(){var a,b,c,d,e=this.element.options;if(void 0===this.element.getAttribute("value")&&(b=a=e.length,a)){for(;b--;)if(e[b].getAttribute("selected")){c=e[b].getAttribute("value"),d=!0;break}if(!d)for(;++b<a;)if(!e[b].getAttribute("disabled")){c=e[b].getAttribute("value");break}return void 0!==c&&(this.element.attributes.value.value=c),c}},render:function(){this.element.node.addEventListener("change",rm,!1)},unrender:function(){this.element.node.removeEventListener("change",rm,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,oh.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),Gm=Fm,Hm=Gm.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",rm,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",rm,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&H(c,b)||Gm.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,oh.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Im=Hm,Jm=qm.extend({render:function(){this.element.node.addEventListener("change",rm,!1)},unrender:function(){this.element.node.removeEventListener("change",rm,!1)},getValue:function(){return this.element.node.files}}),Km=Jm,Lm=sm.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Mm=id,Nm=kd,Om=ld,Pm=md,Qm=nd,Rm=/^event(?:\.(.+))?/,Sm=rd,Tm=sd,Um={},Vm={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Wm=ud,Xm=vd,Ym=wd,Zm=xd,$m=yd,_m=function(a,b,c){this.init(a,b,c)};_m.prototype={bubble:Nm,fire:Om,getAction:Pm,init:Qm,listen:Tm,rebind:Wm,render:Xm,resolve:Ym,unbind:Zm,unrender:$m};var an=_m,bn=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new an(a,e[c],b[d]),g.push(f);return g},cn=function(a,b){var c,d,e,f=this;this.element=a,this.root=c=a.root,d=b.n||b,("string"==typeof d||(e=new bq({template:d,root:c,owner:a}),d=e.toString(),e.unbind(),""!==d))&&(b.a?this.params=b.a:b.d&&(this.fragment=new bq({template:b.d,root:c,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,f.params=this.getArgsList(),f.ready&&f.update()}),this.fn=r("decorators",c,d),this.fn||l(Ig(d,"decorator")))};cn.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}};var dn,en,fn,gn=cn,hn=Fd,jn=Gd,kn=Md,ln=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})};$f?(en={},fn=kg("div").style,dn=function(a){var b,c,d;if(a=ln(a),!en[a])if(void 0!==fn[a])en[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=eg.length;b--;)if(c=eg[b],void 0!==fn[c+d]){en[a]=c+d;break}return en[a]}):dn=null;var mn,nn,on=dn;$f?(nn=window.getComputedStyle||wg.getComputedStyle,mn=function(a){var b,c,d,e,g;if(b=nn(this.node),"string"==typeof a)return g=b[on(a)],"0px"===g&&(g=0),g;if(!f(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)e=a[d],g=b[on(e)],"0px"===g&&(g=0),c[e]=g;return c}):mn=null;var pn=mn,qn=function(a,b){var c;if("string"==typeof a)this.node.style[on(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[on(c)]=a[c]);return this},rn=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(q(Ig(a.easing,"easing")),b=Nd)):b="function"==typeof a.easing?a.easing:Nd,this.easing=b,this.start=$g(),this.end=this.start+this.duration,this.running=!0,rh.add(this)};rn.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var sn,tn,un,vn,wn,xn,yn,zn,An=rn,Bn=new RegExp("^-(?:"+eg.join("|")+")-"),Cn=function(a){return a.replace(Bn,"")},Dn=new RegExp("^(?:"+eg.join("|")+")([A-Z])"),En=function(a){var b;return a?(Dn.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Fn={},Gn={};$f?(tn=kg("div").style,function(){void 0!==tn.transition?(un="transition",vn="transitionend",wn=!0):void 0!==tn.webkitTransition?(un="webkitTransition",vn="webkitTransitionEnd",wn=!0):wn=!1}(),un&&(xn=un+"Duration",yn=un+"Property",zn=un+"TimingFunction"),sn=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[yn]=d.map(on).map(En).join(","),a.node.style[zn]=En(c.easing||"linear"),a.node.style[xn]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(ln(Cn(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(vn,j,!1),h=!0,i())},a.node.addEventListener(vn,j,!1),setTimeout(function(){for(var e,k,l,m,n,o=d.length,q=[];o--;)m=d[o],e=f+m,wn&&!Gn[e]&&(a.node.style[on(m)]=b[m],Fn[e]||(k=a.getStyle(m),Fn[e]=a.getStyle(m)!=b[m],Gn[e]=!Fn[e],Gn[e]&&(a.node.style[on(m)]=k))),(!wn||Gn[e])&&(void 0===k&&(k=a.getStyle(m)),l=d.indexOf(m),-1===l?p("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:a.node}):d.splice(l,1),n=/[^\d]*$/.exec(b[m])[0],q.push({name:on(m),interpolator:Kg(parseFloat(k),parseFloat(b[m])),suffix:n}));q.length?new An({root:a.root,duration:c.duration,easing:ln(c.easing||""),step:function(b){var c,d;for(d=q.length;d--;)c=q[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(vn,j,!1),h=!0,i())},0)},c.delay||0)}):sn=null;var Hn,In,Jn,Kn,Ln,Mn=sn;if("undefined"!=typeof document){if(Hn="hidden",Ln={},Hn in document)Jn="";else for(Kn=eg.length;Kn--;)In=eg[Kn],Hn=In+"Hidden",Hn in document&&(Jn=In);void 0!==Jn?(document.addEventListener(Jn+"visibilitychange",Od),Od()):("onfocusout"in document?(document.addEventListener("focusout",Pd),document.addEventListener("focusin",Qd)):(window.addEventListener("pagehide",Pd),window.addEventListener("blur",Pd),window.addEventListener("pageshow",Qd),window.addEventListener("focus",Qd)),Ln.hidden=!1)}var Nn,On,Pn,Qn=Ln;$f?(On=window.getComputedStyle||wg.getComputedStyle,Nn=function(a,b,c){var d,e=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Qn.hidden)return this.setStyle(a,b),Pn||(Pn=fh.resolve());"string"==typeof a?(d={},d[a]=b):(d=a,c=b),c||(q('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);var f=new fh(function(a){var b,f,g,h,i,j,k;if(!c.duration)return e.setStyle(d),void a();for(b=Object.keys(d),f=[],g=On(e.node),i={},j=b.length;j--;)k=b[j],h=g[on(k)],"0px"===h&&(h=0),h!=d[k]&&(f.push(k),e.node.style[on(k)]=h);return f.length?void Mn(e,d,c,f,a):void a()});return f}):Nn=null;var Rn=Nn,Sn=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),e({},a,b)},Tn=Rd,Un=function(a,b,c){this.init(a,b,c)};Un.prototype={init:kn,start:Tn,getStyle:pn,setStyle:qn,animateStyle:Rn,processParams:Sn};var Vn,Wn,Xn=Un,Yn=Td;Vn=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},Wn=function(){this.node.type&&"text/javascript"!==this.node.type||p("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var Zn=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(Zd).join("")+this.conditionalAttributes.map(Zd).join(""),"option"===this.name&&Xd(this)&&(a+=" selected"),"input"===this.name&&Yd(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=yb(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")||""),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),bk.test(this.template.e)||(a+="</"+this.template.e+">"),a)},$n=$d,_n=_d,ao=function(a){this.init(a)};ao.prototype={bubble:Al,detach:Bl,find:Cl,findAll:Dl,findAllComponents:El,findComponent:Fl,findNextNode:Gl,firstNode:Hl,getAttribute:Il,init:hn,rebind:jn,render:Yn,toString:Zn,unbind:$n,unrender:_n};var bo=ao,co=/^\s*$/,eo=/^\s*/,fo=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&co.test(c)&&b.shift(),d=J(b),void 0!==d&&co.test(d)&&b.pop(),e=b.reduce(be,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},go=ce,ho=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},io='Could not find template for partial "%s"',jo=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=yj,this.index=a.index,this.name=a.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Nk.init(this,a),this.keypath||((c=go(this.root,this.name,b))?(qk.call(this),this.isNamed=!0,this.setTemplate(c)):q(io,this.name))};jo.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||Mk.call(this,a,b),this.fragment&&this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Nk.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=go(this.root,""+a,this.parentFragment)),!b&&this.name&&(b=go(this.root,this.name,this.parentFragment))&&(qk.call(this),this.isNamed=!0),b||q(io,this.name,{ractive:this.root}),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&oh.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new bq({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===tj?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?ho(b,e[0]):b):b},unbind:function(){this.isNamed||qk.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}};var ko,lo,mo,no=jo,oo=he,po=ie,qo=new bh("detach"),ro=je,so=ke,to=le,uo=me,vo=ne,wo=oe,xo=function(a,b,c,d){var e=a.root,f=a.keypath;d?e.viewmodel.smartUpdate(f,b,d):e.viewmodel.mark(f)},yo=[],zo=["pop","push","reverse","shift","sort","splice","unshift"];zo.forEach(function(a){var b=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];var e,f,g,h;for(e=oi(this,a,c),f=Array.prototype[a].apply(this,arguments),oh.start(),this._ractive.setting=!0,h=this._ractive.wrappers.length;h--;)g=this._ractive.wrappers[h],oh.addRactive(g.root),xo(g,this,a,e);return oh.end(),this._ractive.setting=!1,f};ug(yo,a,{value:b})}),ko={},ko.__proto__?(lo=function(a){a.__proto__=yo},mo=function(a){a.__proto__=Array.prototype}):(lo=function(a){var b,c;for(b=zo.length;b--;)c=zo[b],ug(a,c,{value:yo[c],configurable:!0})},mo=function(a){var b;for(b=zo.length;b--;)delete a[zo[b]]}),lo.unpatch=mo;var Ao,Bo,Co,Do=lo;Ao={filter:function(a){return f(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new Bo(a,b,c)}},Bo=function(a,b,c){this.root=a,this.value=b,this.keypath=y(c),b._ractive||(ug(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Do(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,
b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},Bo.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(Co);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(Co);d.splice(e,1)}}else delete a._ractive,Do.unpatch(this.value)}},Co="Something went wrong in a rather interesting way";var Eo,Fo,Go=Ao,Ho=/^\s*[0-9]+\s*$/,Io=function(a){return Ho.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Eo={filter:function(a,b,c){var d,e;return b?(b=y(b),(d=c.viewmodel.wrapped[b.parent.str])&&!d.magic?!1:(e=c.viewmodel.get(b.parent),f(e)&&/^[0-9]+$/.test(b.lastKey)?!1:e&&("object"==typeof e||"function"==typeof e))):!1},wrap:function(a,b,c){return new Fo(a,b,c)}},Fo=function(a,b,c){var d,e,f;return c=y(c),this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,this.prop=c.lastKey,d=c.parent,this.obj=d.isRoot?a.viewmodel.data:a.viewmodel.get(d),e=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),e&&e.set&&(f=e.set._ractiveWrappers)?void(-1===f.indexOf(this)&&f.push(this)):void pe(this,b,e)},Fo.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,oh.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Io(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,void(b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c))))}}}catch(xg){Eo=!1}var Jo,Ko,Lo=Eo;Lo&&(Jo={filter:function(a,b,c){return Lo.filter(a,b,c)&&Go.filter(a)},wrap:function(a,b,c){return new Ko(a,b,c)}},Ko=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=Lo.wrap(a,b,c),this.arrayWrapper=Go.wrap(a,b,c)},Ko.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});var Mo=Jo,No=qe,Oo={},Po=te,Qo=ue,Ro=xe,So=Ce,To=De,Uo=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Uo.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a.str]=null,this.viewmodel.register(a,this.computation,"computed")}};var Vo=Uo,Wo=function(a,b){this.key=a,this.getter=b.getter,this.setter=b.setter,this.hardDeps=b.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};Wo.prototype={constructor:Wo,init:function(a){var b,c=this;this.viewmodel=a,this.bypass=!0,b=a.get(this.key),a.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==b&&this.set(b),this.hardDeps&&this.hardDeps.forEach(function(b){return a.register(b,c,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var a,b,c=this,d=!1;if(this.getting){var e="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return o(e),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?d=!0:[this.hardDeps,this.softDeps].forEach(function(a){var b,e,f;if(!d)for(f=a.length;f--;)if(b=a[f],e=c.viewmodel.get(b),!h(e,c.depValues[b.str]))return c.depValues[b.str]=e,void(d=!0)}),d){this.viewmodel.capture();try{this.value=this.getter()}catch(f){p('Failed to compute "%s"',this.key.str),m(f.stack||f),this.value=void 0}a=this.viewmodel.release(),b=this.updateDependencies(a),b&&[this.hardDeps,this.softDeps].forEach(function(a){a.forEach(function(a){c.depValues[a.str]=c.viewmodel.get(a)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(a){if(this.setting)return void(this.value=a);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Ee(this.viewmodel,d)&&!this.unresolvedDeps[d.str]?(f=new Vo(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=f,oh.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}};var Xo=Wo,Yo=Fe,Zo={FAILED_LOOKUP:!0},$o=Ge,_o={},ap=Ie,bp=Je,cp=function(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.deps=[],this.unresolved=[],this.resolved=!1};cp.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.setup()},map:function(a){return void 0===typeof this.keypath?this.localKey:a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){this.resolved||this.forceResolution(),this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);if(a.origin.register(c,b.dep,b.group),b.dep.setValue)b.dep.setValue(a.origin.get(c));else{if(!b.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");b.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(a,b,c){var d,e;if(this.resolved){for(d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}}};var dp=Ke,ep=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},fp=Le,gp={},hp=Oe,ip=Qe,jp=Re,kp=Se,lp=Ue,mp={implicit:!0},np={noCascade:!0},op=We,pp=Xe,qp=function(a){var b,c,d=a.adapt,e=a.data,f=a.ractive,g=a.computed,h=a.mappings;this.ractive=f,this.adaptors=d,this.onchange=a.onchange,this.cache={},this.cacheMap=tg(null),this.deps={computed:tg(null),"default":tg(null)},this.depsMap={computed:tg(null),"default":tg(null)},this.patternObservers=[],this.specials=tg(null),this.wrapped=tg(null),this.computations=tg(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=e,this.mappings=tg(null);for(b in h)this.map(y(b),h[b]);if(e)for(b in e)(c=this.mappings[b])&&void 0===c.getValue()&&c.setValue(e[b]);for(b in g)h&&b in h&&l("Cannot map to a computed property ('%s')",b),this.compute(y(b),g[b]);this.ready=!0};qp.prototype={adapt:No,applyChanges:Ro,capture:So,clearCache:To,compute:Yo,get:$o,init:ap,map:bp,mark:dp,merge:fp,register:hp,release:ip,reset:jp,set:kp,smartUpdate:lp,teardown:op,unregister:pp};var rp=qp;Ze.prototype={constructor:Ze,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?$e(this.queue,b).push(a):_e(this,a),delete this.inProcess[a._guid]}};var sp=Ze,tp=af,up=/\$\{([^\}]+)\}/g,vp=new bh("construct"),wp=new bh("config"),xp=new sp("init"),yp=0,zp=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Ap=ef,Bp=kf;kf.prototype={bubble:function(){this.dirty||(this.dirty=!0,oh.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var Cp=function(a,b,c,e,g){var h,i,j,k,l,m,n={},o={},q={},r=[];for(i=a.parentFragment,j=a.root,g=g||{},d(n,g),g.content=e||[],n[""]=g.content,b.defaults.el&&p("The <%s/> component has a default `el` property; it has been disregarded",a.name),k=i;k;){if(k.owner.type===Cj){l=k.owner.container;break}k=k.parent}return c&&Object.keys(c).forEach(function(b){var d,e,g=c[b];if("string"==typeof g)d=ik(g),o[b]=d?d.value:g;else if(0===g)o[b]=!0;else{if(!f(g))throw new Error("erm wut");mf(g)?(q[b]={origin:a.root.viewmodel,keypath:void 0},e=lf(a,g[0],function(a){a.isSpecial?m?h.set(b,a.value):(o[b]=a.value,delete q[b]):m?h.viewmodel.mappings[b].resolve(a):q[b].keypath=a})):e=new Bp(a,g,function(a){m?h.set(b,a):o[b]=a}),r.push(e)}}),h=tg(b.prototype),Ap(h,{el:null,append:!0,data:o,partials:g,magic:j.magic||b.defaults.magic,modifyArrays:j.modifyArrays,adapt:j.adapt},{parent:j,component:a,container:l,mappings:q,inlinePartials:n,cssIds:i.cssIds}),m=!0,a.resolvers=r,h},Dp=nf,Ep=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},Fp=pf,Gp=qf,Hp=rf,Ip=sf,Jp=tf,Kp=new bh("teardown"),Lp=vf,Mp=function(a,b){this.init(a,b)};Mp.prototype={detach:po,find:ro,findAll:so,findAllComponents:to,findComponent:uo,findNextNode:vo,firstNode:wo,init:Fp,rebind:Gp,render:Hp,toString:Ip,unbind:Jp,unrender:Lp};var Np=Mp,Op=function(a){this.type=zj,this.value=a.template.c};Op.prototype={detach:nk,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}};var Pp=Op,Qp=function(a){var b,c;this.type=Cj,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment;var d=this.name=a.template.n||"",e=b._inlinePartials[d];e||(p('Could not find template for partial "'+d+'"',{ractive:a.root}),e=[]),this.fragment=new bq({owner:this,root:b.parent,template:e,pElement:this.containerFragment.pElement}),f(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],oh.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")})};Qp.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),K(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Rp=Qp,Sp=function(a){this.declaration=a.template.a};Sp.prototype={init:Eg,render:Eg,unrender:Eg,teardown:Eg,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Tp=Sp,Up=wf,Vp=yf,Wp=zf,Xp=Af,Yp=Df,Zp=Ff,$p=function(a){this.init(a)};$p.prototype={bubble:gj,detach:hj,find:ij,findAll:jj,findAllComponents:kj,findComponent:lj,findNextNode:mj,firstNode:nj,getArgsList:kk,getNode:lk,getValue:mk,init:Up,rebind:Vp,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:Wp,toString:Xp,unbind:Yp,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Zp};var _p,aq,bq=$p,cq=Gf,dq=["template","partials","components","decorators","events"],eq=new bh("reset"),fq=function(a,b){function c(b,d,e){e&&e.partials[a]||b.forEach(function(b){b.type===yj&&b.getPartialName()===a&&d.push(b),b.fragment&&c(b.fragment.items,d,e),f(b.fragments)?c(b.fragments,d,e):f(b.items)?c(b.items,d,e):b.type===Bj&&b.instance&&c(b.instance.fragment.items,d,b.instance),b.type===xj&&(f(b.attributes)&&c(b.attributes,d,e),f(b.conditionalAttributes)&&c(b.conditionalAttributes,d,e))})}var d,e=[];return c(this.fragment.items,e),this.partials[a]=b,d=oh.start(this,!0),e.forEach(function(b){b.value=void 0,b.setValue(a)}),oh.end(),d},gq=Hf,hq=qi("reverse"),iq=If,jq=qi("shift"),kq=qi("sort"),lq=qi("splice"),mq=Kf,nq=Lf,oq=new bh("teardown"),pq=Nf,qq=Of,rq=Pf,sq=new bh("unrender"),tq=qi("unshift"),uq=Qf,vq=new bh("update"),wq=Rf,xq={add:Xg,animate:uh,detach:wh,find:yh,findAll:Hh,findAllComponents:Ih,findComponent:Jh,findContainer:Kh,findParent:Lh,fire:Ph,get:Qh,insert:Sh,merge:Uh,observe:hi,observeOnce:ii,off:li,on:mi,once:ni,pop:ri,push:si,render:Ai,reset:cq,resetPartial:fq,resetTemplate:gq,reverse:hq,set:iq,shift:jq,sort:kq,splice:lq,subtract:mq,teardown:nq,toggle:pq,toHTML:qq,toHtml:qq,unrender:rq,unshift:tq,update:uq,updateModel:wq},yq=function(a,b,c){return c||Tf(a,b)?function(){var c,d="_super"in this,e=this._super;return this._super=b,c=a.apply(this,arguments),d&&(this._super=e),c}:a},zq=Uf,Aq=Yf,Bq=function(a){var b,c,d={};return a&&(b=a._ractive)?(d.ractive=b.root,d.keypath=b.keypath.str,d.index={},(c=zk(b.proxy.parentFragment))&&(d.index=zk.resolve(c)),d):d};_p=function(a){return this instanceof _p?void Ap(this,a):new _p(a)},aq={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Aq},getNodeInfo:{value:Bq},parse:{value:Qi},Promise:{value:fh},svg:{value:dg},magic:{value:bg},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:ig},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Mg},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},vg(_p,aq),_p.prototype=d(xq,hg),_p.prototype.constructor=_p,_p.defaults=_p.prototype;var Cq="function";if(typeof Date.now!==Cq||typeof String.prototype.trim!==Cq||typeof Object.keys!==Cq||typeof Array.prototype.indexOf!==Cq||typeof Array.prototype.forEach!==Cq||typeof Array.prototype.map!==Cq||typeof Array.prototype.filter!==Cq||"undefined"!=typeof window&&typeof window.addEventListener!==Cq)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Dq=_p;return Dq});