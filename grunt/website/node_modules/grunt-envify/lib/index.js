(function() {
  var custom, envify, fs;

  fs = require('fs');

  envify = require('envify');

  custom = require('envify/custom');

  module.exports = function(input, output, vars) {
    var convert, infile, outfile;
    infile = fs.createReadStream(input, {
      encoding: 'utf8'
    });
    outfile = fs.createWriteStream(output);
    convert = vars ? custom(vars) : envify;
    return infile.pipe(convert(input)).pipe(outfile);
  };

}).call(this);
